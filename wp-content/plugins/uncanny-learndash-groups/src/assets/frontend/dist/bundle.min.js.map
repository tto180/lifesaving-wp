{"version":3,"file":"bundle.min.js","mappings":"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","sources":["webpack://uncanny-groups-frontend/./src/js/define-main-object.js","webpack://uncanny-groups-frontend/./src/js/front.js","webpack://uncanny-groups-frontend/./src/js/learndash_template_script.js","webpack://uncanny-groups-frontend/./src/js/ulgm-assignments.js","webpack://uncanny-groups-frontend/./src/js/ulgm-essays.js","webpack://uncanny-groups-frontend/./src/js/ulgm-reporting.js","webpack://uncanny-groups-frontend/./src/js/ulgm-rest-forms.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ElementQueries.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ResizeSensor.js","webpack://uncanny-groups-frontend/webpack/bootstrap","webpack://uncanny-groups-frontend/webpack/runtime/compat get default export","webpack://uncanny-groups-frontend/webpack/runtime/define property getters","webpack://uncanny-groups-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://uncanny-groups-frontend/external var \"jQuery\"","webpack://uncanny-groups-frontend/./src/js/utilities.js","webpack://uncanny-groups-frontend/./src/js/uncanny-owl-groups-ui.js","webpack://uncanny-groups-frontend/./src/js/group-management.js","webpack://uncanny-groups-frontend/./src/js/group-course-report.js","webpack://uncanny-groups-frontend/./src/js/course-dashboard.js","webpack://uncanny-groups-frontend/./src/js/manage-progress.js","webpack://uncanny-groups-frontend/./src/js/buy-courses.js","webpack://uncanny-groups-frontend/./src/js/create-group.js","webpack://uncanny-groups-frontend/./src/index.js"],"sourcesContent":["window.ulgmGroupManagement = {};","\njQuery(function($){\n\tvar accountSwitch = $('input#createaccount');\n\tif(accountSwitch.length){\n\t\taccountSwitch.attr( 'checked', true ).parent().hide();\n\t\t$( '.create-account' ).show();\n\t\taccountSwitch.parent().hide();\n\t}\n});\n","if (typeof flip_expand_collapse == 'undefined') {\n\tfunction flip_expand_collapse(what, id) {\n\n\t    if (jQuery( what + '-' + id + ' .list_arrow.flippable' ).hasClass( 'expand' ) ) {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideUp();\n\t    } else {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideDown();\n\t    }\n\t    return false;\n\t}\n}\n\nif (typeof flip_expand_all == 'undefined') {\n\tfunction flip_expand_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t    jQuery( what + ' .flip' ).slideDown();\n\t    return false;\n\t}\n}\n\nif (typeof flip_collapse_all == 'undefined') {\n\tfunction flip_collapse_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t    jQuery( what + ' .flip' ).slideUp();\n\t    return false;\n\t}\n}\n\nString.prototype.toHHMMSS = function() {\n    sec_numb = parseInt( this, 10 );\n    var hours = Math.floor( sec_numb / 3600 );\n    var minutes = Math.floor( ( sec_numb - ( hours * 3600 ) ) / 60 );\n    var seconds = sec_numb - ( hours * 3600 ) - ( minutes * 60 );\n    if ( hours < 10 ) {\n        hours = '0' + hours;\n    }\n    if ( minutes < 10 ) {\n        minutes = '0' + minutes;\n    }\n    if ( seconds < 10 ) {\n        seconds = '0' + seconds;\n    }\n    var time = hours + ':' + minutes + ':' + seconds;\n    return time;\n}\n\nfunction learndash_timer() {\n    document.getElementById( 'learndash_mark_complete_button' ).disabled = true;\n    learndash_forced_lesson_time = learndash_forced_lesson_time - 1;\n    document.getElementById( 'learndash_timer' ).innerHTML = learndash_forced_lesson_time.toString().toHHMMSS();\n    if ( learndash_forced_lesson_time <= 0 ) {\n        clearInterval( learndash_timer_var );\n        document.getElementById( 'learndash_mark_complete_button' ).disabled = false;\n        document.getElementById( 'learndash_timer' ).innerHTML = '';\n    }\n}\n\njQuery( function() {\n    function force_max_12px_font_size() {\n        var f1 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a' ).css( 'font-size' );\n        var f2 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size' );\n        if ( f1 != undefined && f1.replace( 'px', '' ) > 12 || f2 != undefined && f2.replace( 'px', '' ) > 12 ) {\n            jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a, #course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size', 12 );\n        }\n    }\n    force_max_12px_font_size();\n});\n\njQuery(document).ready(function() {\n\t\n\tif ( jQuery( '#learndash_timer' ).length ) {\n\t\tvar timer_el \t\t= jQuery( '#learndash_timer' );\n\t\tvar timer_seconds \t= timer_el.attr('data-timer-seconds');\n\n\t\tvar timer_button_el = jQuery( timer_el.attr('data-button') );\n\n\t\tif ( ( typeof timer_seconds !== 'undefined' ) && ( typeof timer_button_el !== 'undefined' ) ) {\n\n\t        timer_button_el.attr('disabled', true);\n\t\t\t\n\t\t\ttimer_seconds = parseInt( timer_seconds );\n\n\n\t\t\tvar cookie_key \t\t= timer_el.attr('data-cookie-key');\n\t\t\tif (typeof cookie_key !== 'undefined') {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie_'+cookie_key;\n\t\t\t} else {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie';\n\t\t\t}\n\t\t\tcookie_timer_seconds = jQuery.cookie(cookie_name);\n\t\t\tif (typeof cookie_timer_seconds !== 'undefined') {\n\t\t\t\ttimer_seconds = parseInt( cookie_timer_seconds );\n\t\t\t}\n\t\t\tjQuery.removeCookie( cookie_name );\n\t\t\t\n\t\t\tif ( timer_seconds >= 1 ) {\n\t\t\t\tvar learndash_timer_var = setInterval( function() {\n\t\t\t\t    timer_seconds = timer_seconds - 1;\n\t\t\t\t\n\t\t\t\t\tvar time_display = timer_seconds.toString().toHHMMSS();\n\t\t\t\t    timer_el.html(time_display);\n\t\t\t\t    if ( timer_seconds <= 0 ) {\n\t\t\t\t\t\t\n\t\t\t\t        clearInterval( learndash_timer_var );\n\t\t\t\t        timer_button_el.attr('disabled', false);\n\t\t\t\t        timer_el.html('');\n\t\t\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t\t\t\t\n\t\t\t\t\t\ttimer_button_el.trigger('learndash-time-finished');\n\t\t\t\t    }\n\t\t\t\t\t// Store the timer state (value) into a cookie. This is done if the page reloads the student can resume\n\t\t\t\t\t// the time instead of restarting.\n\t\t\t\t\tjQuery.cookie(cookie_name, timer_seconds);\n\t\t\t\t},1000);\t\n\t\t\t} else {\n\t\t        timer_button_el.attr('disabled', false);\n\t\t        timer_el.html('');\n\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t}\n\t\t}\n\t}\n});\n\n\njQuery(document).ready(function(){\n\n\tif (typeof sfwd_data !== 'undefined') {\n\t\tif ( typeof sfwd_data.json !== 'undefined' ) {\n\t\t\tsfwd_data = sfwd_data.json.replace(/&quot;/g, '\"');\n\t\t\tsfwd_data = jQuery.parseJSON( sfwd_data );\n\t\t}\n\t}\n\n\t// load essay in the modal\n\tjQuery(document).on('click','.wpProQuiz_sortablezzz a', function(e) {\n\t\tvar _this = jQuery(this);\n\t\tvar addressValue = jQuery(this).attr(\"href\");\n\t\tvar substring = 'essay';\n\n\t\tif( addressValue.indexOf(substring) !== -1 && typeof groupLeaderCourseReportSetup !== 'undefined'){\n\t\t\te.preventDefault();\n\n\t\t\tvar dataVars = {\n\t\t\t\tessayUrl: addressValue\n\t\t\t};\n\n\t\t\t// Rest api call to activate/deactivate plugins\n\t\t\tjQuery.ajax({\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupLeaderCourseReportSetup.root + 'get_user_essay/',\n\t\t\t\tbeforeSend: function (xhr) {\n\t\t\t\t\txhr.setRequestHeader('X-WP-Nonce', groupLeaderCourseReportSetup.nonce);\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\n\t\t\t\t\tvar essay = '<div style=\"background:white;padding:10px;\">'+response+'</div>';\n\t\t\t\t\t_this.parent().append(essay);\n\t\t\t\t\t_this.hide();\n\n\t\t\t\t},\n\t\t\t\tfail: function (response) {\n\t\t\t\t\talert('Rest Call Failed');\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t});\n\n\tjQuery(document).on('click','a.user_statistic', function(e) {\n\t\te.preventDefault();\n\t\t\n\t\tvar refId \t\t\t\t= \tjQuery(this).data('ref_id');\n\t\tvar quizId \t\t\t\t= \tjQuery(this).data('quiz_id');\n\t\tvar userId \t\t\t\t= \tjQuery(this).data('user_id');\n\t\tvar statistic_nonce \t= \tjQuery(this).data('statistic_nonce');\n\t\tvar action \t\t\t\t= \t'wp_pro_quiz_admin_ajax';\n        var nonce \t\t\t\t= \tjQuery(this).data('nonce');\n        if (typeof groupQuizReportSetup !== 'undefined' && typeof groupQuizReportSetup.statistic_action !== 'undefined') {\n            action = groupQuizReportSetup.statistic_action;\n        }\n        if (typeof ULGM_ManageProgress !== 'undefined' && typeof ULGM_ManageProgress.statistic_action !== 'undefined') {\n            action = ULGM_ManageProgress.statistic_action;\n        }\n\n\t\tvar post_data = {\n\t\t\t'action': action,\n\t\t\t'func': 'statisticLoadUser',\n            'nonce': nonce,\n\t\t\t'data': {\n\t\t\t\t'quizId': quizId,\n            \t'userId': userId,\n            \t'refId': refId,\n\t\t\t\t'statistic_nonce': statistic_nonce,\n            \t'avg': 0\n\t\t\t}\n\t\t}\n\t\t\n\t\tjQuery('#wpProQuiz_user_overlay, #wpProQuiz_loadUserData').show();\n\t\tvar content = jQuery('#wpProQuiz_user_content').hide();\n\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: sfwd_data.ajaxurl,\n\t\t\tdataType: \"json\",\n\t\t\tcache: false,\n\t\t\tdata: post_data,\n\t\t\terror: function(jqXHR, textStatus, errorThrown ) {\n\t\t\t},\n\t\t\tsuccess: function(reply_data) {\n\n\t\t\t\tif ( typeof reply_data.html !== 'undefined' ) {\n\t\t\t\t\tcontent.html(reply_data.html);\n\t\t\t\t\tjQuery('a.wpProQuiz_update', content).remove();\n\t\t\t\t\tjQuery('a#wpProQuiz_resetUserStatistic', content).remove();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tjQuery('#wpProQuiz_user_content').show();\n\n\t\t\t\t\tjQuery('#wpProQuiz_loadUserData').hide();\n\t\t\t\t\n\t\t\t\t\tcontent.find('.statistic_data').click(function() {\n\t\t\t\t\t\tjQuery(this).parents('tr').next().toggle('fast');\n\t\t\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\t\t\n\t\tjQuery('#wpProQuiz_overlay_close').click(function() {\n\t\t\tjQuery('#wpProQuiz_user_overlay').hide();\n\t\t});\n\t});\n\t\n});\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-assignments-table').length > 0 ){\n            window.ulgmGroupManagement.Assignments.constructor();\n\n            jQuery('form#uo-groups-assignments-management-form').on('click', 'button.assignment_approve_single,a.assignment_approve_single,button#group-approve-assignments-button', function (e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('assignment_approve_', '');\n                assignment_id = assignment_id.replace('a_', '');\n                if ((typeof assignment_id !== 'undefined') && (assignment_id != '')) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-assignments-management-form').on('click','a.delete_assignment_single,button#group-trash-assignments-button',function(e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('a_assignment_trash_', '');\n\n                if ( ( typeof assignment_id !== 'undefined' ) && ( assignment_id != '' ) ) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n\n\n            $('#uo-group-assignments-table').on('click','a.edit_assignment_single',function(){\n                var post_id = $(this).data('assignment-id');\n                window.ulgmGroupManagement.Assignments.editAssignmentsData(post_id);\n            });\n            $('body').on('click','button#uo-assignment-edit-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n            $('body').on('click','#uo-assignment-update-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-assignments-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Assignments = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        status: 'not-approved',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element  = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element   = $('#uo-group-report-lessons');\n            this.elements.select.status.element   = $('#uo-group-report-status');\n\n\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element   = $('#uo-group-report-nolessons');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n            window.ulgmGroupManagement.Assignments.status = this.elements.select.status.element.val();\n            // Request data\n            window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n        },\n\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-assignments-table' );\n\n            var columns = [\n                {\n                    title: 'select',\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                },\n                {\n                    title: groupAssignments.localized.title,\n                    data: 'title',\n                    className: 'has-row-actions',\n                    name: 'title',\n                    visible: groupAssignments.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                },\n\t\t\t\t{\n                    title: groupAssignments.localized.student,\n                    data: 'student',\n                    name: 'student',\n                    visible: groupAssignments.columns_visibilities.student,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--student',\n                },\n                {\n                    title: groupAssignments.localized.first_name,\n                    data: 'first_name',\n                    name: 'first_name',\n                    visible: groupAssignments.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                },\n                {\n                    title: groupAssignments.localized.last_name,\n                    data: 'last_name',\n                    name: 'last_name',\n                    visible: groupAssignments.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                },\n                {\n                    title: groupAssignments.localized.author,\n                    data: 'author',\n                    name: 'author',\n                    visible: groupAssignments.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                },\n                {\n                    title: groupAssignments.localized.status,\n                    data: 'status',\n                    orderable: true,\n                    name: 'status',\n                    visible: groupAssignments.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                },\n                {\n                    title: groupAssignments.localized.points,\n                    data: 'points',\n                    orderable: false,\n                    name: 'points',\n                    visible: groupAssignments.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                },\n                {\n                    title: groupAssignments.localized.assignedCourse,\n                    data: 'assignedCourse',\n                    orderable: true,\n                    name: 'assignedCourse',\n                    visible: groupAssignments.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                },\n                {\n                    title: groupAssignments.localized.assignedlesson,\n                    data: 'assignedlesson',\n                    orderable: true,\n                    name: 'assignedlesson',\n                    visible: groupAssignments.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                },\n                {\n                    title: groupAssignments.localized.comments,\n                    data: 'comments',\n                    name: 'comments',\n                    visible: groupAssignments.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                },\n                {\n                    title: groupAssignments.localized.date,\n                    data: 'date',\n                    name: 'date',\n                    visible: groupAssignments.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                },\n            ];\n\n            const buttonsShared = {\n                exportOptions: {\n\n                    columns: ( id, data, node ) => {\n                        // Don't export the column used to select rows, or\n                        // \"Title\" columns\n                        if (\n                            node.matches( '.ulg-report-assignments-cell--select-row' ) ||\n                            node.matches( '.ulg-report-assignments-cell--title' )\n                        ) {\n                            return false;\n                        }\n\n                        return this.uoTable.column( id ).visible();\n                    },\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-assignments-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button\n                                if ( node.querySelector( 'button.assignment_approve_single' ) ) {\n                                    // Format data. If it has the button, it's not approved. Use that instead.\n                                    data = groupAssignments.i18n.notApproved;\n                                }\n                            }\n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupAssignments.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                }\n            }\n\n            const reportButtons = [];\n\n            // Check if we have to add the CSV button\n            if ( $table.dataset.csv == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'csv',\n                    text: groupAssignments.i18n.exportCSV,\n                } ) );\n            }\n\n            // Check if we have to add the Excel button\n            if ( $table.dataset.excel == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'excelHtml5',\n                    text: groupAssignments.i18n.exportExcel,\n                } ) );\n            }\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupAssignments.localized.all]\n                ],\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n                //responsive: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: reportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        title: '<input type=\"checkbox\" name=\"select_all\" value=\"1\" id=\"uo-assignments-select-all\">',\n                        data: 'id',\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                    },\n                    {\n                        title: groupAssignments.localized.title,\n                        data: 'title',\n                        className: 'has-row-actions',\n                        name: 'title',\n                        visible: groupAssignments.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                    },\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: groupAssignments.localized.student,\n\t\t\t\t\t\tdata: 'student',\n\t\t\t\t\t\tname: 'student',\n\t\t\t\t\t\tvisible: groupAssignments.columns_visibilities.student,\n\t\t\t\t\t\tclassName: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--student',\n\t\t\t\t\t},\n                    {\n                        title: groupAssignments.localized.first_name,\n                        data: 'first_name',\n                        name: 'first_name',\n                        visible: groupAssignments.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                    },\n                    {\n                        title: groupAssignments.localized.last_name,\n                        data: 'last_name',\n                        name: 'last_name',\n                        visible: groupAssignments.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                    },\n                    {\n                        title: groupAssignments.localized.author,\n                        data: 'author',\n                        name: 'author',\n                        visible: groupAssignments.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                    },\n                    {\n                        title: groupAssignments.localized.status,\n                        data: 'status',\n                        orderable: true,\n                        name: 'status',\n                        visible: groupAssignments.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                    },\n                    {\n                        title: groupAssignments.localized.points,\n                        data: 'points',\n                        orderable: false,\n                        name: 'points',\n                        visible: groupAssignments.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedCourse,\n                        data: 'assignedCourse',\n                        orderable: true,\n                        name: 'assignedCourse',\n                        visible: groupAssignments.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedlesson,\n                        data: 'assignedlesson',\n                        orderable: true,\n                        name: 'assignedlesson',\n                        visible: groupAssignments.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                    },\n                    {\n                        title: groupAssignments.localized.comments,\n                        data: 'comments',\n                        name: 'comments',\n                        visible: groupAssignments.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                    },\n                    {\n                        title: groupAssignments.localized.date,\n                        data: 'date',\n                        name: 'date',\n                        visible: groupAssignments.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n            tableVars.initComplete = function(s,d) {\n                jQuery( `\n                    <div class=\"group-assignments-buttons uo-hidden\">\n                        <button class=\"uo-btn uo-left\" id=\"group-approve-assignments-button\">\n                            ${ groupAssignments.localized.approveAssignments }\n                        </button>\n                        <button class=\"uo-btn uo-left\" id=\"group-trash-assignments-button\">\n                            ${ groupAssignments.localized.deleteAssignments }\n                        </button>\n                    </div>\n                ` ).insertAfter( '#uo-group-assignments-table_filter' );\n                jQuery(window.ulgmGroupManagement.Assignments.addColumnsFilter(s)).insertAfter( '#uo-group-assignments-table_filter' );\n            };\n\n            // Check what column has to be used to sort the table\n            let tableOrder = [];\n            // Find the index of the column we have to use to sort\n            let tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmAssignmentReportShortcode.table.orderBy );\n\n            // If the column doesn't exist, then try to get the default one\n            if ( tableOrderByIndex === -1 ) {\n                tableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date' );\n            }\n            // If the one defined by the user, or the default one exists, add it\n            if ( tableOrderByIndex !== -1 ) {\n                tableOrder = [\n                    [\n                        tableOrderByIndex, // The ID of the column used to sort, defaults to `date`\n                        ulgmAssignmentReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n                    ]\n                ];\n            }\n\n            tableVars.order = tableOrder;\n\n            this.uoTable = jQuery('#uo-group-assignments-table');\n\n            if ( jQuery('#uo-group-assignments-table').length > 0 ){\n                this.uoTable = jQuery('#uo-group-assignments-table').DataTable(tableVars);\n                new jQuery.fn.dataTable.ColReorder( this.uoTable );\n            }\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {title: groupAssignments.localized.title, data: 'title', className:'has-row-actions', name: 'title', visible: groupAssignments.columns_visibilities.title},\n                {title: groupAssignments.localized.student, data: 'student', name: 'student', visible: groupAssignments.columns_visibilities.student},\n                {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n            ];\n\n            /*var language = [\n                \"lengthMenu\": groupAssignments.localized.lengthMenu,\n                \"zeroRecords\": groupAssignments.localized.zeroRecords,\n                \"info\": groupAssignments.localized.info,\n                \"infoEmpty\": groupAssignments.localized.infoEmpty,\n                \"infoFiltered\": groupAssignments.localized.infoFiltered,\n                \"loadingRecords\": groupAssignments.localized.loadingRecords,\n                \"emptyTable\": groupAssignments.localized.emptyTable\n            ];*/\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n                    columns: ( id, data, node ) => {\n                        // Don't export the column used to select rows, or\n                        // \"Title\" columns\n                        if (\n                            node.matches( '.ulg-report-assignments-cell--select-row' ) ||\n                            node.matches( '.ulg-report-assignments-cell--title' )\n                        ) {\n                            return false;\n                        }\n\n                        return this.uoTable.column( id ).visible();\n                    },\n\n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'csv',\n\t\t\t\t\t\ttext: groupAssignments.localized.buttons.csvExport,\n\t\t\t\t\t\ttitle: 'lesson-report'\n\t\t\t\t\t})\n                ],\n                stateSave: true,\n                //responsive: true,\n            };\n\n            if ($.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' )) {\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {title: groupAssignments.localized.title, data: 'title', name: 'title', visible: groupAssignments.columns_visibilities.title},\n\t\t\t\t\t{title: groupAssignments.localized.student, data: 'student', name: 'student', visible: groupAssignments.columns_visibilities.student},\n                    {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                    {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                    {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                    {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                    {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                    {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                    {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                    {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                    {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n\t\t\t\t\t\t\"student\": value.student,\n                        \"first_name\": value.first_name,\n                        \"last_name\": value.last_name,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupAssignments.localized.customizeColumns }\" data-label-disable=\"${ groupAssignments.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Assignments;\n\n            if( state.oSavedState !== null ) {\n                jQuery.each(state.oSavedState.columns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.visible));\n                    }\n                });\n            } else {\n                jQuery.each(state.aoColumns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.bVisible));\n                    }\n                });\n            }\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Assignments.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Assignments.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n\t\t\t\t\t\t// Trigger Resize\n\t\t\t\t\t\twindow.ulgmGroupManagement.Assignments.uoTable.columns.adjust().recalc();\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        create_options: function( source, ids ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if( ids.length > 1 ){\n                ids.push(0);\n            }\n\n\n            // Get options by ID\n            this.elements.select[source].options.each(function(){\n                let $this   = $(this),\n                    id      = parseInt( $this.val() );\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-assignments-management').on('click','#uo-assignments-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-assignments-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-assignments-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-approve-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-trash-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n\n            });\n\n            this.elements.select.group.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Hide lesson select\n                //_this.elements.select.lesson.element.hide();\n                _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n                // Return if course id is 0\n                if( group_id == 0 || group_id == null ){\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n                // Get relationships\n                let courses_to_show = groupAssignments.courseGrouplessons[ group_id ];\n                courses_to_show = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                if ( options.length > 0 ){\n                     // Show \"Select course\" dropdown\n                    _this.elements.select.course.element.show();\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n                    //_this.elements.select.course.element.html(_this.elements.select.course.element.find('option').sort(function(x, y) {\n                        // to change to descending order switch \"<\" for \">\"\n                    //    return $(x).text() > $(y).text() ? 1 : -1;\n                    //}));\n                    _this.elements.select.course.element.removeAttr('disabled');\n\n                    // Select empty option\n\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                    // trigger change after value set on load\n                    _this.elements.select.course.element.trigger('change');\n                }\n                else {\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                }\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.course.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Course ID\n                let course_id = $this.val();\n                // Return if course id is 0\n                if( course_id == 0){\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n\n                // Get relationships\n                let lessons_to_show = groupAssignments.relationships[ window.ulgmGroupManagement.Assignments.groupId ][ course_id ];\n                lessons_to_show = lessons_to_show === undefined ? [] : lessons_to_show;\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                if ( options.length > 0 ) {\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html(options);\n                    jQuery('#uo-group-report-lessons option').show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n                    _this.elements.select.lesson.element.removeAttr('disabled');\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger('change');\n                }else{\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n                }\n\n            });\n\n            this.elements.select.lesson.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let lesson_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.lessonId = lesson_id;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( lesson_id, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.status.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( window.ulgmGroupManagement.Assignments.lessonId, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, status );\n            });\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Assignments.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Assignments.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getAssignmentsData: function (lessonId, courseId, groupId, status) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-assignments-table tbody\").html(\"<div id='group-loader'>\" + groupAssignments.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                courseId: courseId,\n                status: status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'get_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Assignments.createTable(response);\n                    window.ulgmGroupManagement.Assignments.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editAssignmentsData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                assignment_id: postId,\n                action: 'edit_assignments',\n                post_type:'sfwd-assignment',\n                security:groupAssignments.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'edit_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n\n                    const modal = $(response.html);\n\n                    modal.appendTo( 'body' );\n\n                    modal.on( 'modal:open.uncanny-groups-modal', () => {\n                        // Focus on the first field\n                        const fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n                        \n                        if ( fieldField.length > 0 ) {\n                            fieldField.trigger( 'focus' );\n                        } else {\n                            $( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n                        }\n\n                        modal.off( 'modal:open.uncanny-groups-modal' );\n                    } );\n\n                    modal.modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveAssignmentsData: function () {\n            var dataVars = $('#edit_assignment_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            $('.uo-groups-message-ok').hide();\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                    //$('#group-management-message').html(response.message).show();\n                    $('.uo-groups-message-ok').html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsAssignment: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-essays-table').length > 0 ){\n            window.ulgmGroupManagement.Essays.constructor();\n\n            jQuery('form#uo-groups-essays-management-form').on('click', 'button.essay_approve_single,a.essay_approve_single', function (e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('essay_approve_', '');\n                essay_id = essay_id.replace('a_', '');\n                if ((typeof essay_id !== 'undefined') && (essay_id != '')) {\n                    var input_essay_points = jQuery('form#uo-groups-essays-management-form input#essay_points_' + essay_id);\n                    var essay_points = document.getElementById('essay_points_' + essay_id);\n                    if( input_essay_points.length ) {\n                        var value = parseFloat(input_essay_points.val());\n                        var min = parseFloat(input_essay_points.attr('min'));\n                        var max = parseFloat(input_essay_points.attr('max'));\n                        if ( isNaN(value) || value < min || value > max ) {\n                            alert( groupEssays.i18n.invalid_points_input );\n                            essay_points.focus();\n                            return;\n                        }\n                    }\n\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('graded');\n                    }\n                    //jQuery('form#uo-groups-essays-management-form').submit();\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-essays-management-form').on('click','a.delete_essay_single',function(e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('a_essay_trash_', '');\n\n                if ( ( typeof essay_id !== 'undefined' ) && ( essay_id != '' ) ) {\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                    }\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n\n\n            $('#uo-group-essays-table').on('click','a.edit_essay_single',function(){\n                var post_id = $(this).data('essay-id');\n                window.ulgmGroupManagement.Essays.editEssaysData(post_id);\n            });\n            $('body').on('click','button#uo-essay-edit-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n            $('body').on('click','#uo-essay-update-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-essays-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Essays = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        quizId: 0,\n\n        status: 'ungraded',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                quiz: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element = $('#uo-group-report-lessons');\n            this.elements.select.quiz.element = $('#uo-group-report-quizzes');\n            this.elements.select.status.element = $('#uo-group-report-status');\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element = $('#uo-group-report-nolessons');\n            this.elements.select.quiz.no_element = $('#uo-group-report-noquizzes');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.quiz.options   = $('#uo-group-report-quizzes option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n            this.status = this.elements.select.status.element.val();\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n\n            // Maybe request initial data.\n            if ( ulgmEssayReportShortcode.loadOnRender === 'yes' ) {\n\t\t\t    window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n            }\n        },\n\n\t\tgetParam: function(name) {\n\t\t\tname = name.replace(/[[]/, \"\\[\").replace(/[]]/, \"\\]\");\n\t\t\tvar regex = new RegExp(\"[\\?&]\" + name + \"=([^&#]*)\"),\n\t\t\t\tresults = regex.exec(location.search);\n\t\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(\"+\", \" \"));\n\t\t},\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-essays-table' );\n\n            var columns = [\n                {\n                    data:      'id',\n                    title:     groupEssays.localized.idColumn,\n                    className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                },\n                {\n                    data:      'student',\n                    title:     groupEssays.localized.student,\n                    visible:   groupEssays.columns_visibilities.student,\n                    className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                },\n                {\n                    data:      'title',\n                    title:     groupEssays.localized.title,\n                    visible:   groupEssays.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    data:      'first_name',\n                    title:     groupEssays.localized.first_name,\n                    visible:   groupEssays.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    data:      'last_name',\n                    title:     groupEssays.localized.last_name,\n                    visible:   groupEssays.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    data:      'author',\n                    title:     groupEssays.localized.author,\n                    visible:   groupEssays.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    data:      'status',\n                    title:     groupEssays.localized.status,\n                    visible:   groupEssays.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    data:      'points',\n                    title:     groupEssays.localized.points,\n                    visible:   groupEssays.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    data:      'question_text',\n                    title:     groupEssays.localized.question_text,\n                    visible:   groupEssays.columns_visibilities.question_text,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    data:      'content',\n                    title:     groupEssays.localized.content,\n                    visible:   groupEssays.columns_visibilities.content,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    data:      'assignedCourse',\n                    title:     groupEssays.localized.assignedCourse,\n                    visible:   groupEssays.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    data:      'assignedlesson',\n                    title:     groupEssays.localized.assignedlesson,\n                    visible:   groupEssays.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    data:      'assignedquiz',\n                    title:     groupEssays.localized.assignedquiz,\n                    visible:   groupEssays.columns_visibilities.assignedquiz,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    data:      'comments',\n                    title:     groupEssays.localized.comments,\n                    visible:   groupEssays.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    data:      'date',\n                    title:     groupEssays.localized.date,\n                    visible:   groupEssays.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            // Check what column has to be used to sort the table\n            let tableOrder = [];\n            // Find the index of the column we have to use to sort\n            let tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmEssayReportShortcode.table.orderBy );\n\n            // If the column doesn't exist, then try to get the default one\n            if ( tableOrderByIndex === -1 ) {\n                tableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date' );\n            }\n            // If the one defined by the user, or the default one exists, add it\n            if ( tableOrderByIndex !== -1 ) {\n                tableOrder = [\n                    [\n                        tableOrderByIndex, // The ID of the column used to sort, defaults to `date`\n                        ulgmEssayReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n                    ]\n                ];\n            }\n\n            const buttonsShared = {\n                exportOptions: {\n                    columns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-essays-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button inside\n                                if ( node.querySelector( 'button.essay_approve_single' ) ) {\n                                    // Replace data. If it has the button, then it's \"Ungraded\"\n                                    data = groupEssays.i18n.ungraded;\n                                }\n                            }\n                            // Check if it's the \"Points\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--points' ) ) {\n                                // Check if it has an input\n                                const $input = node.querySelector( 'input' );\n                                if ( $input ) {\n                                    // Format data\n                                    data = `${ $input.value } ${ node.innerText.trim() }`;\n                                }\n                            }\n                            // Check if it's the \"Date\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--date' ) ) {\n                                // Strips hidden timestamp <span>\n                                return data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n                            }\n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupEssays.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-quizzes',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                }, \n            }\n\n            const reportButtons = [];\n\n            // Check if we have to add the CSV button\n            if ( $table.dataset.csv == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'csv',\n                    text: groupEssays.i18n.exportCSV,\n                } ) );\n            }\n\n            // Check if we have to add the Excel button\n            if ( $table.dataset.excel == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'excelHtml5',\n                    text: groupEssays.i18n.exportExcel,\n                } ) );\n            }\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupEssays.localized.all]\n                ],\n                order: tableOrder,\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: reportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columnDefs = [{\n                    className: 'uo-groups__cell-checkbox',\n                    targets:   [0]\n                }];\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'student',\n                        title:     groupEssays.localized.student,\n                        visible:   groupEssays.columns_visibilities.student,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            tableVars.initComplete = function(s,d) {\n                jQuery(window.ulgmGroupManagement.Essays.addColumnsFilter(s)).insertAfter('#uo-group-essays-table_filter');\n            };\n\n            this.uoTable = jQuery('#uo-group-essays-table');\n\n            if ( jQuery('#uo-group-essays-table').length > 0 ){\n                this.uoTable = jQuery('#uo-group-essays-table').DataTable(tableVars);\n                new jQuery.fn.dataTable.ColReorder( this.uoTable );\n\t\t\t\tvar search = window.ulgmGroupManagement.Essays.getParam('search');\n\t\t\t\t// console.log(window.ulgmGroupManagement.Essays.uoTable);\n\t\t\t\tif (search) window.ulgmGroupManagement.Essays.uoTable.search(search).draw();\n            }\n\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {\n                    title:     groupEssays.localized.title,\n                    data:      'title',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    title:     groupEssays.localized.student,\n                    data:      'student',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                },\n                {\n                    title:     groupEssays.localized.first_name,\n                    data:      'first_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    title:     groupEssays.localized.last_name,\n                    data:      'last_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    title:     groupEssays.localized.author,\n                    data:      'author',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    title:     groupEssays.localized.status,\n                    data:      'status',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    title:     groupEssays.localized.points,\n                    data:      'points',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    title:     groupEssays.localized.question_text,\n                    data:      'question_text',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    title:     groupEssays.localized.content,\n                    data:      'content',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    title:     groupEssays.localized.assignedCourse,\n                    data:      'assignedCourse',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    title:     groupEssays.localized.assignedlesson,\n                    data:      'assignedlesson',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    title:     groupEssays.localized.assignedquiz,\n                    data:      'assignedquiz',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    title:     groupEssays.localized.comments,\n                    data:      'comments',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    title:     groupEssays.localized.date,\n                    data:      'date',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n                    {\n                        extend: 'csv',\n                        text: groupEssays.localized.buttons.csvExport,\n                        title: 'lesson-report'\n                    }\n                ],\n                stateSave: true,\n                responsive: true,\n            };\n\n            if ( $.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' ) ){\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'student',\n                        title:     groupEssays.localized.student,\n                        visible:   groupEssays.columns_visibilities.student,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--student',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden');\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"question_text\": value.question_text,\n                        \"student\": value.student,\n                        \"content\": value.content,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"assignedquiz\": value.assignedquiz,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n\n        create_options: function( source, ids = [] ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if ( ids.length > 1 ){\n                ids.push( 0 );\n            }\n\n            // Get options by ID\n            this.elements.select[ source ].options.each(function(){\n                let $this   = $(this).clone(),\n                    id      = parseInt( $this.val() );\n\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // If there is only one option and it's a \"Select a x\" option\n            // Then don't return any option\n            if ( options.length == 1 && parseInt( options[ 0 ].val() ) == 0 ){\n                options = [];\n            }\n\n            // Check if there aren't options selected\n            if ( options.length == 0 ){\n                // Add the no option\n                options.push( this.elements.select[ source ].options.filter( '.ulgm-essays-no-results' ) );\n            }\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupEssays.localized.customizeColumns }\" data-label-disable=\"${ groupEssays.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Essays;\n\n            if( state.oSavedState !== null ) {\n\n                jQuery.each(state.oSavedState.columns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.visible));\n                    }\n                });\n            } else {\n                jQuery.each(state.aoColumns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.bVisible));\n                    }\n                });\n            }\n\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Essays.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Essays.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-essays-management').on('click',' #uo-essays-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-essays-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-essays-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-approve-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('approve_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-trash-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            // Listen changes to the \"Group\" dropdown\n            this.elements.select.group.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $( this );\n\n                // DEBUG: console.log( '--------- GROUP ---------' );\n                // DEBUG: console.log( '-- GROUP: Value changed' );\n\n                // COURSE: Show\n                // _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n\n                // Check if the group ID is empty (\"Select an option\")\n                if ( group_id == 0 || group_id == null ){\n                    // COURSE: Remove all the options\n                    _this.elements.select.course.element.empty();\n                    // COURSE: Get the \"Select course\" option\n                    let options_course = _this.create_options( 'course' );\n                    // COURSE: Set the options\n                    _this.elements.select.course.element.html( options_course );\n\n                    // LESSON: Remove all the options\n                    _this.elements.select.lesson.element.empty();\n                    // LESSON: Get the \"Select lesson\" option\n                    let options = _this.create_options( 'lesson' );\n                    // LESSON: Set the options\n                    _this.elements.select.lesson.element.html( options );\n\n                    // QUIZ: Get the \"Select lesson\" option\n                    let options_quiz = _this.create_options( 'quiz' );\n                    // QUIZ: Get the \"Select lesson\" option\n                    _this.elements.select.quiz.element.html( options_quiz );\n\n                    // Render the tables again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Return\n                    return;\n                }\n\n                // Get the relationships\n                let courses_to_show = groupEssays.courseGrouplessons[ group_id ];\n                courses_to_show     = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create the options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- COURSES: There are courses' );\n                    // DEBUG: console.log( '-- COURSES: Hide the no results option' );\n\n                    // COURSE: Hide the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.hide();\n\n                    // Add the options to the COURSE dropdown\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n\n                    // Select the empty option\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- COURSES: Only one course found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'course' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.course.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.course.element.prop( 'disabled', false );\n                    }\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n                    // Trigger change after value set on load\n                    _this.elements.select.course.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- COURSES: There are NOT courses' );\n\n                    // Remove the \"h3-select\" class, so it looks like a select\n                    _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    // _this.elements.select.course.element.empty();\n\n                    let options_course = _this.create_options( 'course' );\n                    _this.elements.select.course.element.html( options_course );\n                    _this.elements.select.course.element.prop( 'disabled', true );\n\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    // Render the table again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n\n                    // COURSE: Show the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.show();\n                }\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.course.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- COURSE ---------' );\n                // DEBUG: console.log( '-- COURSE: Value changed' );\n\n                // Course ID\n                let course_id = $this.val();\n\n                // Return if course id is 0\n                if ( course_id == 0 || course_id == '' ){\n                    _this.elements.select.lesson.element.empty();\n\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    return;\n                }\n\n                // Check if this group has at least one course with lessons\n                let lessons_to_show = [];\n                if ( \n                    typeof groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ] !== 'undefined' && \n                    typeof groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] !== 'undefined' && \n                    Array.isArray( groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] )\n                ) {\n                    // Get relationships\n                    lessons_to_show = groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n                }\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- LESSONS: There are lessons' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', false );\n\n                    jQuery( '#uo-group-report-lessons option' ).show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- LESSON: Only one lesson found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'lesson' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'lesson' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- LESSONS: There are NOT lessons' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n\n                let quizzes_to_show = [];\n                if ( \n                    typeof groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ] !== 'undefined' && \n                    typeof groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] !== 'undefined' && \n                    Array.isArray( groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] )\n                ) {\n                    // Get relationships\n                    quizzes_to_show = groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n                }\n\n                // Create options\n                let options_quizzes = _this.create_options( 'quiz', quizzes_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptionsQuizzes = options_quizzes.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptionsQuizzes && options_quizzes.length > 0 ){\n                    // DEBUG: console.log( '-- QUIZZES: There are quizzes' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.quiz.element.show();\n                    _this.elements.select.quiz.element.html( options_quizzes );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    jQuery('#uo-group-report-quizzes option').show();\n                    _this.elements.select.quiz.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options_quizzes.length == 1 ){\n                        // DEBUG: console.log( '---- QUIZZES: Only one quiz found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'quiz' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.quiz.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'quiz' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.quiz.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.quiz.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.quiz.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- QUIZZES: There are NOT quizzes' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.quiz.element.empty();\n                    let options = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    window.ulgmGroupManagement.Essays.createTable( [] );\n                    window.ulgmGroupManagement.Essays.createTableHidden( [] );\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n            });\n\n            this.elements.select.lesson.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- LESSON ---------' );\n                // DEBUG: console.log( '-- LESSON: Value changed' );\n\n                // lesson ID\n                let lesson_id = parseInt( $this.val() );\n                let course_id = parseInt( _this.elements.select.course.element.val() );\n                let group_id = parseInt( _this.elements.select.group.element.val() );\n\t\t\t\t\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.lessonId = lesson_id;\n\n                // Reset Quiz ID\n                let current_quiz_id = parseInt( window.ulgmGroupManagement.Essays.quizId );\n                window.ulgmGroupManagement.Essays.quizId = 0;\n                _this.elements.select.quiz.element.val( 0 );\n\n                let group_quizzes = typeof groupEssays.lesson_quizzes[ group_id ] !== 'undefined' ? groupEssays.lesson_quizzes[ group_id ] : {};\n                let course_quizzes = typeof group_quizzes[ course_id ] !== 'undefined' ? group_quizzes[ course_id ] : {};\n                let lesson_quizzes = typeof course_quizzes[ lesson_id ] !== 'undefined' ? course_quizzes[ lesson_id ] : {};\n\t\t\t\tlet ommitted_group_quizzes = typeof groupEssays.omitted_topic_quizzes[ group_id ] !== 'undefined' ? groupEssays.omitted_topic_quizzes[ group_id ] : {};\n                let quizzes_to_show = [];\n\n                if (  group_id > 0 && course_id > 0 && lesson_id > 0 ) {\n                    // Update Quiz Options based on Group, Course and Lesson\n                    quizzes_to_show = lesson_quizzes && Object.keys(lesson_quizzes).length > 0  ? Object.values(lesson_quizzes) : [];\n\t\t\t\t\t// Check if topic quizzes were omitted.\n\t\t\t\t\tlet omitted_topic_quizzes = ommitted_group_quizzes && ommitted_group_quizzes.hasOwnProperty( course_id + '-' + lesson_id ) ? ommitted_group_quizzes[ course_id + '-' + lesson_id ] : [];\n\t\t\t\t\t// Remove omitted topic quizzes from quizzes_to_show\n\t\t\t\t\tif ( omitted_topic_quizzes.length > 0 ) {\n\t\t\t\t\t\tquizzes_to_show = quizzes_to_show.filter( function( quiz ) {\n\t\t\t\t\t\t\treturn !omitted_topic_quizzes.includes( quiz );\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n                } else if ( group_id > 0 && course_id > 0 ) {\n                    // Update Quiz Options based on Group and Course\n                    quizzes_to_show = Object.values( course_quizzes ).reduce( ( accumulator, currentValue ) => {\n                        return accumulator.concat( Object.values( currentValue ) );\n                    }, [] );\n\n                } else if ( group_id > 0 ) {\n                    // Update Quiz Options based on Group\n                    quizzes_to_show = Object.values( group_quizzes ).reduce( ( accumulator, currentValue ) => {\n                        return accumulator.concat( Object.values( currentValue ) );\n                    }, [] );\n\n                }\n\n                if ( quizzes_to_show.length > 0 ) {\n                    let options_quizzes = _this.create_options( 'quiz', quizzes_to_show );\n                    _this.elements.select.quiz.element.show();\n                    _this.elements.select.quiz.element.html( options_quizzes );\n                    _this.elements.select.quiz.element.prop( 'disabled', false );\n                    jQuery('#uo-group-report-quizzes option').show();\n\n                    // Reset Quiz ID if it's in the list of quizzes to show.\n                    if ( quizzes_to_show.includes( current_quiz_id ) ) {\n                        _this.elements.select.quiz.element.val( current_quiz_id );\n                        window.ulgmGroupManagement.Essays.quizId = current_quiz_id;\n                    }\n\n                } else {\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                }\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( lesson_id, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n            });\n\n            this.elements.select.quiz.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let quiz_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.quizId = quiz_id;\n\n                // DEBUG: console.log( '--------- QUIZ ---------' );\n                // DEBUG: console.log( '-- QUIZ: Value changed' );\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( window.ulgmGroupManagement.Essays.lessonId, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.status.element.on( 'change', function(){\n                // DEBUG: console.log( '--------- STATUS ---------' );\n                // DEBUG: console.log( '-- STATUS: Value changed' );\n\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( window.ulgmGroupManagement.Essays.lessonId, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            // Trigger a change event on the groups dropdown on page load\n            this.elements.select.group.element.trigger( 'change' );\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Essays.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Essays.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getEssaysData: function (lessonId, courseId, groupId, quizId, status) {\n\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-essays-table tbody\").html(\"<div id='group-loader'>\" + groupEssays.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                quizId: quizId,\n                courseId: courseId,\n                status:status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'get_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Essays.createTable(response);\n                    window.ulgmGroupManagement.Essays.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editEssaysData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                essay_id: postId,\n                action: 'edit_essays',\n                post_type:'sfwd-essay',\n                security:groupEssays.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'edit_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n                    \n                    const modal = $(response.html);\n\n                    modal.appendTo( 'body' );\n\n                    modal.on( 'modal:open.uncanny-groups-modal', () => {\n                        // Focus on the first field\n                        const fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n                        \n                        if ( fieldField.length > 0 ) {\n                            fieldField.trigger( 'focus' );\n                        } else {\n                            $( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n                        }\n\n                        modal.off( 'modal:open.uncanny-groups-modal' );\n                    } );\n\n                    modal.modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveEssaysData: function () {\n            if (typeof tinymce !== 'undefined') {\n                for (edId in tinyMCE.editors) {\n                    if (\n                        typeof tinyMCE.editors[edId] !== 'undefined' &&\n                        typeof tinyMCE.editors[edId].save !== 'undefined' &&\n                        tinyMCE.editors[edId].save instanceof Function) {\n                        tinyMCE.editors[edId].save();\n                    }\n                }\n\n            }\n            var dataVars = $('#edit_essay_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            var gm_modal_message = $('.group-management-modal-message');\n            gm_modal_message.hide();\n            gm_modal_message.removeClass('uo-groups-message-ok');\n            gm_modal_message.removeClass('uo-groups-message-error');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    if( response.success ) {\n                       gm_modal_message.addClass('uo-groups-message-ok');\n                       window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                    } else {\n                       gm_modal_message.addClass('uo-groups-message-error');\n                    }\n                    gm_modal_message.html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsEssays: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\n\t\tif ($( '#group-report' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.reportingTemplating.constructor();\n\t\t}\n\n\t\tif ($( '#uo-quiz-report-table' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.quizReport.constructor();\n\t\t}\n\n\t\tif ($( '#uo-group-report-course' ) > 0) {\n\t\t\t$( '#uo-group-report-course' ).select2();\n\t\t}\n\n\t} );\n\n\twindow.ulgmGroupManagement.reportingTemplating = {\n\n\t\trowTemplate: '',\n\t\titemTemplate: '',\n\t\tliTemplate: '',\n\t\titems: [],\n\t\titemsEl: [],\n\t\tjpL: false,\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\t\t\tif ($( '#group-report' ).length > 0) {\n\t\t\t\t// Get Template\n\t\t\t\tthis.itemTemplate = $( 'script[data-template=\"item\"]' ).text().split( /\\$\\{(.+?)\\}/g );\n\t\t\t}\n\t\t},\n\n\t\tsetItems: function ( items ){\n\n\t\t\tvar _this = this;\n\n\t\t\t// Reset Items\n\t\t\tthis.itemsEl = [];\n\n\t\t\t// Create items from JSON\n\t\t\titems.map( function ( item ){\n\t\t\t\t_this.itemsEl.push( $( '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>' ) );\n\t\t\t\treturn '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>';\n\t\t\t} );\n\n\t\t},\n\n\t\trender: function ( props ){\n\t\t\treturn function ( tok, i ){\n\t\t\t\treturn ( i % 2 ) ? props[tok] : tok;\n\t\t\t};\n\t\t}\n\t};\n\n\twindow.ulgmGroupManagement.populateCoursesDropDown = function ( data ){\n\n\t\tvar courseDropDown = $( '#uo-group-report-course' );\n\t\tcourseDropDown.empty();\n\n\t\t$( '#course-group-id' ).val( data.group_id );\n\n\t\tif (data.group_courses.length > 1) {\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: '0',\n\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t\t/**/\n\n\t\t$.each( data.group_courses, function ( i, course ){\n\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: course.ID,\n\t\t\t\t\ttext: course.post_title\n\t\t\t\t} )\n\t\t\t);\n\n\t\t} );\n\n\t\tcourseDropDown.show().trigger( 'change' );\n\n\t};\n\n\n\twindow.ulgmGroupManagement.quizReport = {\n\n\t\tuoTable: null,\n\n\t\tuoTableHidden: null,\n\n\t\tquizId: 0,\n\n\t\tgroupId: 0,\n\n\t\tcourseId: 0,\n\n\t\tconstructor: function (){\n\t\t\tthis.$elements = {\n\t\t\t\tfilters: {\n\t\t\t\t\tgroup: document.getElementById( 'uo-group-report-group' ),\n\t\t\t\t\tcourse: document.getElementById( 'uo-group-report-courses' ),\n\t\t\t\t\tquiz: document.getElementById( 'uo-group-report-quizzes' ),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.createTable();\n\t\t\tthis.createTableHidden();\n\t\t\tthis.addEvents();\n\n\t\t\t// Trigger change on the first dropdown on load\n\t\t\tthis.$elements.filters.group.dispatchEvent( new Event( 'change' ) );\n\t\t},\n\n\t\tinitSelect2: function() {\n\t\t\ttry {\n\t\t\t\t[ this.$elements.filters.group, this.$elements.filters.course, this.$elements.filters.quiz ].forEach( ( $element ) => {\n\t\t\t\t\t$element.select2();\n\t\t\t\t} );\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\t\t},\n\n\t\tcreateTable: function ( data ){\n\n\t\t\tulgmQuizReportShortcode.table = ulgmQuizReportShortcode.table || {};\n\n\t\t\tlet columnsVisibility = jQuery( '#uo-quiz-report-table' ).data( 'table_columns' );\n\t\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\t\tvar columnsConfig = ulgmQuizReportShortcode.table.columnsConfig;\n\t\t\tvar columns = Object.entries(columnsConfig).map(([key, value], i) => {\n\t\t\t\tvar column = {\n\t\t\t\t\ttitle: value,\n\t\t\t\t\ttargets: i,\n\t\t\t\t\tdata: key,\n\t\t\t\t\tvisible: columnsVisibility.includes(key),\n\t\t\t\t\torderable: true,\n\t\t\t\t\tsearchable: true\n\t\t\t\t};\n\t\t\t\tif (key === 'quiz_modal') {\n\t\t\t\t\tcolumn = {...column, orderable: false, searchable: false, defaultContent: ''};\n\t\t\t\t}\n\t\t\t\treturn column;\n\t\t\t});\n\n\t\t\t// Check what column has to be used to sort the table\n\t\t\tlet tableOrder = [];\n\t\t\t// Find the index of the column we have to use to sort\n\t\t\tlet tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmQuizReportShortcode.table.orderBy );\n\n\t\t\t// If the column doesn't exist, then try to get the default one\n\t\t\tif ( tableOrderByIndex === -1 ) {\n\t\t\t\ttableOrderByIndex = columns.findIndex( columnData => columnData.data == 'quiz_date' );\n\t\t\t}\n\t\t\t// If the one defined by the user, or the default one exists, add it\n\t\t\tif ( tableOrderByIndex !== -1 ) {\n\t\t\t\ttableOrder = [\n\t\t\t\t\t[\n\t\t\t\t\t\ttableOrderByIndex, // The ID of the column used to sort, defaults to `quiz_date`\n\t\t\t\t\t\tulgmQuizReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n\t\t\t\t\t]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tvar tableVars = {\n\t\t\t\taLengthMenu: [\n\t\t\t\t\t[15, 30, 60, -1],\n\t\t\t\t\t[15, 30, 60, groupQuizReportSetup.localized.all]\n\t\t\t\t],\n\t\t\t\torder: tableOrder,\n\t\t\t\tiDisplayLength: 30,\n\t\t\t\tcolumns: columns,\n\t\t\t\tcolumnDefs: []\n\t\t\t};\n\n\t\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\t\tlet table = settings.oInstance.api();\n\t\t\t\tlet _this = this;\n\n\t\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${groupQuizReportSetup.localized.customizeColumns}\" data-label-disable=\"${groupQuizReportSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\t\t\t\t\t\tvar col       = settings.aoColumns[key];\n\t\t\t\t\t\tvar configKey = col.data;\n\t\t\t\t\t\tif ( ! columnsConfig.hasOwnProperty( configKey ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar title = col.sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\t\t\t\t\t\tvar col       = settings.aoColumns[key];\n\t\t\t\t\t\tvar configKey = col.data;\n\t\t\t\t\t\tif ( ! columnsConfig.hasOwnProperty( configKey ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar title = col.sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t$( colFilter_container ).insertAfter( '#uo-quiz-report-table_filter' );\n\n\n\t\t\t};\n\n\t\t\ttableVars.initComplete = initComplete;\n\t\t\ttableVars.stateSave    = true;\n\n\t\t\tif (null !== this.uoTable) {\n\n\t\t\t\tthis.uoTable.destroy();\n\n\t\t\t\ttableVars.data = data;\n\t\t\t}\n\n\t\t\ttableVars.language = groupQuizReportSetup.localized.tableLanguage;\n\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' );\n\n\t\t\tif (jQuery( '#uo-quiz-report-table' ).length > 0) {\n\t\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' ).DataTable( tableVars );\n\t\t\t}\n\n\n\t\t},\n\n\t\tcreateTableHidden: function ( data ){\n\t\t\tvar columnsConfig = ulgmQuizReportShortcode.table.columnsConfig;\n\t\t\tvar columns = Object.entries(columnsConfig).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: value,\n\t\t\t\t\tdata: key\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n\t\t\t\t\tcolumns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n                    \n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlet exportButtons = [];\n\t\t\tif ( ulgmQuizReportShortcode.table.showCSVExportButton ) {\n\t\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportCSV,\n\t\t\t\t} ) );\n\t\t\t}\n\t\t\tif ( ulgmQuizReportShortcode.table.showExcelExportButton ) {\n\t\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportExcel,\n\t\t\t\t}) );\n\t\t\t}\n\n\t\t\tvar tableVars = {\n\t\t\t\tiDisplayLength: -1,\n\t\t\t\tcolumns: columns,\n\t\t\t\tdom: 'Bfrtip',\n\t\t\t\tbuttons: exportButtons\n\t\t\t};\n\n\t\t\tif ($.fn.DataTable.isDataTable( '#uo-quiz-report-table-hidden' )) {\n\n\t\t\t\t$( '#uo-quiz-report-table-hidden' ).DataTable().destroy();\n\n\t\t\t\ttableVars.data    = data;\n\t\t\t\ttableVars.columns = Object.entries(columnsConfig).map(([key, value]) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: value,\n\t\t\t\t\t\tdata: key\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\ttableVars.language = groupQuizReportSetup.localized.tableLanguage;\n\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' );\n\n\t\t\tif (this.uoTableHidden.length > 0) {\n\t\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' ).DataTable( tableVars );\n\t\t\t}\n\n\t\t\t$( '.buttons-csv' ).show();\n\n\t\t},\n\n\t\taddColumnCourseCheckbox: function ( label, column_key, is_visible, table ){\n\n\t\t\tvar checkbox = jQuery( '<input />', {\n\t\t\t\ttype: 'checkbox',\n\t\t\t\tid: 'dt_' + column_key,\n\t\t\t\tvalue: column_key,\n\t\t\t\tchecked: is_visible\n\t\t\t} );\n\n\t\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t\t// Get the column API object\n\t\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\t\tif (index == current_check) {\n\t\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\t\treturn $label;\n\t\t},\n\n\t\taddEvents: function (){\n\t\t\t// Listen changes to the \"Group\" dropdown\n\t\t\tthis.$elements.filters.group.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Set loading animation in the course dropdown\n\t\t\t\tthis.setLoading( {\n\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\tisLoading: true\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call to get courses\n\t\t\t\t$.ajax( {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { group_id: this.$elements.filters.group.value },\n\t\t\t\t\turl: groupQuizReportSetup.root + 'quiz-report-get-courses/',\n\t\t\t\t\tbeforeSend: xhr => xhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce ),\n\t\t\t\t\tsuccess: ( response ) => {\n\t\t\t\t\t\t// Check if the call is valid\n\t\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the returned data is valid\n\t\t\t\t\t\tif ( ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set new options\n\t\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\t\tthis.$elements.filters.course,\n\t\t\t\t\t\t\tresponse.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: groupQuizReportSetup.i18n.coursePlaceholder\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Check if it has options\n\t\t\t\t\t\tif ( response.options.length === 0 ) {\n\t\t\t\t\t\t\t// Enable the dropdown\n\t\t\t\t\t\t\tthis.$elements.filters.course\n\t\t\t\t\t\t\t\t.setAttribute( 'disabled', 'disabled' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Listen changes to the \"Course\" dropdown\n\t\t\tthis.$elements.filters.course.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Check if the course ID is valid\n\t\t\t\tif ( parseInt( this.$elements.filters.course.value ) === 0 ) {\n\t\t\t\t\t// Clear the \"Quiz\" dropdown\n\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\tthis.$elements.filters.quiz,\n\t\t\t\t\t\t[]\n\t\t\t\t\t);\n\n\t\t\t\t\t// Clear data on the table\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.uoTable.clear().draw();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Set loading animation in the quiz dropdown\n\t\t\t\tthis.setLoading( {\n\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\tisLoading: true\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call to get quizzes\n\t\t\t\t$.ajax( {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { \n\t\t\t\t\t\tgroup_id: this.$elements.filters.group.value,\n\t\t\t\t\t\tcourse_id: this.$elements.filters.course.value\n\t\t\t\t\t},\n\t\t\t\t\turl: groupQuizReportSetup.root + 'quiz-report-get-quizzes/',\n\t\t\t\t\tbeforeSend: xhr => xhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce ),\n\t\t\t\t\tsuccess: ( response ) => {\n\t\t\t\t\t\t// Check if the call is valid\n\t\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the returned data is valid\n\t\t\t\t\t\tif ( ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set new options\n\t\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\t\tthis.$elements.filters.quiz,\n\t\t\t\t\t\t\tresponse.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: groupQuizReportSetup.i18n.quizPlaceholder\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Check if it has options\n\t\t\t\t\t\tif ( response.options.length === 0 ) {\n\t\t\t\t\t\t\t// Enable the dropdown\n\t\t\t\t\t\t\tthis.$elements.filters.quiz\n\t\t\t\t\t\t\t\t.setAttribute( 'disabled', 'disabled' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Listen changes to the \"Quiz\" dropdown\n\t\t\tthis.$elements.filters.quiz.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Request data\n\t\t\t\twindow.ulgmGroupManagement.quizReport.getQuizData(\n\t\t\t\t\t// Quiz ID\n\t\t\t\t\tthis.$elements.filters.quiz.value,\n\t\t\t\t\t// Group ID\n\t\t\t\t\tthis.$elements.filters.group.value,\n\t\t\t\t\t// Score type\n\t\t\t\t\tgroupQuizReportSetupScoreType\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\n\t\tsetOptions: ( $dropdown, options = [], dropdownSettings = {} ) => {\n\t\t\t// Empty the dropdown\n\t\t\t$dropdown.innerHTML = '';\n\n\t\t\t// Check if it doesn't have any options\n\t\t\tif ( options.length === 0 ) {\n\t\t\t\t$dropdown.innerHTML = `\n\t\t\t\t\t<option>${ groupQuizReportSetup.i18n.noResults }</option>\n\t\t\t\t`;\n\n\t\t\t\t$dropdown.classList.add( 'uo-groups-select-filter-select--empty' );\n\t\t\t} else {\n\t\t\t\t// Check if there is more than one option and if we should add a placeholder\n\t\t\t\tif ( options.length > 1 && typeof dropdownSettings.placeholder !== 'undefined' && dropdownSettings.placeholder !== '' ) {\n\t\t\t\t\t$dropdown.insertAdjacentHTML( 'beforeEnd', `<option value=\"0\">${ dropdownSettings.placeholder }</option>` );\n\t\t\t\t}\n\n\t\t\t\t// Add options\n\t\t\t\toptions.forEach( option => $dropdown.insertAdjacentHTML( 'beforeEnd', `<option value=\"${ option.value }\">${ option.text }</option>` ) );\n\n\t\t\t\t$dropdown.classList.remove( 'uo-groups-select-filter-select--empty' );\n\t\t\t}\n\n\t\t\t// Trigger change event, there are new options\n\t\t\t$dropdown.dispatchEvent( new Event( 'change' ) );\n\t\t},\n\n\t\tsetLoading: function( { isLoading, $dropdown } ) {\n\t\t\t// Get wrapper\n\t\t\tconst $wrapper = $dropdown.closest( '.uo-groups-select-filter' );\n\n\t\t\tif ( ! $wrapper ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isLoading ) {\n\t\t\t\t// Add loading class\n\t\t\t\t$wrapper.classList.add( 'uo-groups-select-filter--loading' );\n\n\t\t\t\t// Disable the dropdown\n\t\t\t\t$dropdown.setAttribute( 'disabled', 'disabled' );\n\t\t\t} else {\n\t\t\t\t// Add the loading class\n\t\t\t\t$wrapper.classList.remove( 'uo-groups-select-filter--loading' );\n\n\t\t\t\t// Enable the dropdown\n\t\t\t\t$dropdown.removeAttribute( 'disabled' );\n\t\t\t}\n\t\t},\n\n\t\tformat: function ( d ){\n\n\t\t\tvar rows = '';\n\t\t\t$.each( d.answer, function ( key, value ){\n\t\t\t\trows +=\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t'<td>' + d.question[key] + '</td>' +\n\t\t\t\t\t'<td>' + value + '</td>' +\n\t\t\t\t\t'</tr>';\n\t\t\t} );\n\t\t\t// `d` is the original data object for the row\n\t\t\treturn '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n\t\t},\n\n\t\tgetQuizData: function ( quizId, groupId, scoreType ){\n\t\t\t// Clear data on the table\n\t\t\ttry {\n\t\t\t\tthis.uoTable.clear().draw();\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( quizId )) {\n\t\t\t\t$( '#uo-group-report-course' ).addClass( 'missing' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( String( groupId ) )) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).removeClass( 'missing' );\n\n\t\t\tvar i = 0;\n\n\t\t\tvar loading = setInterval( function (){\n\t\t\t\ti = ++i % 4;\n\t\t\t\t$( \"#uo-quiz-report-table tbody\" ).html( \"<div id='group-loader'>\" + groupQuizReportSetup.localized.loadingRecords + new Array( i + 1 ).join( \".\" ) + \"</div>\" );\n\t\t\t}, 500 );\n\n\n\t\t\tvar dataVars = {\n\t\t\t\tgroupId: groupId,\n\t\t\t\tquizId: quizId,\n\t\t\t\tscoreType: scoreType\n\t\t\t};\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_quiz_data/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\tclearInterval( loading );\n\t\t\t\t\t$( '#group-loader' ).remove();\n\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( response );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( response );\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t};\n\n\twindow.ulgmGroupManagement.reporting = {\n\n\t\tgroupLeaderId: 0,\n\n\t\tgroupId: 0,\n\n\t\tgetGroupCourses: function ( groupId ){\n\n\t\t\tvar dataVars = {groupId: groupId};\n\n\t\t\tif (this.getQueryVariable( 'user_id' )) {\n\t\t\t\twindow.ulgmGroupManagement.reporting.groupLeaderId = this.getQueryVariable( 'user_id' );\n\t\t\t\tdataVars.userId                                    = window.ulgmGroupManagement.reporting.groupLeaderId;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).hide();\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_group_courses/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\twindow.ulgmGroupManagement.reporting.createCourseDropDown( response.courses );\n\n\t\t\t\t\tif ($( '#uo-quiz-report-table' ).length) {\n\t\t\t\t\t\twindow.ulgmGroupManagement.reporting.createUserDropDown( response.users );\n\t\t\t\t\t}\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\tcreateCourseDropDown: function ( posts ){\n\t\t\tvar dropDown = $( '#uo-group-report-course' ),\n\t\t\t\toptions  = '<option value=\"0\">' + ulgmRestApiSetup.localized.selectCourse + '</option>';\n\n\t\t\tif (0 === posts.post_count) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + ulgmRestApiSetup.localized.noCourse + '</option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( posts.posts, function ( key, post ){\n\t\t\t\toptions += '<option value=\"' + post.ID + '\">' + post.post_title + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tcreateUserDropDown: function ( users ){\n\n\t\t\tvar dropDown = $( '#uo-group-report-user' ),\n\t\t\t\toptions  = '<option value=\"0\">' + groupQuizReportSetup.localized.selectUser + '</option>';\n\n\t\t\tif (0 === users.length) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + groupQuizReportSetup.localized.noUsers + '/option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( users, function ( key, user ){\n\t\t\t\toptions += '<option value=\"' + user.ID + '\">' + user.data.display_name + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tisNormalInteger: function ( str ){\n\t\t\tvar n = Math.trunc( str );\n\t\t\tn = isNaN( n ) ? 0 : n;\n\n\t\t\treturn String( n ) == str && n > 0;\n\t\t},\n\n\t\tgetQueryVariable: function ( variable ){\n\t\t\tvar query = window.location.search.substring( 1 );\n\t\t\tvar vars  = query.split( \"&\" );\n\t\t\tfor (var i = 0; i < vars.length; i++) {\n\t\t\t\tvar pair = vars[i].split( \"=\" );\n\t\t\t\tif (pair[0] == variable) {\n\t\t\t\t\treturn pair[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ( false );\n\t\t}\n\n\t}\n\n\n} )( jQuery );\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\t\twindow.ulgmGroupManagement.restForms.constructor();\n\n\t\tvar file_frame;\n\n\t\tvar uploadedUsers;\n\n\t\tjQuery( '#ulgm_group_upload_image_button' ).on( 'click', function ( event ){\n\t\t\tevent.preventDefault();\n\n\t\t\tif (file_frame) {\n\n\t\t\t\tfile_frame.open();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Create the media frame.\n\t\t\tfile_frame = wp.media.frames.file_frame = wp.media( {\n\t\t\t\ttitle: 'Select a image to upload',\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: 'Use this image',\n\t\t\t\t},\n\t\t\t\tmultiple: false\n\t\t\t} );\n\t\t\t// When an image is selected, run a callback.\n\t\t\tfile_frame.on( 'select', function (){\n\t\t\t\tattachment = file_frame.state().get( 'selection' ).first().toJSON();\n\t\t\t\t$( '#ulgm_group_image_preview' ).attr( 'src', attachment.url ).css( 'width', 'auto' ).show();\n\t\t\t\t$( '#ulgm_group_image_attachment_id' ).val( attachment.id );\n\t\t\t} );\n\n\t\t\tfile_frame.open();\n\t\t} );\n\n\t\tjQuery( '#ulgm_group_edit_upload_image_button' ).on( 'click', function ( event ){\n\t\t\tevent.preventDefault();\n\n\t\t\tif (file_frame) {\n\n\t\t\t\tfile_frame.open();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Create the media frame.\n\t\t\tfile_frame = wp.media.frames.file_frame = wp.media( {\n\t\t\t\ttitle: 'Select a image to upload',\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: 'Use this image',\n\t\t\t\t},\n\t\t\t\tmultiple: false\n\t\t\t} );\n\t\t\t// When an image is selected, run a callback.\n\t\t\tfile_frame.on( 'select', function (){\n\t\t\t\t$( '#ulgm_group_edit_image' ).hide();\n\t\t\t\tattachment = file_frame.state().get( 'selection' ).first().toJSON();\n\t\t\t\t$( '#ulgm_group_edit_image_preview' ).attr( 'src', attachment.url ).css( 'width', 'auto' ).show();\n\t\t\t\t$( '#ulgm_group_edit_image_attachment_id' ).val( attachment.id );\n\t\t\t} );\n\n\t\t\tfile_frame.open();\n\t\t} );\n\n\t} );\n\n\twindow.ulgmGroupManagement.restForms = {\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\n\t\t\tif (typeof window.ulgmRestApiSetup !== 'undefined') {\n\t\t\t\t// Add events for the group management page\n\t\t\t\tthis.addFormSubmitEvents();\n\n\t\t\t\ttry {\n\t\t\t\t\t$( '#ulgm_font_color' ).wpColorPicker();\n\t\t\t\t\t$( '#ulgm_main_color' ).wpColorPicker();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Handle error(s) here\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tmakeAjaxCall: function ( endPoint, restData, associatedForm ){\n\n\t\t\tvar $title_container = associatedForm.find( '#group-management-title' );\n\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers++;\n\t\t\t\trestData.uploaded_users = uploadedUsers;\n\t\t\t}\n\n\n\t\t\tvar _this = this;\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endPoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( response ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\n\t\t\t\t\t\t$( '#uo-group-report-course' ).show();\n\t\t\t\t\t\t$error_container.hide();\n\n\t\t\t\t\t\tvar url = window.location.href;\n\n\t\t\t\t\t\t//append rest message to url\n\t\t\t\t\t\tif (url.indexOf( '?' ) > -1) {\n\t\t\t\t\t\t\turl += '&message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl += '?message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof response.data.reload === 'undefined') {\n\n\t\t\t\t\t\t\tvar name  = 'message';\n\t\t\t\t\t\t\tvar value = response.data.message;\n\n\t\t\t\t\t\t\tvar str = location.search;\n\t\t\t\t\t\t\tif (new RegExp( \"[&?]\" + name + \"([=&].+)?$\" ).test( str )) {\n\t\t\t\t\t\t\t\tstr = str.replace( new RegExp( \"(?:[&?])\" + name + \"[^&]*\", \"g\" ), \"\" )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr += \"&\";\n\t\t\t\t\t\t\tstr += name + \"=\" + value;\n\t\t\t\t\t\t\tstr = \"?\" + str.slice( 1 );\n\n\t\t\t\t\t\t\t// there is an official order for the query and the hash if you didn't know.\n\t\t\t\t\t\t\tlocation.assign( location.origin + location.pathname + str + location.hash );\n\n\t\t\t\t\t\t} else if (typeof response.data.call_function !== 'undefined') {\n\n\t\t\t\t\t\t\tif (typeof response.data.function_vars !== 'undefined') {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]( response.data.function_vars );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\ttypeof response.data.reload !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof response.data.endpoint !== 'undefined' &&\n\t\t\t\t\t\t\tresponse.data.reload === false &&\n\t\t\t\t\t\t\t( response.data.endpoint === 'upload_users' || response.data.endpoint === 'send-enrollment' )\n\t\t\t\t\t\t) {\n\n\t\t\t\t\t\t\tif( 1 === response.data.uploaded_users ){\n\t\t\t\t\t\t\t\t// first time the upload ran\n\t\t\t\t\t\t\t\t$([document.documentElement, document.body]).animate({\n\t\t\t\t\t\t\t\t\tscrollTop: $(\"#group-management-users\").offset().top\n\t\t\t\t\t\t\t\t}, 2000);\n\n\t\t\t\t\t\t\t\t// Hide modal\n\t\t\t\t\t\t\t\t$( \"#group-management-upload-users .uo-close-modal\" ).click();\n\t\t\t\t\t\t\t\t// Show CSV log\n\t\t\t\t\t\t\t\t$( '#uo-groups-upload-summary' ).show();\n\t\t\t\t\t\t\t\t// Hide Users table to force page reload\n\t\t\t\t\t\t\t\t$( '.uo-groups-group-courses' ).hide();\n\t\t\t\t\t\t\t\t$( '.uo-groups-enrolled-users' ).hide();\n\t\t\t\t\t\t\t\t$( '#group-management-leaders' ).hide();\n\t\t\t\t\t\t\t}\n\n\n\n\n\t\t\t\t\t\t\t// Set summary info in heading\n\t\t\t\t\t\t\t$( '#uo-groups-upload-summary .uo-header-subtitle' ).text( response.data.message );\n\t\t\t\t\t\t\t$( '#csv-result-total' ).text( response.data.total_rows );\n\n\t\t\t\t\t\t\tconsole.log( 'this is the upload' );\n\t\t\t\t\t\t\tconsole.log( response );\n\n\t\t\t\t\t\t\tlet results = response.data.results;\n\t\t\t\t\t\t\tresults.forEach( function ( entry ){\n\n\t\t\t\t\t\t\t\tlet row = document.createElement( 'div' );\n\t\t\t\t\t\t\t\trow.setAttribute( \"class\", \"uo-row uo-table-content uo-tbl-item body-row\" );\n\n\t\t\t\t\t\t\t\tlet emailCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\temailCol.setAttribute( \"class\", \"content-leaders-email uo-table-cell uo-table-cell-3\" );\n\n\t\t\t\t\t\t\t\tlet statusCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\tstatusCol.setAttribute( \"class\", \"content-leaders-statu uo-table-cell uo-table-cell-7\" );\n\n\t\t\t\t\t\t\t\temailCol.innerText  = entry.email;\n\t\t\t\t\t\t\t\tstatusCol.innerText = ( 'use_error_code' === entry.status.reason ) ? entry.message : entry.status.reason;\n\n\t\t\t\t\t\t\t\trow.appendChild( emailCol );\n\n\t\t\t\t\t\t\t\trow.appendChild( statusCol );\n\n\t\t\t\t\t\t\t\tlet resultsDiv = document.getElementById( 'uo-groups-upload-result-rows' );\n\n\t\t\t\t\t\t\t\tif (null !== resultsDiv) {\n\t\t\t\t\t\t\t\t\tresultsDiv.appendChild( row );\n\n\t\t\t\t\t\t\t\t\t// new_created_added_to_group, new_failed, existing_added_to_group, existing_already_member, existing_failed\n\n\t\t\t\t\t\t\t\t\tif ('new_created_added_to_group' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_added_to_group' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-added' ).text( parseInt( $( '#csv-result-added' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('existing_already_member' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-member' ).text( parseInt( $( '#csv-result-member' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('new_failed' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_failed' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-unprocessed' ).text( parseInt( $( '#csv-result-unprocessed' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif (false === response.data.completed) {\n\t\t\t\t\t\t\t\tspinner.show();\n\t\t\t\t\t\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\tif (ulgmRestApiSetup.hasOwnProperty( 'localized' )) {\n\t\t\t\t\t\t\tif ('invalid-course-id' !== response.data.error) {\n\t\t\t\t\t\t\t\t$( '#uo-group-report-course' ).empty().append(\n\t\t\t\t\t\t\t\t\t$( '<option>', {\n\t\t\t\t\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t}\n\n\t\t\t} );\n\t\t},\n\n\t\taddFormSubmitEvents: function (){\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.submit-group-management-form' ).on( 'click', this.sendRestCall );\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.change-group-management-form' ).on( 'change', this.sendRestCall );\n\n\t\t\t// Add rest call to all inputs of modal if enter is pressed\n\t\t\t$( '.group-management-modal input' ).on( 'keypress', this.sendRestCall );\n\n\t\t\t$( 'input[type=radio][name=action]' ).on( 'change', function (){\n\t\t\t\tvar selected_value = this.value;\n\t\t\t\tif (selected_value === 'add-invite') {\n\t\t\t\t\t$( '#uo-import-user-note' ).show();\n\t\t\t\t} else if (selected_value === 'send-enrollment') {\n\t\t\t\t\t$( '#uo-import-user-note' ).hide();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\tsendRestCall: function ( e ){\n\n\t\t\tvar _currentTarget = e.currentTarget;\n\n\t\t\t// if the current target is a input then we assume the user pressed enter\n\t\t\tif ($( _currentTarget ).is( 'input' )) {\n\t\t\t\tif (e.key !== \"Enter\") {\n\t\t\t\t\t// Do more work\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// switch current target to the forms submit button to extract needed data\n\t\t\t\tlet _associatedForm = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\t\t// Enter is only pressed inside th modal window\n\t\t\t\t_currentTarget      = _associatedForm.find( '.submit-group-management-form' );\n\t\t\t}\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\t// The form or container of the input data\n\t\t\tvar associatedForm   = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\t\t\t$error_container.hide();\n\t\t\t$( '#uo-group-progress-report' ).hide();\n\n\t\t\t// Get the end point for the rest call from the clicked element\n\t\t\tvar endPoint = $( _currentTarget ).data( 'end-point' );\n\n\t\t\tif (typeof endPoint === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (endPoint == 'add_user') {\n\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-add-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (endPoint == 'edit_user') {\n\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-edit-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"group-id\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"uo-group-report-course\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Sometimes wp editor doesn't update the textarea input rigth way.\n\t\t\t// Let's save iFrame editors to textarea so we can serialize\n\t\t\tif (typeof tinymce !== 'undefined') {\n\t\t\t\tfor (edId in tinyMCE.editors) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId] !== 'undefined' &&\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId].save !== 'undefined' &&\n\t\t\t\t\t\ttinyMCE.editors[edId].save instanceof Function) {\n\t\t\t\t\t\ttinyMCE.editors[edId].save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Create object that will save the data that's\n\t\t\t// going to be send to the AJAX call\n\t\t\tvar restData = {};\n\n\t\t\t// Get the fields\n\t\t\tvar fields = associatedForm.find( ':input' );\n\n\t\t\t// Get an array of objects with the name and value of the fields,\n\t\t\t// iterate each element, and add it to the restData object,\n\t\t\t// using the field name as the key, and field value as the value\n\t\t\t$.each( fields.serializeArray(), function ( index, field ){\n\t\t\t\trestData[field.name] = field.value;\n\t\t\t} );\n\n\t\t\tif (endPoint == 'email_users') {\n\t\t\t\trestData = fields.serializeArray();\n\t\t\t}\n\n\t\t\tspinner.show();\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers = 0;\n\t\t\t}\n\n\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\n\t\t}\n\t};\n\n\t/**\n\t * Extend serialize array to create a serialized object. This is the format that the rest call expects\n\t *\n\t * @returns object Returns key value pairs where the key is the input name and the value is the input value\n\t */\n\t// Extend serialize array to create an serialized object\n\t$.fn.serializeObject = function (){\n\t\tvar o = {};\n\t\tvar a = this.serializeArray();\n\t\t$.each( a, function (){\n\t\t\tif (o[this.name] !== undefined) {\n\t\t\t\tif (!o[this.name].push) {\n\t\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t\t}\n\t\t\t\to[this.name].push( this.value || '' );\n\t\t\t} else {\n\t\t\t\to[this.name] = this.value || '';\n\t\t\t}\n\t\t} );\n\t\treturn o;\n\t};\n\n\n} )( jQuery );\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['./ResizeSensor.js'], factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require('./ResizeSensor.js'));\n    } else {\n        root.ElementQueries = factory(root.ResizeSensor);\n        root.ElementQueries.listen();\n    }\n}(typeof window !== 'undefined' ? window : this, function (ResizeSensor) {\n\n    /**\n     *\n     * @type {Function}\n     * @constructor\n     */\n    var ElementQueries = function () {\n        //<style> element with our dynamically created styles\n        var cssStyleElement;\n\n        //all rules found for element queries\n        var allQueries = {};\n\n        //association map to identify which selector belongs to a element from the animationstart event.\n        var idToSelectorMapping = [];\n\n        /**\n         *\n         * @param element\n         * @returns {Number}\n         */\n        function getEmSize(element) {\n            if (!element) {\n                element = document.documentElement;\n            }\n            var fontSize = window.getComputedStyle(element, null).fontSize;\n            return parseFloat(fontSize) || 16;\n        }\n\n        /**\n         * Get element size\n         * @param {HTMLElement} element\n         * @returns {Object} {width, height}\n         */\n        function getElementSize(element) {\n            if (!element.getBoundingClientRect) {\n                return {\n                    width: element.offsetWidth,\n                    height: element.offsetHeight\n                }\n            }\n\n            var rect = element.getBoundingClientRect();\n            return {\n                width: Math.round(rect.width),\n                height: Math.round(rect.height)\n            }\n        }\n\n        /**\n         *\n         * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\n         *\n         * @param {HTMLElement} element\n         * @param {*} value\n         * @returns {*}\n         */\n        function convertToPx(element, value) {\n            var numbers = value.split(/\\d/);\n            var units = numbers[numbers.length - 1];\n            value = parseFloat(value);\n            switch (units) {\n                case \"px\":\n                    return value;\n                case \"em\":\n                    return value * getEmSize(element);\n                case \"rem\":\n                    return value * getEmSize();\n                // Viewport units!\n                // According to http://quirksmode.org/mobile/tableViewport.html\n                // documentElement.clientWidth/Height gets us the most reliable info\n                case \"vw\":\n                    return value * document.documentElement.clientWidth / 100;\n                case \"vh\":\n                    return value * document.documentElement.clientHeight / 100;\n                case \"vmin\":\n                case \"vmax\":\n                    var vw = document.documentElement.clientWidth / 100;\n                    var vh = document.documentElement.clientHeight / 100;\n                    var chooser = Math[units === \"vmin\" ? \"min\" : \"max\"];\n                    return value * chooser(vw, vh);\n                default:\n                    return value;\n                // for now, not supporting physical units (since they are just a set number of px)\n                // or ex/ch (getting accurate measurements is hard)\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {String} id\n         * @constructor\n         */\n        function SetupInformation(element, id) {\n            this.element = element;\n            var key, option, elementSize, value, actualValue, attrValues, attrValue, attrName;\n\n            var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\n\n            /**\n             * Extracts the computed width/height and sets to min/max- attribute.\n             */\n            this.call = function () {\n                // extract current dimensions\n                elementSize = getElementSize(this.element);\n\n                attrValues = {};\n\n                for (key in allQueries[id]) {\n                    if (!allQueries[id].hasOwnProperty(key)) {\n                        continue;\n                    }\n                    option = allQueries[id][key];\n\n                    value = convertToPx(this.element, option.value);\n\n                    actualValue = option.property === 'width' ? elementSize.width : elementSize.height;\n                    attrName = option.mode + '-' + option.property;\n                    attrValue = '';\n\n                    if (option.mode === 'min' && actualValue >= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (option.mode === 'max' && actualValue <= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (!attrValues[attrName]) attrValues[attrName] = '';\n                    if (attrValue && -1 === (' ' + attrValues[attrName] + ' ').indexOf(' ' + attrValue + ' ')) {\n                        attrValues[attrName] += ' ' + attrValue;\n                    }\n                }\n\n                for (var k in attributes) {\n                    if (!attributes.hasOwnProperty(k)) continue;\n\n                    if (attrValues[attributes[k]]) {\n                        this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\n                    } else {\n                        this.element.removeAttribute(attributes[k]);\n                    }\n                }\n            };\n        }\n\n        /**\n         * @param {HTMLElement} element\n         * @param {Object}      id\n         */\n        function setupElement(element, id) {\n            if (!element.elementQueriesSetupInformation) {\n                element.elementQueriesSetupInformation = new SetupInformation(element, id);\n            }\n\n            if (!element.elementQueriesSensor) {\n                element.elementQueriesSensor = new ResizeSensor(element, function () {\n                    element.elementQueriesSetupInformation.call();\n                });\n            }\n        }\n\n        /**\n         * Stores rules to the selector that should be applied once resized.\n         *\n         * @param {String} selector\n         * @param {String} mode min|max\n         * @param {String} property width|height\n         * @param {String} value\n         */\n        function queueQuery(selector, mode, property, value) {\n            if (typeof(allQueries[selector]) === 'undefined') {\n                allQueries[selector] = [];\n                // add animation to trigger animationstart event, so we know exactly when a element appears in the DOM\n\n                var id = idToSelectorMapping.length;\n                cssStyleElement.innerHTML += '\\n' + selector + ' {animation: 0.1s element-queries;}';\n                cssStyleElement.innerHTML += '\\n' + selector + ' > .resize-sensor {min-width: '+id+'px;}';\n                idToSelectorMapping.push(selector);\n            }\n\n            allQueries[selector].push({\n                mode: mode,\n                property: property,\n                value: value\n            });\n        }\n\n        function getQuery(container) {\n            var query;\n            if (document.querySelectorAll) query = (container) ? container.querySelectorAll.bind(container) : document.querySelectorAll.bind(document);\n            if (!query && 'undefined' !== typeof $$) query = $$;\n            if (!query && 'undefined' !== typeof jQuery) query = jQuery;\n\n            if (!query) {\n                throw 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\n            }\n\n            return query;\n        }\n\n        /**\n         * If animationStart didn't catch a new element in the DOM, we can manually search for it\n         */\n        function findElementQueriesElements(container) {\n            var query = getQuery(container);\n\n            for (var selector in allQueries) if (allQueries.hasOwnProperty(selector)) {\n                // find all elements based on the extract query selector from the element query rule\n                var elements = query(selector, container);\n\n                for (var i = 0, j = elements.length; i < j; i++) {\n                    setupElement(elements[i], selector);\n                }\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         */\n        function attachResponsiveImage(element) {\n            var children = [];\n            var rules = [];\n            var sources = [];\n            var defaultImageId = 0;\n            var lastActiveImage = -1;\n            var loadedImages = [];\n\n            for (var i in element.children) {\n                if (!element.children.hasOwnProperty(i)) continue;\n\n                if (element.children[i].tagName && element.children[i].tagName.toLowerCase() === 'img') {\n                    children.push(element.children[i]);\n\n                    var minWidth = element.children[i].getAttribute('min-width') || element.children[i].getAttribute('data-min-width');\n                    //var minHeight = element.children[i].getAttribute('min-height') || element.children[i].getAttribute('data-min-height');\n                    var src = element.children[i].getAttribute('data-src') || element.children[i].getAttribute('url');\n\n                    sources.push(src);\n\n                    var rule = {\n                        minWidth: minWidth\n                    };\n\n                    rules.push(rule);\n\n                    if (!minWidth) {\n                        defaultImageId = children.length - 1;\n                        element.children[i].style.display = 'block';\n                    } else {\n                        element.children[i].style.display = 'none';\n                    }\n                }\n            }\n\n            lastActiveImage = defaultImageId;\n\n            function check() {\n                var imageToDisplay = false, i;\n\n                for (i in children) {\n                    if (!children.hasOwnProperty(i)) continue;\n\n                    if (rules[i].minWidth) {\n                        if (element.offsetWidth > rules[i].minWidth) {\n                            imageToDisplay = i;\n                        }\n                    }\n                }\n\n                if (!imageToDisplay) {\n                    //no rule matched, show default\n                    imageToDisplay = defaultImageId;\n                }\n\n                if (lastActiveImage !== imageToDisplay) {\n                    //image change\n\n                    if (!loadedImages[imageToDisplay]) {\n                        //image has not been loaded yet, we need to load the image first in memory to prevent flash of\n                        //no content\n\n                        var image = new Image();\n                        image.onload = function () {\n                            children[imageToDisplay].src = sources[imageToDisplay];\n\n                            children[lastActiveImage].style.display = 'none';\n                            children[imageToDisplay].style.display = 'block';\n\n                            loadedImages[imageToDisplay] = true;\n\n                            lastActiveImage = imageToDisplay;\n                        };\n\n                        image.src = sources[imageToDisplay];\n                    } else {\n                        children[lastActiveImage].style.display = 'none';\n                        children[imageToDisplay].style.display = 'block';\n                        lastActiveImage = imageToDisplay;\n                    }\n                } else {\n                    //make sure for initial check call the .src is set correctly\n                    children[imageToDisplay].src = sources[imageToDisplay];\n                }\n            }\n\n            element.resizeSensorInstance = new ResizeSensor(element, check);\n            check();\n        }\n\n        function findResponsiveImages() {\n            var query = getQuery();\n\n            var elements = query('[data-responsive-image],[responsive-image]');\n            for (var i = 0, j = elements.length; i < j; i++) {\n                attachResponsiveImage(elements[i]);\n            }\n        }\n\n        var regex = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:min|max)-(?:width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/mgi;\n        var attrRegex = /\\[[\\s\\t]*?(min|max)-(width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/mgi;\n\n        /**\n         * @param {String} css\n         */\n        function extractQuery(css) {\n            var match, smatch, attrs, attrMatch;\n\n            css = css.replace(/'/g, '\"');\n            while (null !== (match = regex.exec(css))) {\n                smatch = match[1] + match[3];\n                attrs = match[2];\n\n                while (null !== (attrMatch = attrRegex.exec(attrs))) {\n                    queueQuery(smatch, attrMatch[1], attrMatch[2], attrMatch[3]);\n                }\n            }\n        }\n\n        /**\n         * @param {CssRule[]|String} rules\n         */\n        function readRules(rules) {\n            var selector = '';\n\n            if (!rules) {\n                return;\n            }\n\n            if ('string' === typeof rules) {\n                rules = rules.toLowerCase();\n                if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\n                    extractQuery(rules);\n                }\n            } else {\n                for (var i = 0, j = rules.length; i < j; i++) {\n                    if (1 === rules[i].type) {\n                        selector = rules[i].selectorText || rules[i].cssText;\n                        if (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) {\n                            extractQuery(selector);\n                        } else if (-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) {\n                            extractQuery(selector);\n                        }\n                    } else if (4 === rules[i].type) {\n                        readRules(rules[i].cssRules || rules[i].rules);\n                    } else if (3 === rules[i].type) {\n                        if(rules[i].styleSheet.hasOwnProperty(\"cssRules\")) {\n                            readRules(rules[i].styleSheet.cssRules);\n                        }\n                    }\n                }\n            }\n        }\n\n        var defaultCssInjected = false;\n\n        /**\n         * Searches all css rules and setups the event listener to all elements with element query rules..\n         */\n        this.init = function () {\n            var animationStart = 'animationstart';\n            if (typeof document.documentElement.style['webkitAnimationName'] !== 'undefined') {\n                animationStart = 'webkitAnimationStart';\n            } else if (typeof document.documentElement.style['MozAnimationName'] !== 'undefined') {\n                animationStart = 'mozanimationstart';\n            } else if (typeof document.documentElement.style['OAnimationName'] !== 'undefined') {\n                animationStart = 'oanimationstart';\n            }\n\n            document.body.addEventListener(animationStart, function (e) {\n                var element = e.target;\n                var styles = element && window.getComputedStyle(element, null);\n                var animationName = styles && styles.getPropertyValue('animation-name');\n                var requiresSetup = animationName && (-1 !== animationName.indexOf('element-queries'));\n\n                if (requiresSetup) {\n                    element.elementQueriesSensor = new ResizeSensor(element, function () {\n                        if (element.elementQueriesSetupInformation) {\n                            element.elementQueriesSetupInformation.call();\n                        }\n                    });\n\n                    var sensorStyles = window.getComputedStyle(element.resizeSensor, null);\n                    var id = sensorStyles.getPropertyValue('min-width');\n                    id = parseInt(id.replace('px', ''));\n                    setupElement(e.target, idToSelectorMapping[id]);\n                }\n            });\n\n            if (!defaultCssInjected) {\n                cssStyleElement = document.createElement('style');\n                cssStyleElement.type = 'text/css';\n                cssStyleElement.innerHTML = '[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}';\n\n                //safari wants at least one rule in keyframes to start working\n                cssStyleElement.innerHTML += '\\n@keyframes element-queries { 0% { visibility: inherit; } }';\n                document.getElementsByTagName('head')[0].appendChild(cssStyleElement);\n                defaultCssInjected = true;\n            }\n\n            for (var i = 0, j = document.styleSheets.length; i < j; i++) {\n                try {\n                    if (document.styleSheets[i].href && 0 === document.styleSheets[i].href.indexOf('file://')) {\n                        console.warn(\"CssElementQueries: unable to parse local css files, \" + document.styleSheets[i].href);\n                    }\n\n                    readRules(document.styleSheets[i].cssRules || document.styleSheets[i].rules || document.styleSheets[i].cssText);\n                } catch (e) {\n                }\n            }\n\n            findResponsiveImages();\n        };\n\n        /**\n         * Go through all collected rules (readRules()) and attach the resize-listener.\n         * Not necessary to call it manually, since we detect automatically when new elements\n         * are available in the DOM. However, sometimes handy for dirty DOM modifications.\n         *\n         * @param {HTMLElement} container only elements of the container are considered (document.body if not set)\n         */\n        this.findElementQueriesElements = function (container) {\n            findElementQueriesElements(container);\n        };\n\n        this.update = function () {\n            this.init();\n        };\n    };\n\n    ElementQueries.update = function () {\n        ElementQueries.instance.update();\n    };\n\n    /**\n     * Removes all sensor and elementquery information from the element.\n     *\n     * @param {HTMLElement} element\n     */\n    ElementQueries.detach = function (element) {\n        if (element.elementQueriesSetupInformation) {\n            //element queries\n            element.elementQueriesSensor.detach();\n            delete element.elementQueriesSetupInformation;\n            delete element.elementQueriesSensor;\n\n        } else if (element.resizeSensorInstance) {\n            //responsive image\n\n            element.resizeSensorInstance.detach();\n            delete element.resizeSensorInstance;\n        }\n    };\n\n    ElementQueries.init = function () {\n        if (!ElementQueries.instance) {\n            ElementQueries.instance = new ElementQueries();\n        }\n\n        ElementQueries.instance.init();\n    };\n\n    var domLoaded = function (callback) {\n        /* Mozilla, Chrome, Opera */\n        if (document.addEventListener) {\n            document.addEventListener('DOMContentLoaded', callback, false);\n        }\n        /* Safari, iCab, Konqueror */\n        else if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n            var DOMLoadTimer = setInterval(function () {\n                if (/loaded|complete/i.test(document.readyState)) {\n                    callback();\n                    clearInterval(DOMLoadTimer);\n                }\n            }, 10);\n        }\n        /* Other web browsers */\n        else window.onload = callback;\n    };\n\n    ElementQueries.findElementQueriesElements = function (container) {\n        ElementQueries.instance.findElementQueriesElements(container);\n    };\n\n    ElementQueries.listen = function () {\n        domLoaded(ElementQueries.init);\n    };\n\n    return ElementQueries;\n\n}));\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        root.ResizeSensor = factory();\n    }\n}(typeof window !== 'undefined' ? window : this, function () {\n\n    // Make sure it does not throw in a SSR (Server Side Rendering) situation\n    if (typeof window === \"undefined\") {\n        return null;\n    }\n    // https://github.com/Semantic-Org/Semantic-UI/issues/3855\n    // https://github.com/marcj/css-element-queries/issues/257\n    var globalWindow = typeof window != 'undefined' && window.Math == Math\n        ? window\n        : typeof self != 'undefined' && self.Math == Math\n            ? self\n            : Function('return this')();\n    // Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n    // In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n    // would generate too many unnecessary events.\n    var requestAnimationFrame = globalWindow.requestAnimationFrame ||\n        globalWindow.mozRequestAnimationFrame ||\n        globalWindow.webkitRequestAnimationFrame ||\n        function (fn) {\n            return globalWindow.setTimeout(fn, 20);\n        };\n\n    var cancelAnimationFrame = globalWindow.cancelAnimationFrame ||\n        globalWindow.mozCancelAnimationFrame ||\n        globalWindow.webkitCancelAnimationFrame ||\n        function (timer) {\n            globalWindow.clearTimeout(timer);\n        };\n\n    /**\n     * Iterate over each of the provided element(s).\n     *\n     * @param {HTMLElement|HTMLElement[]} elements\n     * @param {Function}                  callback\n     */\n    function forEachElement(elements, callback){\n        var elementsType = Object.prototype.toString.call(elements);\n        var isCollectionTyped = ('[object Array]' === elementsType\n            || ('[object NodeList]' === elementsType)\n            || ('[object HTMLCollection]' === elementsType)\n            || ('[object Object]' === elementsType)\n            || ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n            || ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n        );\n        var i = 0, j = elements.length;\n        if (isCollectionTyped) {\n            for (; i < j; i++) {\n                callback(elements[i]);\n            }\n        } else {\n            callback(elements);\n        }\n    }\n\n    /**\n    * Get element size\n    * @param {HTMLElement} element\n    * @returns {Object} {width, height}\n    */\n    function getElementSize(element) {\n        if (!element.getBoundingClientRect) {\n            return {\n                width: element.offsetWidth,\n                height: element.offsetHeight\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n        return {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height)\n        }\n    }\n\n    /**\n     * Apply CSS styles to element.\n     *\n     * @param {HTMLElement} element\n     * @param {Object} style\n     */\n    function setStyle(element, style) {\n        Object.keys(style).forEach(function(key) {\n            element.style[key] = style[key];\n        });\n    }\n\n    /**\n     * Class for dimension change detection.\n     *\n     * @param {Element|Element[]|Elements|jQuery} element\n     * @param {Function} callback\n     *\n     * @constructor\n     */\n    var ResizeSensor = function(element, callback) {\n        //Is used when checking in reset() only for invisible elements\n        var lastAnimationFrameForInvisibleCheck = 0;\n\n        /**\n         *\n         * @constructor\n         */\n        function EventQueue() {\n            var q = [];\n            this.add = function(ev) {\n                q.push(ev);\n            };\n\n            var i, j;\n            this.call = function(sizeInfo) {\n                for (i = 0, j = q.length; i < j; i++) {\n                    q[i].call(this, sizeInfo);\n                }\n            };\n\n            this.remove = function(ev) {\n                var newQueue = [];\n                for(i = 0, j = q.length; i < j; i++) {\n                    if(q[i] !== ev) newQueue.push(q[i]);\n                }\n                q = newQueue;\n            };\n\n            this.length = function() {\n                return q.length;\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {Function}    resized\n         */\n        function attachResizeEvent(element, resized) {\n            if (!element) return;\n            if (element.resizedAttached) {\n                element.resizedAttached.add(resized);\n                return;\n            }\n\n            element.resizedAttached = new EventQueue();\n            element.resizedAttached.add(resized);\n\n            element.resizeSensor = document.createElement('div');\n            element.resizeSensor.dir = 'ltr';\n            element.resizeSensor.className = 'resize-sensor';\n\n            var style = {\n                pointerEvents: 'none',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                overflow: 'hidden',\n                zIndex: '-1',\n                visibility: 'hidden',\n                maxWidth: '100%'\n            };\n            var styleChild = {\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                transition: '0s',\n            };\n\n            setStyle(element.resizeSensor, style);\n\n            var expand = document.createElement('div');\n            expand.className = 'resize-sensor-expand';\n            setStyle(expand, style);\n\n            var expandChild = document.createElement('div');\n            setStyle(expandChild, styleChild);\n            expand.appendChild(expandChild);\n\n            var shrink = document.createElement('div');\n            shrink.className = 'resize-sensor-shrink';\n            setStyle(shrink, style);\n\n            var shrinkChild = document.createElement('div');\n            setStyle(shrinkChild, styleChild);\n            setStyle(shrinkChild, { width: '200%', height: '200%' });\n            shrink.appendChild(shrinkChild);\n\n            element.resizeSensor.appendChild(expand);\n            element.resizeSensor.appendChild(shrink);\n            element.appendChild(element.resizeSensor);\n\n            var computedStyle = window.getComputedStyle(element);\n            var position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n            if ('absolute' !== position && 'relative' !== position && 'fixed' !== position && 'sticky' !== position) {\n                element.style.position = 'relative';\n            }\n\n            var dirty = false;\n\n            //last request animation frame id used in onscroll event\n            var rafId = 0;\n            var size = getElementSize(element);\n            var lastWidth = 0;\n            var lastHeight = 0;\n            var initialHiddenCheck = true;\n            lastAnimationFrameForInvisibleCheck = 0;\n\n            var resetExpandShrink = function () {\n                var width = element.offsetWidth;\n                var height = element.offsetHeight;\n\n                expandChild.style.width = (width + 10) + 'px';\n                expandChild.style.height = (height + 10) + 'px';\n\n                expand.scrollLeft = width + 10;\n                expand.scrollTop = height + 10;\n\n                shrink.scrollLeft = width + 10;\n                shrink.scrollTop = height + 10;\n            };\n\n            var reset = function() {\n                // Check if element is hidden\n                if (initialHiddenCheck) {\n                    var invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n                    if (invisible) {\n                        // Check in next frame\n                        if (!lastAnimationFrameForInvisibleCheck){\n                            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                                lastAnimationFrameForInvisibleCheck = 0;\n                                reset();\n                            });\n                        }\n\n                        return;\n                    } else {\n                        // Stop checking\n                        initialHiddenCheck = false;\n                    }\n                }\n\n                resetExpandShrink();\n            };\n            element.resizeSensor.resetSensor = reset;\n\n            var onResized = function() {\n                rafId = 0;\n\n                if (!dirty) return;\n\n                lastWidth = size.width;\n                lastHeight = size.height;\n\n                if (element.resizedAttached) {\n                    element.resizedAttached.call(size);\n                }\n            };\n\n            var onScroll = function() {\n                size = getElementSize(element);\n                dirty = size.width !== lastWidth || size.height !== lastHeight;\n\n                if (dirty && !rafId) {\n                    rafId = requestAnimationFrame(onResized);\n                }\n\n                reset();\n            };\n\n            var addEvent = function(el, name, cb) {\n                if (el.attachEvent) {\n                    el.attachEvent('on' + name, cb);\n                } else {\n                    el.addEventListener(name, cb);\n                }\n            };\n\n            addEvent(expand, 'scroll', onScroll);\n            addEvent(shrink, 'scroll', onScroll);\n\n            // Fix for custom Elements and invisible elements\n            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                lastAnimationFrameForInvisibleCheck = 0;\n                reset();\n            });\n        }\n\n        forEachElement(element, function(elem){\n            attachResizeEvent(elem, callback);\n        });\n\n        this.detach = function(ev) {\n            // clean up the unfinished animation frame to prevent a potential endless requestAnimationFrame of reset\n            if (!lastAnimationFrameForInvisibleCheck) {\n                cancelAnimationFrame(lastAnimationFrameForInvisibleCheck);\n                lastAnimationFrameForInvisibleCheck = 0;\n            }\n            ResizeSensor.detach(element, ev);\n        };\n\n        this.reset = function() {\n            element.resizeSensor.resetSensor();\n        };\n    };\n\n    ResizeSensor.reset = function(element) {\n        forEachElement(element, function(elem){\n            elem.resizeSensor.resetSensor();\n        });\n    };\n\n    ResizeSensor.detach = function(element, ev) {\n        forEachElement(element, function(elem){\n            if (!elem) return;\n            if(elem.resizedAttached && typeof ev === \"function\"){\n                elem.resizedAttached.remove(ev);\n                if(elem.resizedAttached.length()) return;\n            }\n            if (elem.resizeSensor) {\n                if (elem.contains(elem.resizeSensor)) {\n                    elem.removeChild(elem.resizeSensor);\n                }\n                delete elem.resizeSensor;\n                delete elem.resizedAttached;\n            }\n        });\n    };\n\n    if (typeof MutationObserver !== \"undefined\") {\n        var observer = new MutationObserver(function (mutations) {\n            for (var i in mutations) {\n                if (mutations.hasOwnProperty(i)) {\n                    var items = mutations[i].addedNodes;\n                    for (var j = 0; j < items.length; j++) {\n                        if (items[j].resizeSensor) {\n                            ResizeSensor.reset(items[j]);\n                        }\n                    }\n                }\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true,\n            });\n        });\n    }\n\n    return ResizeSensor;\n\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery';\n\n/**\n * Performs a REST Call\n * \n * @return null\n */\n\nexport function restCall( parameters ){\n    // Define the valid endpoints\n    let validEndpoints = [ 'change_user_progress' ];\n\n    // Check if the endPoint parameter is a valid endpoint\n    if ( validEndpoints.includes( parameters.endpoint ) ){\n        // Do AJAX\n        $.ajax({\n            method: 'POST',\n            url:    parameters.url + parameters.endpoint + '/',\n            data:   $.param( parameters.data ) + '&' + $.param({ doing_rest: 1 }),\n\n            // Attach Nonce the the header of the request\n            beforeSend: function( xhr ){\n                xhr.setRequestHeader( 'X-WP-Nonce', parameters.nonce );\n            },\n\n            success: function( response ){\n\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n\n                // Check if onSuccess is defined\n                if ( isDefined( parameters.onSuccess ) ){\n                    // Invoke callback\n                    parameters.onSuccess( response );\n                }\n            },\n\n            statusCode: {\n                403: function(){\n                    location.reload();\n                }\n            },\n\n            fail: function ( response ){\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n                \n                if ( isDefined( parameters.onFail ) ){\n                    parameters.onFail( response );\n                }\n            },\n        });\n    }\n    else {\n        console.error( `The ${ parameters.endpoint } endPoint does not exists` );\n    }\n}\n\n/**\n * Determine if a variable is set and is not NULL\n *\n * @param  {mixed}      variable - The variable being evaluated\n * @return {boolean}    TRUE if the variable is defined\n */\n\nexport const isDefined = ( variable ) => {\n\t// Returns true if the variable is undefined\n    return typeof variable !== 'undefined' && variable !== null;\n}\n\n/**\n * Determine whether a variable is empty\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is empty\n */\n\nexport const isEmpty = ( variable ) => {\n    let response = true;\n\n    // Check if the variable is defined, otherwise is empty\n    if ( isDefined( variable ) ){\n        // Check if it's array\n        if ( variable.isArray ){\n            response = variable.length == 0;\n        }\n        else if ( isObject( variable ) ){\n            response = Object.keys( variable ).length;\n        }\n        else {\n            response = variable == '';\n        }\n    }\n\n    return response;\n}\n\n/**\n * Determine whether a variable is an object\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is an object\n */\n\nexport const isObject = ( variable ) => {\n    return typeof variable === 'object' && variable !== null;\n}\n\n/**\n * Format number\n * @param  {float}  amount        The number\n * @param  {int}    decimalCount  Number of decimals\n * @param  {string} decimal       The decimal separator\n * @param  {string} thousands     The thousands separator\n * @return {string}               Formatted number\n */\n\nexport const formatNumber = ( amount, decimalCount = 2, decimal = '.', thousands = ',' ) => {\n    decimalCount = Math.abs( decimalCount );\n    decimalCount = isNaN( decimalCount ) ? 2 : decimalCount;\n\n    let i = parseInt( amount = Math.abs( Number( amount ) || 0 ).toFixed( decimalCount ) ).toString();\n    let j = ( i.length > 3 ) ? i.length % 3 : 0;\n\n    return ( j ? i.substr( 0, j ) + thousands : '' ) + i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousands ) + ( decimalCount ? decimal + Math.abs( amount - i ).toFixed( decimalCount ).slice( 2 ) : '' );\n};\n\n/**\n * Destroy iCheck\n */\n\nexport const destroyiCheck = () => {\n    // Check iCheck\n    if ( typeof jQuery.fn.iCheck !== 'undefined' ){\n        // Destroy iCheck checkboxes\n        jQuery( '.uo-checkbox input' ).iCheck( 'destroy' );\n        jQuery( '.uo-checkbox input' ).on( 'ifCreated', function( event ){\n            // Destroy iCheck\n            setTimeout(function(){\n                jQuery( event.currentTarget ).iCheck( 'destroy' );\n            }, 100 );\n        });\n    }  \n}\n\n/**\n * Debounces a function\n *\n * @param {Function} func     The function to debounce\n * @param {Integer}  interval The interval, in milliseconds\n * @return {Function}         The function debounced\n */\nexport const debounce = ( func, interval ) => {\n\tlet lastCall = -1;\n\n\treturn () => {\n\t\tclearTimeout( lastCall );\n\t\t// eslint-disable-next-line no-undef\n\t\tconst args = arguments;\n\t\tconst self = this;\n\t\tlastCall = setTimeout( () => {\n\t\t\tfunc.apply( self, args );\n\t\t}, interval );\n\t};\n};\n","import {\n\tdestroyiCheck\n} from './utilities';\n\n(function($){\n\t$(document).ready(function(){\n\t\thide_sort_buttons();\n\t\tcopy_to_clipboard();\n\t\tux_buttons();\n\t\thide_tables_while_loading();\n\n\t\tdestroyiCheck();\n\t});\n\n\tfunction hide_sort_buttons(){\n\t\tvar sort_buttons_container = $('.uo-table-sort-buttons');\n\t\tsort_buttons_container.on('click', '.uo-table-sort-btn', function(){\n\t\t\tvar closest_group = $(this).closest('.uo-table-sort-buttons'),\n\t\t\t\tdirection = $(this).data('direction');\n\t\t\t$(this).hide();\n\t\t\tclosest_group.find('.uo-table-sort-btn:not([data-direction=\"'+direction+'\"])').show();\n\t\t});\n\t}\n\n\tfunction copy_to_clipboard(){\n\t\tvar button = $('.uo-copy-to-clipboard-button');\n\t\tbutton.click(function(){\n\t\t\tvar container = $(this).closest('.uo-copy-to-clipboard'),\n\t\t\t\tinput = $(container.find('input'));\n\t\t\tinput.select();\n\t\t\tdocument.execCommand('Copy');\n\t\t});\n\t}\n\n\tfunction ux_buttons(){\n\t\t// group-management > enrolled users Hide \"Add user\" when an user is selected in the table\n\t\tvar btn_add_users = $('#uo_add_users_button');\n\n\t\t/* enrolled_user_checkboxes.change(function(){\n\t\t\tvar at_least_one_selected = enrolled_user_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected) {\n                //btn_add_users.hide();\n            }else {\n                //btn_add_users.show();\n            }\n\t\t}); */\n\n\t\t$( '#uo-open-bulk-add' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\n\t\t\t$( 'html, body' ).animate({\n\t\t\t\tscrollTop: container.offset().top - 100\n\t\t\t}, 500);\n\t\t});\n\n\t\t$( '.uo-groups-bulk-close' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\t\t});\n\n\t\t// group-management > group leaders Hide \"Add group leader\" when a leader is selected in the table\n\t\tvar group_leaders_checkboxes = $('.uo-groups-group-leaders input[name=\"group-leader-id[]\"], .uo-groups-enrolled-users input#select-all-group-leaders'),\n\t\t\tbtn_add_leader = $('.uo-groups-group-leaders .uo-btn[data-modal-id=\"#group-management-add-group-leader\"]');\n\n\t\tgroup_leaders_checkboxes.on('change', function(){\n\t\t\tvar at_least_one_selected = group_leaders_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected)\n\t\t\t\tbtn_add_leader.hide();\n\t\t\telse\n\t\t\t\tbtn_add_leader.show();\n\t\t});\n\n\t\t// Group buttons in small devices\n\t\t$( '.uo-groups-list-of-btns-main' ).click( function( event ){\n\t\t\t// Get the clicked button\n\t\t\tvar $currentButton    = $( event.currentTarget ),\n\t\t\t// then get the group id\n\t\t\t\tgroupId           = $currentButton.data( 'id' ),\n\t\t\t// and get the direction\n\t\t\t\tdropdownDirection = typeof $currentButton.data( 'direction' ) == 'undefined' ? 'right' : $currentButton.data( 'direction' );\n\n\t\t\t// Once we have the group id, get the main container, which contains the items to show\n\t\t\tvar $targetGroup   = $( '.uo-groups-list-of-btns[data-id=\"' + groupId + '\"]' );\n\n\t\t\t// Check if the group exists\n\t\t\tif ( $targetGroup.length == 1 ){\n\t\t\t\t// Check if it's open\n\t\t\t\tvar isGroupOpen = $targetGroup.hasClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t// Check if it's closed\n\t\t\t\tif ( ! isGroupOpen ){\n\t\t\t\t\t// Add class to show it\n\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t\t// Add the class to set the direction\n\t\t\t\t\tif ( dropdownDirection == 'left' || dropdownDirection == 'right' ){\n\t\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns--' + dropdownDirection );\n\t\t\t\t\t}\n\n\t\t\t\t\tbind_click_outside();\n\t\t\t\t\tbind_escape_button();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Remove class to show the group\n\t\t\t\t\t$targetGroup.removeClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t\tunbind_escape_button();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.error( 'We couldn\\'t find the dropdown' );\n\t\t\t}\n\t\t});\n\n\t\t// Close if clicks on a button inside a list of buttons\n\t\tvar btns_inside_list = $('.uo-groups-list-of-btns .uo-groups-list .uo-btn');\n\t\tbtns_inside_list.click(function(){\n\t\t\tvar group = $(this).closest('.uo-groups-list-of-btns');\n\t\t\tgroup.removeClass('uo-groups-list-of-btns-open')\n\t\t});\n\n\t\tfunction bind_click_outside(){\n\t\t\t// Close if user taps outside\n\t\t\t$( document ).on( 'mouseup.uncanny-groups-buttons-dropdown', function(e){\n\t\t\t\tvar container = $('.uo-groups-list-of-btns');\n\n\t\t\t\t// if the target of the click isn't the container nor a descendant of the container\n\t\t\t\tif (!container.is(e.target) && container.has(e.target).length === 0){\n\t\t\t\t\tcontainer.removeClass('uo-groups-list-of-btns-open');\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t\tunbind_escape_button();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction unbind_click_outside(){\n\t\t\t// Stop listening clicks outside .uo-groups-list-of-btns\n\t\t\t$( document ).off( 'mouseup.uncanny-groups-buttons-dropdown' );\n\t\t}\n\n\t\tfunction bind_escape_button(){\n\t\t\t// Close if user presses escape\n\t\t\t$( document ).on( 'keyup.uncanny-groups-buttons-dropdown', function(e){\n\t\t\t\tif ( e.key === 'Escape' ) {\n\t\t\t\t\t$('.uo-groups-list-of-btns').removeClass('uo-groups-list-of-btns-open');\n\t\t\t\t\tunbind_escape_button();\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction unbind_escape_button(){\n\t\t\t// Stop listening escape key\n\t\t\t$( document ).off( 'keyup.uncanny-groups-buttons-dropdown' );\n\t\t}\n\t}\n\n\tfunction hide_tables_while_loading(){\n\t\t// /group-management-report/\n\t\tvar progress_report = $('#uo-group-progress-report'),\n\t\t\ttriggers = $('.uo-groups.uo-reports #group-report select.change-group-management-form');\n\n\t\ttriggers.change(function(){\n\t\t\tprogress_report.hide();\n\t\t});\n\t}\n})(jQuery);\n","import $ from 'jquery';\n\nimport { debounce, isEmpty } from './utilities';\n\nclass GroupManagement {\n\tconstructor(){\n\t\t// Check if it's the group management page\n\t\tif (this.isGroupManagement()) {\n\t\t\t// Create enrolled users table\n\t\t\tnew EnrolledUsersTable();\n\t\t\tnew EmailUsers();\n\n\t\t\t// Setup modal popups\n\t\t\twindow.ulgmGroupManagement.groupManagementModal = new modals();\n\t\t}\n\t}\n\n\tisGroupManagement(){\n\t\treturn $( '#group-management' ).length == 1;\n\t}\n}\n\nclass modals {\n\tconstructor(){\n\t\t$( document ).on( 'modal:open', function ( e ){\n\t\t\tif (e.target.id === 'group-management-email-users') {\n\t\t\t\tdocument.dispatchEvent( new CustomEvent( 'uncanny-groups/group-management/email-users/open-options' ) );\n\n\t\t\t\twp.editor.remove( 'group_email_text' );\n\t\t\t\twp.editor.initialize( 'group_email_text',\n\t\t\t\t\t{\n\t\t\t\t\t\ttinymce: {\n\t\t\t\t\t\t\tmin_height: 300,\n\t\t\t\t\t\t\tformats: {\n\t\t\t\t\t\t\t\talignleft: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"left\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignleft\"}],\n\t\t\t\t\t\t\t\taligncenter: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"center\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"aligncenter\"}],\n\t\t\t\t\t\t\t\talignright: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"right\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignright\"}],\n\t\t\t\t\t\t\t\tstrikethrough: {inline: \"del\"}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttoolbar1: 'formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor emoticons',\n\t\t\t\t\t\t\tplugins: \"charmap colorpicker hr lists media paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wpdialogs wptextpattern wpview\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tquicktags: {\n\t\t\t\t\t\t\tbuttons: 'strong,em,link,ul,ol,li,code'\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t// Add events for the group management page\n\t\tthis.addGroupManagementEvents();\n\t}\n\n\taddGroupManagementEvents(){\n\n\t\t// Clear file so we get a fresh copy every time\n\t\t$( \"#csv-file\" ).on( 'click', function (){\n\t\t\t$( this ).val( '' );\n\t\t} );\n\n\t\t// There may be other plugin/themes that are using this modal or using the same trigger. let customize the trigger\n\t\t$( 'body' ).on( 'click', '.ulgm-modal-link', this.openModal );\n\n\t\t// User csv file input change\n\t\t$( '#csv-file' ).on( 'change', this.parseCsv );\n\n\t\t//Hide inupts dependent on radio\n\t\t$( \"input:radio[name=action]\" ).click( function (){\n\t\t\tvar value          = $( this ).val();\n\t\t\tvar modalContainer = $( this ).parent();\n\n\t\t\tmodalContainer.children( '#first-name, #last-name, #email, label[for=first-name], label[for=last-name], label[for=email-name]' ).show();\n            $('#uo_add_user_password').show();\n\n\t\t\tif ('send-enrollment' === value || 'add-existing-user' === value) {\n\t\t\t\tmodalContainer.children( '#first-name, #last-name, label[for=first-name], label[for=last-name]' ).hide();\n\t\t\t\t$('#uo_add_user_password').hide();\n\t\t\t}\n\n\t\t} );\n\n\t\twindow.ulgmGroupManagement.downloadCsv = function ( csv ){\n\t\t\tvar blob = new Blob( [csv.csvDataString], {type: \"text/csv;charset=utf-8\"} );\n\t\t\tsaveAs( blob, csv.fileName + \".csv\" );\n\t\t};\n\t}\n\n\topenModal( e ){\n\t\te.preventDefault();\n\n\t\t// clear any error messages\n\t\t$( '.group-management-form' ).find( '.group-management-rest-message' ).html( '' ).hide();\n\n\t\tvar modalId   = $( this ).data( 'modal-id' );\n\t\tvar modalAjax = $( this ).data( 'modal-ajax' );\n\n\t\tif (modalAjax == true) {\n\t\t\tvar endpoint = $( this ).data( 'endpoint' );\n\t\t\tvar user     = $( this ).data( 'user-id' );\n\t\t\tvar group    = $( this ).data( 'group-id' );\n\t\t\tvar restData = {'action': 'get-user-details', 'user': user, 'group-id': group};\n\t\t\tvar spinner  = $( '.uo-modal-spinner' );\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endpoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( xhr ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tfor (var x in response.data) {\n\t\t\t\t\t\tif ($( '#' + x ).length > 0) {\n\t\t\t\t\t\t\t$( '#' + x ).val( response.data[x].value );\n\t\t\t\t\t\t\tif (response.data[x].is_editable == false) {\n\t\t\t\t\t\t\t\t$( '#' + x ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\t\t\t\t\t\tvar modal = $( modalId );\n\n\t\t\t\t\t\tmodal.on( 'modal:open.uncanny-groups-modal', () => {\n\t\t\t\t\t\t\t// Focus on the first field\n\t\t\t\t\t\t\tconst fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif ( fieldField.length > 0 ) {\n\t\t\t\t\t\t\t\tfieldField.trigger( 'focus' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmodal.off( 'modal:open.uncanny-groups-modal' );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tmodal.modal();\n\n\t\t\t\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t},\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tvar modal = $( modalId );\n\n\t\t\tmodal.on( 'modal:open.uncanny-groups-modal', () => {\n\t\t\t\t// Focus on the first field\n\t\t\t\tconst fieldField = $( modal ).find( 'input:visible, select:visible' ).first();\n\t\t\t\t\n\t\t\t\tif ( fieldField.length > 0 ) {\n\t\t\t\t\tfieldField.trigger( 'focus' );\n\t\t\t\t} else {\n\t\t\t\t\t$( modal ).find( 'button:visible:first' ).trigger( 'focus' );\n\t\t\t\t}\n\n\t\t\t\tmodal.off( 'modal:open.uncanny-groups-modal' );\n\t\t\t} );\n\n\t\t\tmodal.modal();\n\n\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t}\n\t}\n\n\tparseCsv( e ){\n\n\t\tvar input            = $( this );\n\t\tvar messageContainer = $( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' )\n\n\t\t// Reset Message\n\t\tmessageContainer.hide();\n\t\tmessageContainer.text( '' );\n\n\t\ttry {\n\t\t\tvar reader = new FileReader();\n\t\t\t//do something\n\t\t} catch (e) {\n\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.file_api_is_not_supported ).css( 'display', 'inline-flex' );\n\t\t\treturn false;\n\t\t}\n\n\t\tvar file    = $( '#csv-file' )[0].files[0];\n\t\tvar csvText = false;\n\n\n\t\tif (file) {\n\t\t\t// check is csv extension\n\t\t\tif ('csv' !== file.name.split( '.' ).pop()) {\n\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.select_a_csv ).css( 'display', 'inline-flex' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treader.readAsText( file );\n\n\t\t\treader.onload = function ( e ){\n\n\t\t\t\tcsvText = e.target.result;\n\n\t\t\t\tif (!csvText) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.csv_file_error ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// split file text on line breaks\n\t\t\t\tvar csvArray = csvText.split( /\\r?\\n/g );\n\n\t\t\t\t// Preliminary checks\n\n\t\t\t\t// Pull out the header and store it\n\n\t\t\t\tvar csvHead = csvArray.shift();\n\n\t\t\t\tlet delimiter = \",\";\n\t\t\t\tif (csvHead.indexOf( \";\" ) !== -1) {\n\t\t\t\t\tdelimiter = \";\";\n\t\t\t\t}\n\n\n\t\t\t\tcsvHead = csvHead.split( delimiter );\n\n\t\t\t\t// Something is off ... create to detect CR only line breaks where CRLF is only supported but may detect other malformations\n\t\t\t\tif (csvHead.length !== 3 && csvArray.length === 0) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.incompatible_format ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Remove last line of csv that is always blank\n\t\t\t\tcsvArray.pop();\n\n\t\t\t\t// Require emails\n\t\t\t\tvar emailIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'user_email' );\n\t\t\t\tif ('error' === emailIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar firstNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'first_name' );\n\t\t\t\tif ('error' === firstNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_first ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar lastNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'last_name' );\n\t\t\t\tif ('error' === lastNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_last ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar newArray = csvArray.map( function mapper( v ){\n\t\t\t\t\tif (typeof v == \"string\") {\n\t\t\t\t\t\treturn v.split( delimiter );\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn v.map( mapper );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\n\t\t\t\t// Check for blank lines\n\t\t\t\tvar emptyRows = window.ulgmGroupManagement.groupManagementModal.verifyEmptyRows( newArray, emailIndex );\n\n\t\t\t\tif (emptyRows) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.must_contain_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t$( '#csv-text' ).val( csvText );\n\n\n\t\t\t};\n\t\t} else {\n\t\t\t$( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' ).text( ulgmGroupManagementLocalized.text.choose_file );\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tverifyEmptyRows( array, emailIndex ){\n\n\t\tfor (var i = 0; i < array.length; ++i) {\n\t\t\tif (array[i][emailIndex] === '') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tverifyRequiredHeader( headerArray, type ){\n\n\t\tvar columnsAmount = 0;\n\t\tvar columnIndex   = false;\n\t\tfor (var i = 0; i < headerArray.length; i++) {\n\t\t\tif (headerArray[i] === type) {\n\t\t\t\tcolumnsAmount++;\n\t\t\t\tcolumnIndex = i;\n\t\t\t}\n\t\t}\n\n\t\tif (0 === columnsAmount) {\n\t\t\treturn 'error';\n\n\t\t}\n\n\t\tif (1 !== columnsAmount) {\n\t\t\treturn 'error';\n\t\t}\n\n\t\treturn columnIndex;\n\n\t}\n}\n\nclass EmailUsers {\n\tconstructor() {\n\t\t// Listen when the dialog is opened\n\t\tthis.handleOpenDialog();\n\n\t\t// Listen when the courses and statuses change\n\t\tthis.handleFieldUpdates();\n\t}\n\n\t/**\n\t * Returns the data required to retrieve the number of affected users\n\t */\n\tget emailUsersFormData() {\n\t\treturn {\n\t\t\tgroup_id: this.$groupIDHiddenField.value,\n\t\t\tcourses: jQuery( this.$coursesDropdown ).val(),\n\t\t\tstatuses: jQuery( this.$courseStatuses ).val(),\n\t\t\tinclude_children: this.$includeChildrenCheckbox ? this.$includeChildrenCheckbox.checked : false,\n\t\t}\n\t}\n\n\t/**\n\t * Listens to the dialog and updates the user count when it's opened\n\t */\n\thandleOpenDialog() {\n\t\tdocument.addEventListener( 'uncanny-groups/group-management/email-users/open-options', () => {\n\t\t\t// Update the user count\n\t\t\tthis.updateUserCount();\n\t\t} );\n\t}\n\n\t/**\n\t * Listens when the courses and statuses change\n\t */\n\thandleFieldUpdates() {\n\t\t// Unfortunately, we need to use jQuery here. select2 doesn't fire the native events\n\t\t// https://github.com/select2/select2/issues/4686\n\t\tjQuery( this.$coursesDropdown ).on( 'change', () => { this.updateUserCount() } );\n\t\tjQuery( this.$courseStatuses ).on( 'change', () => { this.updateUserCount() } );\n\t\t// Check if the include children checkbox exists.\n\t\tif ( this.$includeChildrenCheckbox ) {\n\t\t\t// Listen to change and update count accordingly.\n\t\t\tjQuery( this.$includeChildrenCheckbox ).on( 'change', () => { this.updateUserCount() } );\n\t\t}\n\t}\n\n\t/**\n\t * Updates the number of users that'll receive the email\n\t */\n\tupdateUserCount() {\n\t\t// Remove the current number\n\t\tthis.$userCountCounter.innerText = '';\n\n\t\tfetch( `${ ulgmRestApiSetup.root }email_users_get_user_count?${ jQuery.param( this.emailUsersFormData ) }`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'X-WP-Nonce': ulgmRestApiSetup.nonce,\n\t\t\t},\n\t\t})\n\t\t\t.then( response => response.json() )\n\t\t\t.then( response => {\n\t\t\t\tif ( ! response.success || typeof response.data.userCount === 'undefined' ) {\n\t\t\t\t\tthis.$userCountCounter.innerText = `(${ ulgmGroupManagementLocalized.text.error })`;\n\t\t\t\t}\n\n\t\t\t\tthis.$userCountCounter.innerText = response.data.userCount;\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\t// Show error\n\t\t\t\tthis.$userCountCounter.innerText = `? (${ ulgmGroupManagementLocalized.text.error })`;\n\t\t\t\tconsole.error( error );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Returns the node that'll be used to show the user count\n\t */\n\tget $userCountCounter() {\n\t\treturn document.getElementById( 'ulgm-management-email-users-count' );\n\t}\n\n\t/**\n\t * Returns the field \"Group courses\"\n\t */\n\tget $coursesDropdown() {\n\t\treturn document.getElementById( 'ulgm-management-send-email-courses' );\n\t}\n\n\t/**\n\t * Returns the field \"Course status\"\n\t */\n\tget $courseStatuses() {\n\t\treturn document.getElementById( 'ulgm-management-send-email-course-statuses' );\n\t}\n\n\t/**\n\t * Returns the hidden field that contains the group ID\n\t */\n\tget $groupIDHiddenField() {\n\t\treturn document.getElementById( 'group_email_group_id' );\n\t}\n\n\t/**\n\t * Returns the include children checkbox if it exists\n\t */\n\tget $includeChildrenCheckbox() {\n\t\tlet $checkbox = document.getElementById( 'group_email_include_children' );\n\t\treturn $checkbox !== null ? $checkbox : false;\n\t}\n}\n\nclass EnrolledUsersTable {\n\tconstructor(){\n\t\t// Check if it has the enrolled users table\n\t\tif (this.hasEnrolledUsersTable()) {\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get data\n\t\t\tthis.getData();\n\n\t\t\t// Add select2\n\t\t\tthis.addSelect2();\n\n\t\t\t// Create DataTable\n\t\t\tthis.createDataTables();\n\n\t\t\t// Listen the checkbox to select all the users\n\t\t\tthis.listenCheckboxToSelectAll();\n\n\t\t\t// Listen checkboxes changes\n\t\t\tthis.listenCheckboxesChanges();\n\n\t\t\t// Listen modal open and update data\n\t\t\tthis.updateDataOnModal();\n\n\t\t\t// Check if the \"First name\" and \"Last name\" fields when adding new users must be required\n\t\t\tthis.firstLastNamesRequired();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcontainer: $( '#group-management' ),\n\t\t\tselectEl: $( '.uo-groups select' ),\n\t\t\tenrolledUsersTableDT: $( '#group-management-enrolled-users-datatable' ),\n\t\t\tenrolledLeaderTableDT: $( '#group-management-enrolled-leader-datatable' ),\n\t\t\tremoveUsersButton: $( '#group-management-enrolled-users-table-remove-users' ),\n\t\t\tremoveLeadersButton: $( '.group-leader-management-buttons' ),\n\t\t\tsendEmailsButton: $( '#group-management-enrolled-users-table-send-password' ),\n\t\t\tnumberOfUsers: $( '#group-management .uo-groups-enrolled-users .amount-users' ),\n\t\t\tsendEmailsModal: $( '#group-management-enrolled-users-table-send-password-modal' ),\n\t\t\tsendEmailsField: $( '#group-management-enrolled-users-table-send-password-field' ),\n\t\t\tremoveUsersField: $( '#group-management-remove-user #removing-users' ),\n\t\t\temailUsersCoursesDropdown: $( '#ulgm-management-send-email-courses' ),\n\t\t}\n\t}\n\n\taddSelect2(){\n\t\t// Init select2 in all dropdowns\n\t\ttry {\n\t\t\t// Iterate dropdowns\n\t\t\tthis.$elements.selectEl.each( ( index, $dropdown ) => {\n\t\t\t\t// Default select2 options\n\t\t\t\tconst select2Options = {}\n\n\t\t\t\t// Check if it's inside a modal\n\t\t\t\tif ( $dropdown.closest( '.group-management-modal' ) ) {\n\t\t\t\t\t// Init select2, but add the main wrapper inside the modal\n\t\t\t\t\tselect2Options.dropdownParent = $( $dropdown.parentNode );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$( $dropdown ).select2( select2Options );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tconsole.warn( e );\n\t\t}\n\n\t\tif ($( '#group-id' ).length > 0) {\n\t\t\t$( '#group-id' ).change( function (){\n\t\t\t\t$( this ).closest( 'form' ).submit();\n\t\t\t} );\n\t\t}\n\n\t\t// Set logic of the Email users > Courses dropdown\n\t\t// Cache the field value. We will use this to see what's the latest selected option\n\t\tthis.emailUsersCourses = this.$elements.emailUsersCoursesDropdown.val() || [];\n\t\tthis.$elements.emailUsersCoursesDropdown.on( 'change', () => {\n\n\t\t\t// Nice-to-have, so let's add it inside a try block\n\t\t\t// Even if this doesn't work, everything else will continue working\n\t\t\ttry {\n\t\t\t\t// Set the value of the \"All courses\" option\n\t\t\t\tconst optionAllCoursesValue = '-1';\n\n\t\t\t\t// Create a variable to know later if we changed the value of the dropdown\n\t\t\t\tlet hadWeChangedCoursesValues = false;\n\n\t\t\t\t// Get the values of the dropdown\n\t\t\t\tlet selectedCourses = this.$elements.emailUsersCoursesDropdown.val();\n\n\t\t\t\t// Check if there are courses selected\n\t\t\t\tif ( selectedCourses.length == 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get the latest selected option\n\t\t\t\t// To do so, get the symmetric difference\n\t\t\t\tconst latestChangedOption = this.emailUsersCourses\n\t\t\t\t\t.filter( courseID => ! selectedCourses.includes( courseID ) )\n\t\t\t\t\t.concat( selectedCourses.filter( courseID => ! this.emailUsersCourses.includes( courseID ) ) )[0];\n\n\t\t\t\t// Check if an option changed\n\t\t\t\tif ( typeof latestChangedOption === 'undefined' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check whether the option was added (true) or removed (false)\n\t\t\t\tconst wasLastOptionAdded = this.emailUsersCourses\n\t\t\t\t\t.filter( courseID => ! selectedCourses.includes( courseID ) )\n\t\t\t\t\t.length == 0;\n\n\t\t\t\t// Check if the \"All courses\" option is selected\n\t\t\t\tconst isOptionAllCoursesSelected = selectedCourses.includes( optionAllCoursesValue );\n\n\t\t\t\tif (\n\t\t\t\t\t// Check if the user added the \"All courses\" option\n\t\t\t\t\tlatestChangedOption == optionAllCoursesValue && wasLastOptionAdded &&\n\t\t\t\t\t// And there are more options selected\n\t\t\t\t\tselectedCourses.length > 1\n\t\t\t\t) {\n\t\t\t\t\t// Select only \"All courses\"\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown.val( '' );\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown\n\t\t\t\t\t\t.find( `option[value=\"${ optionAllCoursesValue }\"]` )\n\t\t\t\t\t\t.prop( 'selected', true );\n\n\t\t\t\t\t// We changed the value, update the flag\n\t\t\t\t\thadWeChangedCoursesValues = true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t// User added a different option than \"All courses\"\n\t\t\t\t\tlatestChangedOption != optionAllCoursesValue && wasLastOptionAdded &&\n\t\t\t\t\t// And \"All courses\" is seleceted\n\t\t\t\t\tisOptionAllCoursesSelected\n\t\t\t\t) {\n\t\t\t\t\t// Remove \"All courses\"\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown\n\t\t\t\t\t\t.find( `option[value=\"${ optionAllCoursesValue }\"]` )\n\t\t\t\t\t\t.prop( 'selected', false );\n\n\t\t\t\t\t// We changed the value, update the flag\n\t\t\t\t\thadWeChangedCoursesValues = true;\n\t\t\t\t}\n\n\t\t\t\t// Check if the value changed\n\t\t\t\tif ( hadWeChangedCoursesValues ) {\n\t\t\t\t\t// Update selected options\n\t\t\t\t\tthis.emailUsersCourses = this.$elements.emailUsersCoursesDropdown.val();\n\n\t\t\t\t\t// Trigger change event to update select2\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown.trigger( 'change' );\n\t\t\t\t} \n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.warn( e );\n\t\t\t}\n\t\t\t\n\t\t} );\n\t}\n\n\tgetData(){\n\t\t// Get data from DOM elements\n\t\tthis.data = {\n\t\t\tcanRemoveUsers: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users' ) ),\n\t\t\tcanRemoveUsersAnytime: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users-anytime' ) ),\n\t\t\tulgmGroupLeaderData: null !== ulgmGroupLeaderData ? ulgmGroupLeaderData : [],\n\t\t};\n\n\t\t// Set the default array for the selected users on page load\n\t\tthis.selectedUsers   = [];\n\t\tthis.selectedLeaders = [];\n\t}\n\n\tcreateDataTables(){\n\n\t\t/* Create an array with the values of all the input boxes in a column */\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-asc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textA.localeCompare( textB );\n\t\t};\n\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-desc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textB.localeCompare( textA );\n\t\t};\n\n\t\t// version 4.0- columns are defined in group-management-interface.php\n\t\tlet userColumns = this.data.ulgmGroupLeaderData.enrolled_user_columns;\n\n\t\t// Check if we should add the column with the checkbox\n\t\tif ( 'true' === this.data.ulgmGroupLeaderData.populate_management_features ) {\n\t\t\tuserColumns.unshift( {\n\t\t\t\tdata: 'check',\n\t\t\t\ttitle: this.data.ulgmGroupLeaderData.check_all,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t} );\n\t\t}\n\n\t\t// Check if we have to remove the \"Key\" column\n\t\tif ( true !== this.$elements.enrolledUsersTableDT.data( 'key_column' ) ) {\n\t\t\t// Remove it\n\t\t\tuserColumns = userColumns.filter( columnData => columnData.targets != 'key' );\n\t\t}\n\n\t\t// Create shared options applied to all export buttons\n\t\tconst buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\t// columns: ':visible'\n\t\t\t},\n\t\t\tfilename: () => {\n\t\t\t\tconst filenameParts = [\n\t\t\t\t\t'group-management',\n\t\t\t\t\tdocument.getElementById( 'ulgm_current_managed_group_id' ).value\n\t\t\t\t];\n\n\t\t\t\t// Add the Group name\n\t\t\t\tlet groupName = $( \"#group-id option:selected\" ).text();\n\t\t\t\tgroupName = groupName ? groupName : $( \"#group-name\" ).text();\n\t\t\t\tfilenameParts.push( groupName );\n\n\t\t\t\treturn filenameParts.join( ' - ' );\n\t\t\t}\n\t\t};\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet enrolledUsersOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet enrolledUsersOrderByIndex = userColumns.findIndex( columnData => columnData.title == ulgmGroupManagementShortcode.tables.enrolledUsers.orderBy );\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( enrolledUsersOrderByIndex === -1 ) {\n\t\t\tenrolledUsersOrderByIndex = userColumns.findIndex( columnData => columnData.targets == 'first_name' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( enrolledUsersOrderByIndex !== -1 ) {\n\t\t\tenrolledUsersOrder = [\n\t\t\t\t[\n\t\t\t\t\tenrolledUsersOrderByIndex, // The ID of the column used to sort, defaults to `first_name`\n\t\t\t\t\tulgmGroupManagementShortcode.tables.enrolledUsers.order, // Designates the ascending or descending order of the orderby parameter, defaults to `asc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet userTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_user_data,\n\t\t\tsearchDelay: 400,\n\t\t\tcolumns: userColumns,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: enrolledUsersOrder,\n\t\t\tpageLength: parseInt( this.$elements.enrolledUsersTableDT.data( 'page_length' ) ),\n\t\t\tlengthMenu: [\n\t\t\t\t[10, 25, 50, 100],\n\t\t\t\t[10, 25, 50, 100]\n\t\t\t],\n\t\t\tbuttons: [\n\t\t\t\t$.extend( true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: ulgmRestApiSetup.language.buttons.csvExport,\n\t\t\t\t\t\n\t\t\t\t} ),\n\t\t\t\t$.extend( true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t\t} ),\n\t\t\t],\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocessing: false,\n\t\t\tserverSide: false,\n\n\t\t\tcreatedRow: function( row, data, dataIndex ){\n\t\t\t\t$( row )\n\t\t\t\t\t.addClass( `status_id-${ data.status_id }` )\n\t\t\t},\n\n\t\t\tinitComplete: () => {\n\t\t\t\t// Get the export CSV button\n\t\t\t\tconst $fakeExportCSV = document.getElementById( 'group-management-users-export-csv' );\n\n\t\t\t\t// Get the export Excel button\n\t\t\t\tconst $fakeExportExcel = document.getElementById( 'group-management-users-export-excel' );\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportCSV ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportCSV.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportCSV = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-csv' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportCSV ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportCSV.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportExcel ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportExcel.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportExcel = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-excel' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportExcel ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportExcel.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet userTable = null;\n\n\t\t// User table\n\t\tuserTable = this.$elements.enrolledUsersTableDT.DataTable( userTableVars );\n\n\t\t$( document ).trigger( 'enrolledUsersTableDataTableCreated', {\n\t\t\tuserTableVars: userTableVars,\n\t\t\tuserTable: userTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\n\t\tlet leaderColumns = this.data.ulgmGroupLeaderData.enrolled_leader_columns;\n\t\tif ('true' === this.data.ulgmGroupLeaderData.populate_management_features) {\n\t\t\tleaderColumns.unshift( {data: 'check', targets: 0, title: this.data.ulgmGroupLeaderData.check_all} );\n\t\t}\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet groupLeadersOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet groupLeadersOrderByIndex = leaderColumns.findIndex( columnData => columnData.title == ulgmGroupManagementShortcode.tables.groupLeaders.orderBy );\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( groupLeadersOrderByIndex === -1 ) {\n\t\t\tgroupLeadersOrderByIndex = leaderColumns.findIndex( columnData => columnData.data == 'first_name' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( groupLeadersOrderByIndex !== -1 ) {\n\t\t\tgroupLeadersOrder = [\n\t\t\t\t[\n\t\t\t\t\tgroupLeadersOrderByIndex, // The ID of the column used to sort, defaults to `first_name`\n\t\t\t\t\tulgmGroupManagementShortcode.tables.groupLeaders.order, // Designates the ascending or descending order of the orderby parameter, defaults to `asc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet leaderTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_leader_data,\n\t\t\tcolumns: leaderColumns,\n\t\t\tcolumnDefs: [{\n\t\t\t\ttargets: 0,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t}],\n\t\t\tdom: 'frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: groupLeadersOrder,\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet leaderTable;\n\n\t\t// Try to set the custom page length and length menu attributes\n\t\t// This will work only if the user didn't override the uo-groups template\n\t\t// before Groups 3.7.3\n\t\ttry {\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.pageLength = parseInt( this.$elements.enrolledLeaderTableDT.data( 'page_length' ) );\n\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.lengthMenu = this.$elements.enrolledLeaderTableDT.data( 'length_menu' );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t} catch (e) {\n\t\t\tconsole.log( 'Beta: Could not set custom page length and custom menu length' );\n\t\t\tconsole.log( e );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t}\n\n\t\t$( document ).trigger( 'enrolledLeaderTableDataTableCreated', {\n\t\t\tleaderTableVars: leaderTableVars,\n\t\t\tleaderTable: leaderTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\t}\n\n\tlistenCheckboxToSelectAll(){\n\t\t// Listen changes to this checkbox\n\t\tthis.$elements.container.on( 'change', '.group-management-enrolled-select-all', ( event ) => {\n\n\t\t\t// Get checkbox status\n\t\t\tconst checkAllEl = $( event.currentTarget );\n\t\t\tconst isChecked  = checkAllEl.is( ':checked' );\n\n\t\t\t// Get all checkboxes\n\t\t\tconst $allCheckboxes = checkAllEl.closest( 'table' ).find( '.select-user' );\n\n\t\t\t// Check if it's checked\n\t\t\tif (isChecked) {\n\t\t\t\t// Select all users\n\t\t\t\t$allCheckboxes.prop( 'checked', true );\n\t\t\t} else {\n\t\t\t\t// Unselect all users\n\t\t\t\t$allCheckboxes.prop( 'checked', false );\n\t\t\t}\n\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tlistenCheckboxesChanges(){\n\t\t// Add event listener to the checkboxes\n\t\tthis.$elements.container.on( 'change', 'input[type=\"checkbox\"].select-user', ( event ) => {\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tupdateSelectedUsers(){\n\t\t// Create array to save selected users\n\t\tlet selectedUsers   = [];\n\t\tlet selectedLeaders = [];\n\n\t\t// Get all the checkboxes\n\t\tconst $allUserCheckboxes   = this.$elements.enrolledUsersTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\t\tconst $allLeaderCheckboxes = this.$elements.enrolledLeaderTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\n\t\t// Filter all checked and unchecked checkboxes\n\t\tconst allCheckedCheckboxes = {\n\t\t\tusers: $allUserCheckboxes.filter( ':checked' ),\n\t\t\tleaders: $allLeaderCheckboxes.filter( ':checked' ),\n\t\t};\n\n\t\t// Get the selected checkboxes\n\t\t$.each( allCheckedCheckboxes, ( type, $checkedCheckboxes ) => {\n\t\t\t$.each( $checkedCheckboxes, ( index, checkbox ) => {\n\t\t\t\t// Get the checkbox\n\t\t\t\tlet $checkbox = $( checkbox );\n\n\t\t\t\tlet $row = $checkbox.closest( 'tr' );\n\n\t\t\t\tif ('users' === type) {\n\t\t\t\t\tlet status = $row.find( '.status' ).data( 'status' );\n\n\t\t\t\t\tlet progressIsNotStarted;\n\t\t\t\t\tif ('not-started' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else if ('not-enrolled' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprogressIsNotStarted = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedUsers.push( {\n\t\t\t\t\t\tuserId: $checkbox.val(),\n\t\t\t\t\t\tprogressIsNotStarted: progressIsNotStarted,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tif ('leaders' === type) {\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedLeaders.push( {\n\t\t\t\t\t\tuserId: $checkbox.val()\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Update selected property\n\t\tthis.selectedUsers   = selectedUsers;\n\t\tthis.selectedLeaders = selectedLeaders;\n\t}\n\n\tevaluateRemoveUsersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveUsersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Check if the option to remove users is enabled\n\t\t\tif (this.data.canRemoveUsers) {\n\t\t\t\t// Check if they can remove users anytime\n\t\t\t\tif (this.data.canRemoveUsersAnytime) {\n\t\t\t\t\t// Set variable to true to show the button later\n\t\t\t\t\tshowRemoveUsersButton = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Check the progress status of the selected users\n\t\t\t\t\t// To do that, first set the main variable to true\n\t\t\t\t\t// We're going to iterate each selected row and if\n\t\t\t\t\t// at least of the checks fail we're going to set\n\t\t\t\t\t// it back to false\n\t\t\t\t\tshowRemoveUsersButton = true;\n\n\t\t\t\t\t// iterate each one\n\t\t\t\t\tthis.selectedUsers.forEach( ( user ) => {\n\t\t\t\t\t\t// Check if the progress is \"Not started\"\n\t\t\t\t\t\tshowRemoveUsersButton = showRemoveUsersButton && user.progressIsNotStarted;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveUsersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeUsersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeUsersButton.hide();\n\t\t}\n\t}\n\n\tevaluateRemoveLeadersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveLeadersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedLeaders.length > 0) {\n\t\t\tshowRemoveLeadersButton = true;\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveLeadersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeLeadersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeLeadersButton.hide();\n\t\t}\n\n\t\t// Add amount of users being removed to modal\n\t\t$( '.amount-group-leaders' ).text( this.selectedLeaders.length );\n\n\t\tlet groupLeaderIds = [];\n\t\t$.each( this.selectedLeaders, ( index, user ) => {\n\t\t\tgroupLeaderIds.push( user.userId );\n\t\t} );\n\n\t\t// Add all ids to button\n\t\t$( '#removing-group-leaders' ).val( groupLeaderIds.join( \",\" ) );\n\t}\n\n\tevaluateSendEmailsButtonVisiblity(){\n\t\t// For this one, just check if there are selected users\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.sendEmailsButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.sendEmailsButton.hide();\n\t\t}\n\t}\n\n\tupdateDataOnModal(){\n\t\t// Listen when the modal is being opened\n\t\tthis.$elements.container.on( 'modal-open', ( event, modalId, modal ) => {\n\n\t\t\t// Create an array with the list of users\n\t\t\tconst selectedUsers = this.selectedUsers.map( ( user ) => {\n\t\t\t\treturn user.userId;\n\t\t\t} );\n\n\t\t\t// Update number of users selected users\n\t\t\tthis.$elements.numberOfUsers.text( selectedUsers.length );\n\n\n\t\t\t// Check if the modal id the the ID of the \"Send emails\" modal\n\t\t\tif (modalId == '#group-management-enrolled-users-table-send-password-modal') {\n\t\t\t\t// Add the array as a string to a hidden field inside the Send password reset modal\n\t\t\t\tthis.$elements.sendEmailsField.val( JSON.stringify( selectedUsers ) );\n\t\t\t} else if (modalId == '#group-management-remove-user') {\n\n\t\t\t\t// Create a comma separated list with the IDs\n\t\t\t\tconst userIds = selectedUsers.join( ',' );\n\n\t\t\t\t// Add the list of IDs on a hidden field\n\t\t\t\tthis.$elements.removeUsersField.val( userIds );\n\t\t\t}\n\t\t} );\n\t}\n\n\thasEnrolledUsersTable(){\n\t\treturn $( '#group-management-enrolled-users-datatable' ).length == 1;\n\t}\n\n\t/**\n\t * Make the First and Last name fields of the \"Bulk add & Invite users\" required\n\t * Logic: Listen when the user types in one of the \"Email\" fields.\n\t * If the Email is not empty,\n\t * > Make First name and Last name fields required\n\t * \n\t */\n\tfirstLastNamesRequired() {\n\t\t// Check if we have to make them required first\n\t\tif ( ! ulgmGroupManagementShortcode.firstnameLastnameRequired ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Create array with main CSS selectors\n\t\tconst requiredSelectors = {\n\t\t\temailFields: '#group-management-add-users .content-leaders-email input',\n\t\t\tfirstName: '.content-leaders-first-name input',\n\t\t\tlastName: '.content-leaders-last-name input',\n\t\t\trow: '.uo-row',\n\t\t\trowWithData: 'group-management-add-users-row--with-data'\n\t\t}\n\n\t\t// Get all the email fields\n\t\tconst $emailFields = document.querySelectorAll( requiredSelectors.emailFields );\n\n\t\t// Iterate fields\n\t\t$emailFields.forEach( ( $emailField ) => {\n\t\t\t// Listen changed to the field\n\t\t\t// Execute the callback up to once every 200ms\n\t\t\t$emailField.addEventListener(\n\t\t\t\t'input',\n\t\t\t\tdebounce( () => {\n\t\t\t\t\t// Get the field value\n\t\t\t\t\tconst emailValue = $emailField.value;\n\n\t\t\t\t\t// If it's not empty, make First name and Last name required\n\t\t\t\t\t// First, get the row and fields\n\t\t\t\t\tconst $rowElements = {\n\t\t\t\t\t\trow: $emailField.closest( requiredSelectors.row )\n\t\t\t\t\t}\n\n\t\t\t\t\t$rowElements.firstName = $rowElements.row.querySelector( requiredSelectors.firstName );\n\t\t\t\t\t$rowElements.lastName  = $rowElements.row.querySelector( requiredSelectors.lastName );\n\t\t\t\t\t\n\t\t\t\t\t// Check if it's empty\n\t\t\t\t\tif ( isEmpty( emailValue ) ) {\n\t\t\t\t\t\t// Remove the class used to identify rows with data\n\t\t\t\t\t\t$rowElements.row.classList.remove( requiredSelectors.rowWithData );\n\n\t\t\t\t\t\t// Make the fields optional\n\t\t\t\t\t\t$emailField.removeAttribute( 'required' )\n\t\t\t\t\t\t$emailField.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.emailAddress );\n\n\t\t\t\t\t\t$rowElements.firstName.removeAttribute( 'required' )\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.firstName );\n\n\t\t\t\t\t\t$rowElements.lastName.removeAttribute( 'required' )\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.lastName );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add the class used to identify rows with data\n\t\t\t\t\t\t$rowElements.row.classList.add( requiredSelectors.rowWithData );\n\n\t\t\t\t\t\t// Make the fields optional\n\t\t\t\t\t\t$emailField.setAttribute( 'required', '' );\n\t\t\t\t\t\t$emailField.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.emailAddress } *` );\n\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'required', '' );\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.firstName } *` );\n\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'required', '' );\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.lastName } *` );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}, 200 )\n\t\t\t);\n\t\t} );\n\t}\n}\n\nexport default GroupManagement;\n","import $ from 'jquery';\n\nclass GroupCourseReport {\n\tconstructor(){\n\n\t\t// Check if it's the group course report page\n\t\tif (this.isCourseReport()) {\n\t\t\t// Create course report table\n\t\t\tnew CourseReportTable();\n\t\t}\n\t}\n\n\tisCourseReport(){\n\t\treturn $( '#group-course-report-datatable' ).length === 1;\n\t}\n}\n\nclass CourseReportTable {\n\tconstructor(){\n\n\t\tthis.table = null;\n\n\t\t// Get elements\n\t\tthis.getElements();\n\n\t\t// Listen dropdowns changes\n\t\tthis.filters();\n\n\t\t// Create DataTable\n\t\tthis.createDataTables();\n\n\t\t// Populate table after the group course is selected\n\t\tthis.restPopulateTable();\n\n\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcourseReport: $( '#group-course-report-datatable' ),\n\t\t\tfilter: {\n\t\t\t\tall: $( '.uo-groups-select-filters select' ),\n\t\t\t\tgroupID: $( '#group-id' ),\n\t\t\t\tcourseID: $( '#uo-group-report-course' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tfilters() {\n\t\t// Clear table when one of the filters change\n\t\tthis.$elements.filter.all.on( 'change', () => {\n\t\t\t// Check if the DataTable is defined\n\t\t\tif ( typeof this.$elements.courseReport === 'undefined' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Try to clear the DataTable\n\t\t\ttry {\n\t\t\t\t// Clear the table\n\t\t\t\tthis.table\n\t\t\t\t\t.clear()\n\t\t\t\t\t.draw()\n\t\t\t\t\t.columns.adjust()\n\t\t\t\t\t.responsive.recalc();\n\t\t\t} catch ( e ) {\n\t\t\t\t// console.warn( e );\n\t\t\t}\n\t\t} );\n\n\t\t// Check if there is only one group, and the dropdown is hidden\n\t\tif ( this.$elements.filter.groupID.hasClass( 'h3-select' ) ) {\n\t\t\t// Get the group ID\n\t\t\tlet groupID = this.$elements.filter.groupID\n\t\t\t\t.find( 'option:not([value=\"0\"]):not([value=\"\"])' )\n\t\t\t\t.last()\n\t\t\t\t.val();\n\n\t\t\t// Select the first option and trigger the change event\n\t\t\tthis.$elements.filter.groupID\n\t\t\t\t.val( groupID )\n\t\t\t\t.trigger( 'change' );\n\n\t\t\twindow.ulgmGroupManagement.restForms.sendRestCall( {\n\t\t\t\tcurrentTarget: this.$elements.filter.groupID\n\t\t\t} );\n\n\t\t\t// Disable the dropdown\t\t\t\n\t\t\tthis.$elements.filter.groupID.prop( 'disabled', 'disabled' );\n\t\t} else {\n\t\t\t// If there is more than one group, listen changes to clear the \"Course\" dropdown on change\n\t\t\tthis.$elements.filter.groupID.on( 'change', () => {\n\t\t\t\t// Clear the \"Course\" group\n\t\t\t\tthis.$elements.filter.courseID\n\t\t\t\t\t// Deselect the dropdown, without triggering the change event\n\t\t\t\t\t.val( '' )\n\t\t\t\t\t// Remove all options\n\t\t\t\t\t.find( 'option' )\n\t\t\t\t\t\t.remove();\n\t\t\t} );\n\t\t}\n\t}\n\n\tcreateDataTables(){\n\n\t\tlet that       = this;\n\t\tlet columnDefs = [];\n\n\t\tlet columnsVisibility = that.$elements.courseReport.data( 'table_columns' )\n\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\tlet columns = [];\n\n\t\t// Check if we have to remove the \"Transcript\" column\n\t\tif ( ! ulgmCourseReportShortcode.shouldAddTranscriptColumn ) {\n\t\t\t// Remove Transcript column\n\t\t\tdelete ulgmRestApiSetup.tableColumns.transcript_page_url;\n\t\t}\n\n\t\t// Define array with the columns that we're going to send to DataTables\n\t\tObject.entries( ulgmRestApiSetup.tableColumns ).forEach( ( [ columnKey, columnName ] ) => {\n\t\t\tcolumns.push( {\n\t\t\t\tdata: columnKey,\n\t\t\t\ttitle: columnName,\n\t\t\t\tvisible: columnsVisibility.includes( columnKey )\n\t\t\t} );\n\t\t} );\n\n\t\t// If we have to add the \"Transcript\" column...\n\t\tif ( ulgmCourseReportShortcode.shouldAddTranscriptColumn ) {\n\t\t\t// Get index of the Transcript column\n\t\t\tconst transcriptColumnIndex = columns.findIndex( column => column.data == 'transcript_page_url' );\n\n\t\t\t// ...define the `render` callback to override the column value\n\t\t\tcolumnDefs = [\n\t\t\t\t{\n\t\t\t\t\t// The `data` parameter refers to the data for the cell (defined by the\n\t\t\t\t\t// `data` option, which defaults to the column being worked with, in\n\t\t\t\t\t// this case `data: 0`.\n\t\t\t\t\trender: function ( data, type, row ){\n\n\t\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\thref=\"${ ulgmCourseReportShortcode.transcriptPageURL }?user-id=${ row.user_id }\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${ ulgmRestApiSetup.localized.details }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`;\n\n\t\t\t\t\t},\n\t\t\t\t\ttargets: transcriptColumnIndex\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\tlet table = settings.oInstance.api();\n\t\t\tlet _this = this;\n\n\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${ulgmRestApiSetup.localized.customizeColumns}\" data-label-disable=\"${ulgmRestApiSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\n\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$( colFilter_container ).insertAfter( '#group-course-report-datatable_filter' );\n\t\t};\n\n\t\tvar buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\tcolumns: ( id, data, node ) => {\n                    return this.table.column( id ).visible();\n                },\n\n\t\t\t\tformat: {\n\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tfilename: function () {\n\t\t\t\tlet courseNamePrefix = 'Groups-Course-Report';\n\t\t\t\tlet $courseId = $('#uo-group-report-course').val();\n\t\t\t\tlet courseName = '-' + $(\"#uo-group-report-course option:selected\").text();\n\t\t\t\tlet name = '';\n\t\t\t\tif (typeof that.getUrlParameter('user_id') !== 'undefined') {\n\n\t\t\t\t\tname = that.$elements.courseReport.data('user_name');\n\n\t\t\t\t\tif (isNaN(name)) {\n\t\t\t\t\t\tname = '-for-user-' + name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = '-for-user-id-' + name;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn courseNamePrefix + name;\n\n\t\t\t\t} else if ('0' === $courseId) {\n\t\t\t\t\treturn courseNamePrefix;\n\t\t\t\t}\n\n\t\t\t\treturn courseNamePrefix + courseName;\n\t\t\t}\n\t\t};\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet tableOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmCourseReportShortcode.table.orderBy );\n\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( tableOrderByIndex === -1 ) {\n\t\t\ttableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date_completed' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( tableOrderByIndex !== -1 ) {\n\t\t\ttableOrder = [\n\t\t\t\t[\n\t\t\t\t\ttableOrderByIndex, // The ID of the column used to sort, defaults to `date_completed`\n\t\t\t\t\tulgmCourseReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet exportButtons = [];\n\t\tif ( ulgmCourseReportShortcode.showCSVExportButton ) {\n\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\textend: 'csv',\n\t\t\t\ttext: ulgmRestApiSetup.i18n.exportCSV,\n\t\t\t}) );\n\t\t}\n\t\tif ( ulgmCourseReportShortcode.showExcelExportButton ) {\n\t\t\texportButtons.push( $.extend(true, {}, buttonCommon, {\n\t\t\t\textend: 'excelHtml5',\n\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t}) );\n\t\t}\n\n\t\t// User table\n\t\tthis.table = this.$elements.courseReport.DataTable({\n\t\t\tstateSave: true,\n\t\t\tinitComplete: initComplete,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\tbuttons: exportButtons,\n\t\t\torder: tableOrder,\n\n\t\t\tcolumns: columns,\n\t\t\t\"columnDefs\": columnDefs,\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.localized.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.localized.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.localized.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.localized.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.localized.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.localized.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\taddColumnCourseCheckbox( label, column_key, is_visible, table ){\n\n\t\tvar checkbox = jQuery( '<input />', {\n\t\t\ttype: 'checkbox',\n\t\t\tid: 'dt_' + column_key,\n\t\t\tvalue: column_key,\n\t\t\tchecked: is_visible\n\t\t} );\n\n\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t// Get the column API object\n\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\tif (index == current_check) {\n\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\treturn $label;\n\t}\n\n\trestPopulateTable(){\n\n\t\tlet that                                       = this;\n\t\twindow.ulgmGroupManagement.populateReportTable = function ( data ){\n\n\t\t\tlet courseReport = that.$elements.courseReport.DataTable();\n\n\t\t\tcourseReport.clear().draw();\n\t\t\tcourseReport.rows.add( data.user_course_data ); // Add new data\n\t\t\tcourseReport.columns.adjust().draw(); // Redraw the DataTable\n\t\t\tcourseReport.responsive.recalc();\n\n\t\t\tvar items = window.ulgmGroupManagement.reportingTemplating.items = data.user_course_data;\n\n\t\t\tif (0 === items.length) {\n\t\t\t\t$( '#test' ).html( '<div class=\"uo-row uo-table-content uo-tbl-item body-row\"><div class=\"uo-table-no-results\">There are no records to display.</div></div>' );\n\t\t\t} else {\n\t\t\t\t$( '#test' ).closest( '.uo-groups-rest-result' ).show();\n\t\t\t\twindow.ulgmGroupManagement.reportingTemplating.setItems( items );\n\t\t\t}\n\t\t};\n\t}\n\n\tgetUrlParameter( sParam ){\n\t\tlet sPageURL      = window.location.search.substring( 1 ),\n\t\t\tsURLVariables = sPageURL.split( '&' ),\n\t\t\tsParameterName,\n\t\t\ti;\n\n\t\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\t\tsParameterName = sURLVariables[i].split( '=' );\n\n\t\t\tif (sParameterName[0] === sParam) {\n\t\t\t\treturn sParameterName[1] === undefined ? true : decodeURIComponent( sParameterName[1] );\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default GroupCourseReport;\n","const ElementQueries = require( 'css-element-queries/src/ElementQueries' );\n\nimport $ from 'jquery';\n\nimport {\n\tisDefined,\n\tisEmpty\n} from './utilities.js';\n\nclass CourseDashboard {\n\tconstructor(){\n\t\t// Check if the required container is defined\n\t\tif ( this.hasDashboard() ){\n\t\t\t// Init ResizeSensor\n\t\t\tElementQueries.init();\n\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Define global settings\n\t\t\tthis.defineSettings();\n\t\t\t\n\t\t\t// Create courses using the DOM elements\n\t\t\tthis.createCourses();\n\n\t\t\t// Add function to expand and collapse all containers\n\t\t\t// this.slideAll();\n\n\t\t\t// Listen filters\n\t\t\tthis.filters();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tfilters: {\n\t\t\t\tform:    $( '#ulg-manage-progress-filters-form' ),\n\t\t\t\tselects: $( '#ulg-manage-progress-filters-form select' )\n\t\t\t}\n\t\t}\n\t}\n\n\tdefineSettings(){\n\t\t// Create settings\n\t\tthis.settings = {\n\t\t\tslideToggleDuration: 300\n\t\t}\n\t}\n\n\tcreateCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t});\n\t}\n\n\thasDashboard(){\n\t\treturn $( '.ulg-manage-progress-courses' ).length > 0;\n\t}\n\n\tslideAll(){\n\t\t// Listen to the clicks on the buttons\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--expand-all' ).on( 'click', () => {\n\t\t\texpandAll();\n\t\t});\n\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--collapse-all' ).on( 'click', () => {\n\t\t\tcollapseAll();\n\t\t});\n\n\t\tconst expandAll = () => {\n\t\t\t// Get all the collapsed containers\n\t\t\tconst collapsedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( collapsedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tconst collapseAll = () => {\n\t\t\t// Get all the expanded containers\n\t\t\tconst expandedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( expandedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tfilters(){\n\t\t// Listen to changes\n\t\tthis.$elements.filters.selects.on( 'change', () => {\n\t\t\t// Submit form\n\t\t\tthis.$elements.filters.form.trigger( 'submit' );\n\t\t});\n\t}\n}\n\nclass Course {\n\tconstructor( $container, settings ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleCourseContent();\n\n\t\t// Create lessons using the DOM elements\n\t\tthis.createLessons();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId:       this.$elements.container.data( 'course-id' ),\n\t\t\tstatus:         this.$elements.container.data( 'status' ),\n\t\t\thasLessons:     !! parseInt( this.$elements.container.data( 'has-lessons' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !! parseInt( this.$elements.container.data( 'has-certificate' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-course--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-course--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-course--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-course--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-course__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-course__content' )\n\t\t}\n\t}\n\n\ttoggleCourseContent(){\n\t\t// Check if the course has lessons or quizzes\n\t\tif ( this.courseData.hasLessons || this.courseData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateLessons(){\n\t\t// Get all lessons\n\t\tconst $lessons = this.$elements.container.find( '.ulg-manage-progress-lesson' );\n\n\t\t// Create Courses\n\t\t$.each( $lessons, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Lesson( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-course__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Lesson {\n\tconstructor( $container, settings, courseData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save courseData\n\t\tthis.courseData = courseData;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleLessonContent();\n\n\t\t// Create topics using the DOM elements\n\t\tthis.createTopics();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlessonId:       this.$elements.container.data( 'lesson-id' ),\n\t\t\tavailableOn:    ! isEmpty( this.$elements.container.data( 'available-on' ) ) ? parseInt( this.$elements.container.data( 'available-on' ) ) : null,\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\tisAvailable:    !! parseInt( this.$elements.container.data( 'is-available' ) ),\n\t\t\thasTopics:      !! parseInt( this.$elements.container.data( 'has-topics' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-lesson--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-lesson--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-lesson--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-lesson--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-lesson__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-lesson__content' )\n\t\t}\n\t}\n\n\ttoggleLessonContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.lessonData.hasTopics || this.lessonData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateTopics(){\n\t\t// Get all topics\n\t\tconst $topics = this.$elements.container.find( '.ulg-manage-progress-topic' );\n\n\t\t// Create Courses\n\t\t$.each( $topics, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Topic( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-lesson__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Topic {\n\tconstructor( $container, settings, courseData, lessonData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save course data\n\t\tthis.courseData = courseData;\n\t\t// Save lesson data\n\t\tthis.lessonData = lessonData;\n\n\t\t// Get elements\n\t\tthis.getElements( $container );\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get lesson data\n\t\tthis.getTopicData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleTopicContent();\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-topic__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-topic__content' )\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlesson:         this.lessonData,\n\t\t\ttopicId:        this.$elements.container.data( 'topic-id' ),\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) )\n\t\t}\n\n\t\tdelete this.topicData.lesson.course;\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-topic--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-topic--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-topic--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-topic--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\ttoggleTopicContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.topicData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nexport default CourseDashboard;","let $ = jQuery;\n\nimport {\n\trestCall,\n\tisEmpty,\n\tisDefined\n} from './utilities.js';\n\nclass ManageProgress {\n\tconstructor(){\n\t\t// Check if there is a \"manage progress\" container\n\t\tif ( this.isManageProgress() ){\n\t\t\t// Check if the user can manage this progress\n\t\t\tif ( this.canManageProgress() ){\n\t\t\t\t// Set settings\n\t\t\t\tthis.setSettings();\n\n\t\t\t\t// Call to the functions that will add event listeners to the checkboxes\n\t\t\t\tthis.listenProgressChangesOnCourses();\n\t\t\t}\n\t\t}\n\t}\n\tsetSettings(){\n\t\tthis.settings = {}\n\t}\n\tlistenProgressChangesOnCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t} );\n\t}\n\n\tisManageProgress(){\n\t\treturn $( '.ulg-manage-progress--manage-progress' ).length > 0 && typeof ULGM_ManageProgress !== 'undefined';\n\t}\n\n\tcanManageProgress(){\n\t\treturn !! parseInt( ULGM_ManageProgress.canManageProgress );\n\t}\n}\nclass Course {\n\tconstructor( $course ){\n\n\t\t// Get elements\n\t\tthis.getElements( $course );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Create children\n\t\tthis.createChildren();\n\n\t\t// Listen clicks on the checkboxes\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $course ){\n\t\tthis.$elements = {\n\t\t\tcourse: $course,\n\t\t\tactions: $course.find( '.ulg-manage-progress-course__progress-actions' ),\n\t\t\tcheckbox: $course.find( '.ulg-manage-progress-course__progress-action-checkbox' ),\n\t\t\tcancel: $course.find( '.ulg-manage-progress-course__progress-action-cancel' ),\n\t\t\tprogress: {\n\t\t\t\tnumber: $course.find( '.ulg-manage-progress-course__progress-percentage span' ),\n\t\t\t\tbar: $course.find( '.ulg-manage-progress-course__progress-bar' )\n\t\t\t},\n\t\t\tlessons: $course.find( '.ulg-manage-progress-lesson' ),\n\t\t\tquizzes: $course.find( '.ulg-manage-progress-quiz' ),\n\t\t\ttopics: $course.find( '.ulg-manage-progress-topic' ),\n\t\t\trightContainer: $course.find( '.ulg-manage-progress-course__right' )\n\t\t}\n\t}\n\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId: this.$elements.course.data( 'course-id' ),\n\t\t\tstatus: this.$elements.course.data( 'status' ),\n\t\t\thasLessons: !!parseInt( this.$elements.course.data( 'has-lessons' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.course.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !!parseInt( this.$elements.course.data( 'has-certificate' ) ),\n\t\t}\n\n\t\t// Parse status\n\t\tthis.courseData.status = this.courseData.status.replace( '_', '-' );\n\t}\n\n\tcreateChildren(){\n\t\t// Create empty arrays\n\t\tthis.courseData.children = {\n\t\t\tlessons: [],\n\t\t\tquizzes: [],\n\t\t\ttopics: []\n\t\t}\n\n\t\t// Create lessons\n\t\t$.each( this.$elements.lessons, ( index, lesson ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $lesson = $( lesson );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.lessons.push( new Lesson( this, $lesson ) );\n\t\t} );\n\n\t\t// Create quizzes\n\t\t$.each( this.$elements.quizzes, ( index, quiz ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $quiz = $( quiz );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.quizzes.push( new Quiz( this, $quiz ) );\n\t\t} );\n\n\t\t// Create topics\n\t\t$.each( this.$elements.topics, ( index, topic ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $topic = $( topic );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.topics.push( new Topic( this, $topic ) );\n\t\t} );\n\n\t\t// Create object with all the children\n\t\tthis.courseData.children.all = [].concat( this.courseData.children.lessons, this.courseData.children.topics, this.courseData.children.quizzes )\n\t}\n\n\tsetProgress( percentage ){\n\t\t// Set new progress\n\t\tthis.$elements.progress.number.text( percentage );\n\t\tthis.$elements.progress.bar.css( {width: percentage} );\n\n\t\t// Set correct status class. First, remove all of them\n\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--not-started ulg-manage-progress-course--in-progress ulg-manage-progress-course--completed' );\n\n\t\t// Change status of the course\n\t\tif (percentage == 100) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'completed';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--completed' );\n\t\t} else if (percentage == 0) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'not-started';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--not-started' );\n\t\t} else {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'in-progress';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--in-progress' );\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-course__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-course__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.prepend( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (this.confirmationVisible) {\n\t\t\t\t// Do request call\n\t\t\t\tlet wantsToCompleteCourse = 0;\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// Check the current status\n\t\t\t\tif (['not-started', 'in-progress'].includes( this.courseData.status )) {\n\t\t\t\t\twantsToCompleteCourse = 1;\n\t\t\t\t}\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteCourse;\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteCourse;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.courseData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--loading' );\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Add certificate\n\t\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tcompleteCourseItems( completedChildren ){\n\t\t// Change the array to an object where the keys\n\t\t// are the IDs\n\t\tlet completedChildrenObj = {}\n\n\t\t// Check if the completedChildren is empty\n\t\tcompletedChildren = Object.keys( completedChildren ).length == 0 ? [] : completedChildren;\n\n\t\t// Iterate all children\n\t\tcompletedChildren.forEach( ( element ) => {\n\t\t\t// Add children to the object\n\t\t\tcompletedChildrenObj[element.ID] = element;\n\t\t} );\n\n\t\t// Iterate each children\n\t\t$.each( this.courseData.children.all, function ( index, child ){\n\t\t\t// Check if the current children is included in the list of\n\t\t\t// completed children\n\t\t\tlet shouldBeCompleted = isDefined( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// Mark all the children as not completed\n\t\t\tchild.markAsNotComplete( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// And then check if we have to completed it\n\t\t\tif (shouldBeCompleted) {\n\t\t\t\t// Complete\n\t\t\t\tchild.markAsComplete( completedChildrenObj[child.getTheId()] );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nclass Lesson {\n\tconstructor( Course, $lesson ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $lesson );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $lesson ){\n\t\tthis.$elements = {\n\t\t\tcourse: $lesson.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $lesson,\n\t\t\tactions: $lesson.find( '.ulg-manage-progress-lesson__progress-actions' ),\n\t\t\tcheckbox: $lesson.find( '.ulg-manage-progress-lesson__progress-action-checkbox' ),\n\t\t\tcancel: $lesson.find( '.ulg-manage-progress-lesson__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tlessonId: this.$elements.lesson.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.lesson.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.lesson.data( 'is-completed' ),\n\t\t\thasTopics: !!parseInt( this.$elements.lesson.data( 'has-topics' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.lesson.data( 'has-quizzes' ) ),\n\t\t}\n\n\t\t// Check if it has children\n\t\tthis.lessonData.hasChildren = this.lessonData.hasTopics || this.lessonData.hasQuizzes;\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (!this.lessonData.hasChildren || this.confirmationVisible) {\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the lesson\n\t\t\t\t// If the lesson is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteLesson = Number( !this.lessonData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tif (lesson.lessonData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif (quiz.quizData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteLesson;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// console.log(\n\t\t\t\t// \t{\n\t\t\t\t// \t\tlessons: lessons,\n\t\t\t\t// \t\ttopics: topics,\n\t\t\t\t// \t\tquizzes: quizzes,\n\n\t\t\t\t// \t}\n\t\t\t\t// );\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.lessonData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.lessonData.isCompleted = wantsToCompleteLesson;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--not-completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', true );\n\t\tthis.lessonData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', false );\n\t\tthis.lessonData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.lessonData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.lessonData.lessonId;\n\t}\n}\n\nclass Topic {\n\tconstructor( Course, $topic ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $topic );\n\n\t\t// Get topic data\n\t\tthis.getTopicData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $topic ){\n\t\tthis.$elements = {\n\t\t\tcourse: $topic.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $topic.closest( '.ulg-manage-progress-lesson' ),\n\t\t\ttopic: $topic,\n\t\t\tactions: $topic.find( '.ulg-manage-progress-topic__progress-actions' ),\n\t\t\tcheckbox: $topic.find( '.ulg-manage-progress-topic__progress-action-checkbox' ),\n\t\t\tcancel: $topic.find( '.ulg-manage-progress-topic__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\ttopicId:     this.$elements.topic.data( 'topic-id' ),\n\t\t\tlessonId:    this.$elements.topic.data( 'lesson-id' ),\n\t\t\tcourseId:    this.$elements.topic.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.topic.data( 'is-completed' ),\n\t\t\thasQuizzes:  this.$elements.topic.data( 'has-quizzes' ),\n\t\t\thasChildren: this.$elements.topic.data( 'has-quizzes' ),\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif ( ! this.topicData.hasChildren || this.confirmationVisible ){\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the topic\n\t\t\t\t// If the topic is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteTopic = Number( ! this.topicData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif ( quiz.quizData.topicId === this.topicData.topicId ){\n\t\t\t\t\t\tquizzes[ quiz.quizData.quizId ] = wantsToCompleteTopic;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteTopic;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteTopic;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.topicData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.topicData.isCompleted = wantsToCompleteTopic;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif ( response.success ){\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--not-completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', true );\n\t\tthis.topicData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', false );\n\t\tthis.topicData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.topicData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.topicData.topicId;\n\t}\n}\n\nclass Quiz {\n\tconstructor( Course, $quiz ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $quiz );\n\n\t\t// Get quiz data\n\t\tthis.getQuizData();\n\n\t\t// Listen to checkbox changes\n\t\tthis.listenCheckboxChanges();\n\t}\n\n\tgetElements( $quiz ){\n\t\tthis.$elements = {\n\t\t\tcourse: $quiz.closest( '.ulg-manage-progress-course' ),\n\t\t\tquiz: $quiz,\n\t\t\tactions: $quiz.find( '.ulg-manage-progress-quiz__progress-actions' ),\n\t\t\tcheckbox: $quiz.find( '.ulg-manage-progress-quiz__progress-action-checkbox' ),\n\t\t\tcancel: $quiz.find( '.ulg-manage-progress-quiz__progress-action-cancel' ),\n\t\t\trightContainer: $quiz.find( '.ulg-manage-progress-quiz__right' )\n\t\t}\n\t}\n\n\tgetQuizData(){\n\t\tthis.quizData = {\n\t\t\tquizId: this.$elements.quiz.data( 'quiz-id' ),\n\t\t\tlessonId: this.$elements.quiz.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.quiz.data( 'course-id' ),\n\t\t\ttopicId: this.$elements.quiz.data( 'topic-id' ),\n\t\t\tisCompleted: this.$elements.quiz.data( 'is-completed' ),\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl = null ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-quiz__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-quiz__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.append( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\n\t\t\t// Determine action.\n\t\t\tconst $checkbox = $( event.currentTarget );\n\t\t\tconst dataAction = $checkbox.data( 'action' );\n\n\t\t\t// Check if it wants to complete or not the quiz\n\t\t\t// If the quiz is not completed then the user wants to complete it, if\n\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\tlet wantsToCompleteQuiz = Number( ! this.quizData.isCompleted );\n\t\t\tlet resetQuizAttempts   = 0;\n\n\t\t\t// Check if we are unchecking the checkbox.\n\t\t\tif( 'quiz-maybe-confirm' === dataAction ){\n\t\t\t\tif ( ! wantsToCompleteQuiz ) {\n\t\t\t\t\tthis.confirmChanges();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Check if reset quiz attempts.\n\t\t\t\tif ( 'quiz-reset-yes' === dataAction ) {\n\t\t\t\t\tresetQuizAttempts = this.quizData.quizId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do request call\n\n\t\t\t// Add loading class to the actions container\n\t\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--loading' );\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-quiz__progress-actions--need-to-confirm' );\n\n\t\t\tlet lessons = {};\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t} );\n\n\t\t\tlet topics  = {};\n\t\t\tlet quizzes = {};\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\tif (quiz.quizData.quizId === this.quizData.quizId) {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteQuiz;\n\t\t\t\t} else {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t}\n\n\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t} );\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t}\n\n\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\n\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t}\n\n\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\tif (topic.topicData.topicId === this.quizData.topicId) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteQuiz;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Temporal fix\n\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t// Do REST call\n\t\t\trestCall( {\n\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\tdata: {\n\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\trest_course_id: this.quizData.courseId,\n\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\trest_topics: topics,\n\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\trest_quiz_reset: resetQuizAttempts,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t},\n\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--loading' );\n\n\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\tthis.quizData.isCompleted = wantsToCompleteQuiz;\n\n\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t// Temporal fix\n\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t},\n\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t// Check response\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Set certificate\n\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t// Debug\n\t\t\t\t\tconsole.error( response );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-quiz__progress-actions--need-to-confirm' );\n\t}\n\n\tmarkAsComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate( childrenData.certificate_url );\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--not-completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', true );\n\t\tthis.quizData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate();\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', false );\n\t\tthis.quizData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.quizData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.quizData.quizId;\n\t}\n}\n\nexport default ManageProgress;\n","import $ from 'jquery';\n\nimport {\n\tdestroyiCheck,\n\tformatNumber\n} from './utilities';\n\nclass BuyCourses {\n\tconstructor(){\n\t\t// Check if we have to invoke the methods\n\t\tif ( this.isBuyCourses() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get configuration\n\t\t\tthis.getConfiguration();\n\n\t\t\t// Destroy iCheck checkboxes\n\t\t\tdestroyiCheck();\n\n\t\t\t// Listen changes in the checkboxes\n\t\t\tthis.modifyCourses();\n\n\t\t\t// Listen changes to the quantity field\n\t\t\tthis.listenQuantityChanges();\n\n\t\t\t// Listen the form submission\n\t\t\tthis.listenFormSubmission();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tform:               $( '#uo-groups-buy-courses' ),\n\t\t\terrorNotice:        $( '#uo-groups-buy-course-error-notice' ),\n\t\t\tfield: {\n\t\t\t\tquantity:       $( '#uo-groups-buy-course-field-quantity' ),\n\t\t\t},\n\t\t\ttotals: {\n\t\t\t\tsubtotal:       $( '#uo-groups-buy-course-totals-subtotal' ),\n\t\t\t\tdiscount: {\n\t\t\t\t\tpercentage: $( '#uo-groups-buy-course-totals-discount-percentage' ),\n\t\t\t\t\ttotal:      $( '#uo-groups-buy-course-totals-discount' ),\n\t\t\t\t},\n\t\t\t\ttotal:          $( '#uo-groups-buy-course-totals-total' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tgetConfiguration(){\n\t\t// Get bulk discount configuration\n\t\tlet bulkDiscountData = this.$elements.form.data( 'bulk-discount' );\n\t\t// Check if it's bulk discount is enabled\n\t\tlet bulkDiscountEnabled = bulkDiscountData.enabled == 'yes';\n\t\t// Check if there are discount groups\n\t\tbulkDiscountData.discounts = typeof bulkDiscountData.discounts !== 'undefined' ? bulkDiscountData.discounts : {};\n\t\t// Get discount groups\n\t\tlet bulkDiscountGroups = [];\n\t\t$.each( Object.values( bulkDiscountData.discounts ), ( index, group ) => {\n\t\t\tbulkDiscountGroups.push({\n\t\t\t\tminimumQuantity: parseInt( group.qty ),\n\t\t\t\tpercentage: parseFloat( group.percent )\n\t\t\t});\n\t\t});\n\n\t\t// Get configuration\n\t\tthis.config = {\n\t\t\tbulkDiscount: {\n\t\t\t\tenabled: bulkDiscountEnabled,\n\t\t\t\tgroups:  bulkDiscountGroups\n\t\t\t},\n\t\t\tformatPrice: {\n\t\t\t\ttemplate:          ULG_BuyCourses.formatPrice.template,\n\t\t\t\tnumberOfDecimals:  ULG_BuyCourses.formatPrice.numberOfDecimals,\n\t\t\t\tthousandSeparator: ULG_BuyCourses.formatPrice.thousandSeparator,\n\t\t\t\tdecimalSeparator:  ULG_BuyCourses.formatPrice.decimalSeparator,\n\t\t\t}\n\t\t}\n\n\t\t// Get totals\n\t\tthis.totals = {\n\t\t\tnumberOfSeats: 0,\n\t\t\tnumberOfStudents: 0,\n\t\t\tsubtotal: 0,\n\t\t\tdiscount: {\n\t\t\t\tpercentage: 0,\n\t\t\t\ttotal: 0\n\t\t\t},\n\t\t\ttotal: 0\n\t\t}\n\t}\n\n\tmodifyCourses(){\n\t\t// Listen changes to the checkboxes\n\t\tthis.$elements.form.on( 'change', '.uo-checkbox input', ( event ) => {\n\t\t\t// Get checkbox\n\t\t\tconst $checkbox = $( event.currentTarget );\n\n\t\t\t// Get row\n\t\t\tconst $row = $checkbox.closest( '.uo-groups-table-row' );\n\n\t\t\t// Toggle selected class\n\t\t\t$row.toggleClass( 'uo-groups-table-row--selected' );\n\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tlistenFormSubmission(){\n\t\t// Listen form submission\n\t\tthis.$elements.form.on( 'submit', ( event ) => {\n\t\t\t// Validate\n\t\t\tconst validation = this.validate();\n\n\t\t\t// Show (or not) the error notice\n\t\t\tthis.errorNotice( ! validation.isValid, validation.message );\n\n\t\t\t// Check if it's not valid\n\t\t\tif ( ! validation.isValid ){\n\t\t\t\t// Prevent default\n\t\t\t\tevent.preventDefault();\n\t\t\t}\t\n\t\t});\n\t}\n\n\tlistenQuantityChanges(){\n\t\t// Listen quantity changes\n\t\tthis.$elements.field.quantity.on( 'input', () => {\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tgetTotals(){\n\t\t// Get and update number of selected courses\n\t\tconst $selectedCourses = this.$elements.form.find( '.uo-checkbox input:checked' );\n\t\t// Update totals\n\t\tthis.totals.numberOfSeats = parseInt( this.$elements.field.quantity.val() );\n\t\t// Check if the number if valid\n\t\tthis.totals.numberOfSeats = isNaN( this.totals.numberOfSeats ) ? 1 : this.totals.numberOfSeats;\n\n\t\t// Get number of students\n\t\tlet numberOfStudents = this.$elements.field.quantity.val();\n\t\t// Update totals\n\t\tthis.totals.numberOfStudents = parseInt( numberOfStudents );\n\n\t\t// Get the number of selected courses\n\t\tthis.totals.numberOfCourses = $selectedCourses.length;\n\n\t\t// Get subtotal\n\t\tlet subtotal = numberOfStudents * $selectedCourses.toArray().reduce(( accumulator, course ) => {\n\t\t\t// Get jQuery object of the course\n\t\t\tconst $course = $( course );\n\n\t\t\t// Get price\n\t\t\tconst price = parseFloat( $course.data( 'price' ) );\n\n\t\t\t// Add price to the accumulator\n\t\t\treturn accumulator + price;\n\t\t}, 0 );\n\t\t// Update totals\n\t\tthis.totals.subtotal = subtotal;\n\n\t\t// Get discount\n\t\t// Get discount group\n\t\tconst discountGroup = this.getDiscountPercentage();\n\t\t// Get discount\n\t\tlet discount = -1 * subtotal * discountGroup.percentage / 100;\n\t\t// Update totals\n\t\tthis.totals.discount.percentage = discountGroup.percentage;\n\t\tthis.totals.discount.total = discount;\n\n\t\t// Get total\n\t\tlet total = subtotal + discount;\n\t\ttotal = total > 0 ? total : 0;\n\t\t// Update totals\n\t\tthis.totals.total = total;\n\t}\n\n\tgetDiscountPercentage(){\n\t\t// We will get what discount we have to apply\n\t\t// To do that, we're going to find the discount group\n\t\t// using the current number of selected groups, searching\n\t\t// for the group with the highest minimum\n\t\tlet discountGroup = {\n\t\t\tminimumQuantity: 0,\n\t\t\tpercentage: 0\n\t\t}\n\n\t\t// Check if the user has discount groups\n\t\tif ( this.config.bulkDiscount.enabled ){\n\t\t\t// Iterate groups\n\t\t\t$.each( this.config.bulkDiscount.groups, ( index, group ) => {\n\t\t\t\t// Check if the minimum is lower (or equal) than our number of seats\n\t\t\t\tif ( group.minimumQuantity <= this.totals.numberOfSeats ){\n\t\t\t\t\t// Save group\n\t\t\t\t\tdiscountGroup = group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Return group\n\t\treturn discountGroup;\n\t}\n\n\tupdateTotals(){\n\t\t// Get totals\n\t\tthis.getTotals();\n\n\t\t// Update subtotal\n\t\tthis.$elements.totals.subtotal.html( this.formatPrice( this.totals.subtotal ) );\n\t\t\n\t\t// Update discount\n\t\t// If it's 0, remove percentage from the DOM\n\t\tif ( this.totals.discount.percentage == 0 ){\n\t\t\tthis.$elements.totals.discount.percentage.text( '' );\n\t\t}\n\t\t// Otherwise, add it\n\t\telse {\n\t\t\tthis.$elements.totals.discount.percentage.text( `${ this.totals.discount.percentage }% - ` );\n\t\t}\n\t\tthis.$elements.totals.discount.total.html( this.formatPrice( this.totals.discount.total ) );\n\n\t\t// Update total\n\t\tthis.$elements.totals.total.html( this.formatPrice( this.totals.total ) );\n\n\t\t// Add updated class\n\t\tthis.$elements.form.addClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t// Remove class after 150ms\n\t\tsetTimeout(() => {\n\t\t\tthis.$elements.form.removeClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t}, 150 );\n\t}\n\n\tvalidate(){\n\t\t// Default value\n\t\tlet response = {\n\t\t\tisValid: false,\n\t\t\tmessage: ''\n\t\t};\n\n\t\t// Check if there is at least one course selected\n\t\tif ( this.totals.numberOfSeats > 0 && this.totals.numberOfCourses > 0 ){\n\t\t\t// Update validation\n\t\t\tresponse.isValid = true;\n\t\t}\n\t\telse {\n\t\t\t// Otherwise, add message\n\t\t\tresponse.message = ULG_BuyCourses.i18n.selectAtLeastOne;\n\t\t}\n\n\t\t// Return response\n\t\treturn response;\n\t}\n\n\terrorNotice( hasError = false, message = '' ){\n\t\t// Check if we have to show or hide the notice\n\t\tif ( hasError ){\n\t\t\t// Show notice\n\t\t\tthis.$elements.errorNotice.show().html( message );\n\t\t}\n\t\telse {\n\t\t\t// Hide notice\n\t\t\tthis.$elements.errorNotice.hide();\n\t\t}\n\t}\n\n\tformatPrice( price ){\n\t\t// Get price format\n\t\tconst $price = $( this.config.formatPrice.template );\n\n\t\t// Replace dummy price with real price\n\t\t$price.html(( index, oldHtml ) => {\n\t\t\t// Get the number of wc_price( 0 )\n\t\t\tconst dummyPrice = formatNumber( 0, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Format real price\n\t\t\tconst priceFormatted = formatNumber( price, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Replace text\n\t\t\treturn oldHtml.replace( dummyPrice, priceFormatted );  \n\t\t});\n\n\t\t// Check if the price is negative\n\t\tif ( price < 0 ){\n\t\t\t// Add minus character\n\t\t\t$price.prepend( '-' );\n\t\t}\n\n\t\t// Return price jQuery element\n\t\treturn $price;\n\t}\n\n\tisBuyCourses(){\n\t\treturn $( '#uo-groups-buy-courses' ).length == 1 && typeof ULG_BuyCourses !== 'undefined';\n\t}\n}\n\nexport default BuyCourses;","import $ from 'jquery';\n\nclass CreateGroup {\n\tconstructor(){\n\t\t// Check if the page has the [uo_groups_create_group] \n\t\t// shortcode, or the respective Gutenberg block\n\t\tif ( this.isCreateGroup() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Add multi-select pillbox to the\n\t\t\t// \"Group Courses\" field\n\t\t\tthis.addPillboxToGroupCourses();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tcoursesList: $( '#ulg-create-group__courses-list' )\n\t\t}\n\t}\n\n\t/**\n\t * Add multi-select pillbox to the\n\t * \"Group Courses\" field\n\t */\n\taddPillboxToGroupCourses(){\n\t\tthis.$elements.coursesList.select2({\n\t\t\ttheme: 'default ulg-select2'\n\t\t});\n\t}\n\n\t/**\n\t * Check if the page has the [uo_groups_create_group] \n\t * shortcode, or the respective Gutenberg block\n\t */\n\tisCreateGroup(){\n\t\treturn $( '#ulg-create-group' ).length == 1;\n\t}\n}\n\nexport default CreateGroup;","import './js/define-main-object.js';\n\nimport './js/ulgm-rest-forms.js';\nimport './js/ulgm-assignments.js';\nimport './js/ulgm-essays.js';\nimport './js/ulgm-reporting.js';\nimport './js/front.js';\nimport './js/learndash_template_script.js';\nimport './js/uncanny-owl-groups-ui.js';\n\nimport GroupManagement from './js/group-management.js';\nimport GroupCourseReport from './js/group-course-report.js';\nimport CourseDashboard from './js/course-dashboard.js';\nimport ManageProgress from './js/manage-progress.js';\nimport BuyCourses from './js/buy-courses.js';\nimport CreateGroup from './js/create-group.js';\n\nimport './scss/main.scss';\n\n// Do on DOM ready\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tnew GroupManagement();\n\tnew GroupCourseReport();\n\tnew CourseDashboard();\n\tnew ManageProgress();\n\tnew BuyCourses();\n\tnew CreateGroup();\n});\n"],"names":["window","ulgmGroupManagement","jQuery","$","accountSwitch","length","attr","parent","hide","show","String","prototype","toHHMMSS","sec_numb","parseInt","this","hours","Math","floor","minutes","seconds","f1","f2","css","undefined","replace","document","ready","timer_el","timer_seconds","timer_button_el","cookie_key","cookie_name","cookie_timer_seconds","cookie","removeCookie","learndash_timer_var","setInterval","time_display","toString","html","clearInterval","trigger","sfwd_data","json","parseJSON","on","e","_this","addressValue","indexOf","groupLeaderCourseReportSetup","preventDefault","dataVars","essayUrl","ajax","method","data","url","root","beforeSend","xhr","setRequestHeader","nonce","success","response","essay","append","fail","alert","refId","quizId","userId","statistic_nonce","action","groupQuizReportSetup","statistic_action","ULGM_ManageProgress","post_data","content","type","ajaxurl","dataType","cache","error","jqXHR","textStatus","errorThrown","reply_data","remove","find","click","parents","next","toggle","transitionTimeout","Assignments","constructor","assignment_id","val","serialize","actionsAssignment","post_id","editAssignmentsData","saveAssignmentsData","mouseenter","clearTimeout","focusedRowActions","not","removeClass","addClass","mouseleave","setTimeout","uoTable","uoTableHidden","lessonId","groupId","courseId","status","elements","select","group","element","options","course","no_element","lesson","createTable","createTableHidden","addEvents","getAssignmentsData","$table","getElementById","columns","title","className","groupAssignments","localized","name","visible","columns_visibilities","student","first_name","last_name","author","orderable","points","assignedCourse","assignedlesson","comments","date","buttonsShared","exportOptions","id","node","matches","column","format","body","row","classList","contains","querySelector","i18n","notApproved","innerText","trim","filename","filenameParts","reportBaseName","forEach","filterID","$filter","filterValue","value","push","join","reportButtons","dataset","csv","Object","assign","extend","text","exportCSV","excel","exportExcel","tableVars","aLengthMenu","all","responsive","iDisplayLength","columnDefs","full","meta","style","selector","stateSave","dom","buttons","destroy","language","processing","search","searchPlaceholder","lengthMenu","info","infoEmpty","infoFiltered","infoPostFix","loadingRecords","zeroRecords","emptyTable","paginate","first","previous","last","aria","sortAscending","sortDescending","initComplete","s","d","approveAssignments","deleteAssignments","insertAfter","addColumnsFilter","tableOrder","tableOrderByIndex","findIndex","columnData","ulgmAssignmentReportShortcode","table","orderBy","order","DataTable","fn","dataTable","ColReorder","buttonCommon","csvExport","isDataTable","flattenArray","array","remove_stats","flatArray","each","key","question","key2","value2","state","colFilter_container","sInstance","customizeColumns","hideCustomizeColumns","__this","oSavedState","aoColumns","sTitle","addColumnCheckbox","bVisible","label","column_key","is_visible","checkbox","checked","headers","header","current_check","is_checked","is","selectot","adjust","recalc","create_options","source","ids","map","Number","$this","select_option","$select","prop","__select_option","index","el","get","indeterminate","group_id","empty","options_course","courses_to_show","courseGrouplessons","removeAttr","course_id","lessons_to_show","relationships","lesson_id","tr","closest","child","isShown","rows","answer","isNormalInteger","str","n","spinner","i","loading","Array","postId","post_type","security","ajax_nonce","modal","appendTo","fieldField","off","message","Essays","essay_id","input_essay_points","essay_points","parseFloat","min","max","isNaN","groupEssays","invalid_points_input","focus","actionsEssays","editEssaysData","saveEssaysData","quiz","ulgmEssayReportShortcode","loadOnRender","getEssaysData","getParam","results","RegExp","exec","location","decodeURIComponent","idColumn","question_text","assignedquiz","ungraded","$input","targets","draw","clone","filter","submit","options_quiz","reduce","accumulator","currentValue","$noResultsOption","isArray","quizzes_to_show","quiz_relationships","options_quizzes","current_quiz_id","group_quizzes","lesson_quizzes","course_quizzes","ommitted_group_quizzes","omitted_topic_quizzes","keys","values","hasOwnProperty","includes","concat","quiz_id","tinymce","edId","tinyMCE","editors","save","Function","gm_modal_message","reportingTemplating","quizReport","select2","rowTemplate","itemTemplate","liTemplate","items","itemsEl","jpL","split","setItems","item","render","props","tok","populateCoursesDropDown","courseDropDown","group_courses","ulgmRestApiSetup","selectCourse","ID","post_title","$elements","filters","dispatchEvent","Event","initSelect2","$element","console","ulgmQuizReportShortcode","columnsVisibility","columnsConfig","entries","searchable","defaultContent","settings","oInstance","api","col","configKey","addColumnCourseCheckbox","tableLanguage","exportButtons","showCSVExportButton","showExcelExportButton","every","addEventListener","event","setLoading","$dropdown","isLoading","setOptions","placeholder","coursePlaceholder","setAttribute","quizPlaceholder","clear","getQuizData","groupQuizReportSetupScoreType","dropdownSettings","innerHTML","noResults","add","insertAdjacentHTML","option","$wrapper","removeAttribute","scoreType","reporting","groupLeaderId","getGroupCourses","getQueryVariable","createCourseDropDown","courses","createUserDropDown","users","posts","dropDown","post_count","noCourse","post","selectUser","noUsers","user","display_name","trunc","variable","vars","substring","pair","file_frame","restForms","wp","media","frames","button","multiple","attachment","toJSON","open","addFormSubmitEvents","wpColorPicker","err","makeAjaxCall","endPoint","restData","associatedForm","$error_container","uploadedUsers","uploaded_users","statusCode","youCantDoThat","href","encodeURIComponent","reload","test","slice","origin","pathname","hash","call_function","function_vars","endpoint","documentElement","animate","scrollTop","offset","top","total_rows","log","entry","createElement","emailCol","statusCol","email","reason","appendChild","resultsDiv","completed","sendRestCall","selected_value","_currentTarget","currentTarget","onsubmit","checkValidity","fields","serializeArray","field","reportValidity","serializeObject","o","a","ResizeSensor","ElementQueries","cssStyleElement","allQueries","idToSelectorMapping","getEmSize","fontSize","getComputedStyle","convertToPx","numbers","units","clientWidth","clientHeight","vw","vh","chooser","SetupInformation","elementSize","actualValue","attrValues","attrValue","attrName","attributes","call","getBoundingClientRect","width","offsetWidth","height","offsetHeight","rect","round","getElementSize","property","mode","k","substr","setupElement","elementQueriesSetupInformation","elementQueriesSensor","queueQuery","getQuery","container","query","querySelectorAll","bind","$$","attachResponsiveImage","children","rules","sources","defaultImageId","lastActiveImage","loadedImages","tagName","toLowerCase","minWidth","getAttribute","src","rule","display","check","imageToDisplay","image","Image","onload","resizeSensorInstance","regex","attrRegex","extractQuery","match","smatch","attrs","attrMatch","readRules","j","selectorText","cssText","cssRules","styleSheet","defaultCssInjected","init","animationStart","target","styles","animationName","getPropertyValue","resizeSensor","getElementsByTagName","styleSheets","warn","findResponsiveImages","findElementQueriesElements","update","instance","detach","listen","callback","navigator","userAgent","DOMLoadTimer","readyState","domLoaded","globalWindow","self","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","timer","forEachElement","elementsType","isCollectionTyped","Elements","setStyle","lastAnimationFrameForInvisibleCheck","EventQueue","q","ev","sizeInfo","newQueue","attachResizeEvent","resized","resizedAttached","dir","pointerEvents","position","left","right","bottom","overflow","zIndex","visibility","maxWidth","styleChild","transition","expand","expandChild","shrink","shrinkChild","computedStyle","dirty","rafId","size","lastWidth","lastHeight","initialHiddenCheck","reset","scrollLeft","resetSensor","onResized","onScroll","addEvent","cb","attachEvent","elem","removeChild","MutationObserver","observer","mutations","addedNodes","observe","childList","subtree","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","getter","__esModule","definition","defineProperty","enumerable","obj","restCall","parameters","doing_rest","isDefined","onDone","onSuccess","onFail","isEmpty","isObject","formatNumber","amount","decimalCount","decimal","thousands","abs","toFixed","destroyiCheck","iCheck","progress_report","closest_group","direction","execCommand","slideToggle","group_leaders_checkboxes","btn_add_leader","unbind_click_outside","unbind_escape_button","$currentButton","dropdownDirection","$targetGroup","hasClass","has","ux_buttons","change","GroupManagement","isGroupManagement","EnrolledUsersTable","EmailUsers","groupManagementModal","modals","CustomEvent","editor","initialize","min_height","formats","alignleft","textAlign","classes","aligncenter","alignright","strikethrough","inline","toolbar1","plugins","quicktags","addGroupManagementEvents","openModal","parseCsv","modalContainer","downloadCsv","blob","Blob","csvDataString","saveAs","fileName","modalId","x","is_editable","input","messageContainer","reader","FileReader","ulgmGroupManagementLocalized","file_api_is_not_supported","file","files","csvText","pop","select_a_csv","readAsText","result","csv_file_error","csvArray","csvHead","shift","delimiter","incompatible_format","emailIndex","verifyRequiredHeader","not_contains_email","not_contains_first","not_contains_last","newArray","mapper","v","verifyEmptyRows","must_contain_email","choose_file","headerArray","columnsAmount","columnIndex","handleOpenDialog","handleFieldUpdates","$groupIDHiddenField","$coursesDropdown","statuses","$courseStatuses","include_children","$includeChildrenCheckbox","updateUserCount","$userCountCounter","fetch","param","emailUsersFormData","then","userCount","$checkbox","hasEnrolledUsersTable","getElements","getData","addSelect2","createDataTables","listenCheckboxToSelectAll","listenCheckboxesChanges","updateDataOnModal","firstLastNamesRequired","selectEl","enrolledUsersTableDT","enrolledLeaderTableDT","removeUsersButton","removeLeadersButton","sendEmailsButton","numberOfUsers","sendEmailsModal","sendEmailsField","removeUsersField","emailUsersCoursesDropdown","select2Options","dropdownParent","parentNode","emailUsersCourses","optionAllCoursesValue","hadWeChangedCoursesValues","selectedCourses","latestChangedOption","courseID","wasLastOptionAdded","isOptionAllCoursesSelected","canRemoveUsers","canRemoveUsersAnytime","ulgmGroupLeaderData","selectedUsers","selectedLeaders","ext","b","textA","textContent","textB","localeCompare","userColumns","enrolled_user_columns","populate_management_features","unshift","check_all","groupName","enrolledUsersOrder","enrolledUsersOrderByIndex","ulgmGroupManagementShortcode","tables","enrolledUsers","userTable","userTableVars","enrolled_user_data","searchDelay","pageLength","serverSide","createdRow","dataIndex","status_id","$fakeExportCSV","$fakeExportExcel","$realExportCSV","createEvent","initEvent","$realExportExcel","leaderColumns","enrolled_leader_columns","groupLeadersOrder","groupLeadersOrderByIndex","groupLeaders","leaderTable","leaderTableVars","enrolled_leader_data","checkAllEl","isChecked","$allCheckboxes","updateSelectedUsers","evaluateRemoveUsersButtonVisiblity","evaluateRemoveLeadersButtonVisiblity","evaluateSendEmailsButtonVisiblity","$allUserCheckboxes","$allLeaderCheckboxes","allCheckedCheckboxes","leaders","$checkedCheckboxes","$row","progressIsNotStarted","showRemoveUsersButton","showRemoveLeadersButton","groupLeaderIds","JSON","stringify","userIds","firstnameLastnameRequired","requiredSelectors","$emailField","func","lastCall","emailValue","$rowElements","firstName","lastName","emailAddress","args","arguments","apply","GroupCourseReport","isCourseReport","CourseReportTable","restPopulateTable","courseReport","groupID","that","ulgmCourseReportShortcode","shouldAddTranscriptColumn","tableColumns","transcript_page_url","columnKey","columnName","transcriptPageURL","user_id","details","courseNamePrefix","$courseId","courseName","getUrlParameter","populateReportTable","user_course_data","sParam","sParameterName","sURLVariables","require","CourseDashboard","hasDashboard","defineSettings","createCourses","form","selects","slideToggleDuration","$courses","Course","expandAll","collapseAll","lessons","topic","elementType","$containers","$container","dashboardSettings","defineCssClasses","getCourseData","toggleCourseContent","createLessons","courseData","hasLessons","hasQuizzes","hasCertificate","cssClasses","collapsed","collapsing","expanding","expanded","toggleBtn","isCollapsed","setToggleClass","slideDown","slideUp","$lessons","Lesson","$quizzesContainers","Quizzes","getLessonData","toggleLessonContent","createTopics","lessonData","availableOn","isCompleted","isAvailable","hasTopics","$topics","Topic","getTopicData","toggleTopicContent","topicData","topicId","ManageProgress","isManageProgress","canManageProgress","setSettings","listenProgressChangesOnCourses","$course","createChildren","listenCheckboxChanges","confirmationVisible","actions","cancel","progress","number","bar","quizzes","topics","rightContainer","$lesson","$quiz","Quiz","$topic","percentage","certificateUrl","$certificateButton","certificate","prepend","wantsToCompleteCourse","quizData","topic_quizzes","topic_quizzes_string","_topic","_topic_id","restUrl","rest_user_id","rest_course_id","rest_lessons","rest_topics","rest_quizzes","postNonce","setProgress","setCertificate","certificate_url","completeCourseItems","course_completed_children","confirmChanges","completedChildren","completedChildrenObj","shouldBeCompleted","getTheId","markAsNotComplete","markAsComplete","hasChildren","wantsToCompleteLesson","wantsToCompleteTopic","dataAction","wantsToCompleteQuiz","resetQuizAttempts","rest_quiz_reset","childrenData","BuyCourses","isBuyCourses","getConfiguration","modifyCourses","listenQuantityChanges","listenFormSubmission","errorNotice","quantity","totals","subtotal","discount","total","bulkDiscountData","bulkDiscountEnabled","enabled","discounts","bulkDiscountGroups","minimumQuantity","qty","percent","config","bulkDiscount","groups","formatPrice","template","ULG_BuyCourses","numberOfDecimals","thousandSeparator","decimalSeparator","numberOfSeats","numberOfStudents","toggleClass","updateTotals","validation","validate","isValid","$selectedCourses","numberOfCourses","toArray","discountGroup","getDiscountPercentage","getTotals","selectAtLeastOne","hasError","price","$price","oldHtml","dummyPrice","priceFormatted","CreateGroup","isCreateGroup","addPillboxToGroupCourses","coursesList","theme"],"sourceRoot":""}