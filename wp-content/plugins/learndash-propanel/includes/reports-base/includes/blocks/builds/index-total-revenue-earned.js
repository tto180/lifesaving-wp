(()=>{"use strict";var e={5792:(e,t,a)=>{a.d(t,{c:()=>l});var r=a(1280),n=a.n(r),s=a(3396);class d extends n().Component{constructor(e){super(e)}render(){let e="",t="";return 1==this.props.text&&(t=(0,r.createElement)("span",{className:"supporting-text"},(0,s.__)("Your report is being generated.","learndash-reports-pro"))),e=(0,r.createElement)("div",{className:"wisdm-learndash-reports-chart-block"},(0,r.createElement)("div",{className:"wisdm-learndash-reports-revenue-from-courses graph-card-container"},(0,r.createElement)("div",{className:"wisdm-graph-loading"},(0,r.createElement)("img",{src:wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/loader.svg"}),t))),e}}const l=d},1280:e=>{e.exports=window.React},3396:e=>{e.exports=window.wp.i18n}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=a(1280),t=a.n(e),r=a(5792);const n=window.moment;var s=a.n(n),d=a(3396);const l=window.wp.element;class o extends e.Component{constructor(e){super(e),this.state={isLoaded:!1,error:null,start_date:s()(new Date(wisdm_ld_reports_common_script_data.start_date)).unix(),end_date:s()(new Date(wisdm_ld_reports_common_script_data.end_date)).unix()},this.durationUpdated=this.durationUpdated.bind(this),this.updateBlock=this.updateBlock.bind(this)}durationUpdated(e){this.setState({start_date:e.detail.startDate,end_date:e.detail.endDate}),this.updateBlock()}componentDidMount(){document.addEventListener("duration_updated",this.durationUpdated),this.updateBlock()}updateBlock(e="/rp/v1/total-revenue-earned"){let t="/rp/v1/total-revenue-earned?start_date="+this.state.start_date+"&end_date="+this.state.end_date;wisdm_ld_reports_common_script_data.wpml_lang&&(t+="&wpml_lang="+wisdm_ld_reports_common_script_data.wpml_lang),wp.apiFetch({path:t}).then((e=>{let t="udup",a="change-value",r="",n="",l="";0<e.percentChange?(t="udup",a="change-value-positive",n=(0,d.__)("Up","learndash-reports-pro"),l=wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/up.png"):0>e.percentChange?(t="uddown",a="change-value-negative",n=(0,d.__)("Down","learndash-reports-pro"),l=wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/down.png"):0==e.percentChange&&(r="wrld-hidden",n=(0,d.__)("Up","learndash-reports-pro"),l=wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/up.png");let o=wisdm_ld_reports_common_script_data.currency_in_use;o=o.length>1?o+" ":o,this.setState({isLoaded:!0,graphData:{totalRevenueEarned:o+e.totalRevenueEarned,percentChange:e.percentChange+"%",percentChangeDirection:t,percentValueClass:a,hideChange:r,udtxt:n,udsrc:l},startDate:s().unix(e.requestData.start_date).format("MMM, DD YYYY"),endDate:s().unix(e.requestData.end_date).format("MMM, DD YYYY")})})).catch((e=>{"rest_forbidden"==e.code&&wisdm_reports_change_block_visibility(".wisdm-learndash-reports-total-revenue-earned",!1,".wp-block-column.lr-tre"),this.setState({error:e,graph_summary:[],isLoaded:!0,series:[]})}))}render(){let t=(0,e.createElement)("div",null);return t=this.state.isLoaded?this.state.error?(0,e.createElement)("div",{className:"wisdm-learndash-reports-chart-block error"},(0,e.createElement)("div",null,this.state.error.message)):(0,e.createElement)("div",{className:"wisdm-learndash-reports-chart-block"},(0,e.createElement)("div",{className:"total-revenue-earned-container top-card-container"},(0,e.createElement)("div",{className:"wrld-date-filter"},(0,e.createElement)("span",{className:"dashicons dashicons-calendar-alt"}),(0,e.createElement)("div",{className:"wdm-tooltip"},(0,d.__)("Date filter applied:","learndash-reports-pro"),(0,e.createElement)("br",null),this.state.startDate," -"," ",this.state.endDate)),(0,e.createElement)("div",{className:"total-revenue-earned-icon"},(0,e.createElement)("img",{src:wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/icon_total_revenue.png"})),(0,e.createElement)("div",{className:"total-revenue-earned-details"},(0,e.createElement)("div",{className:"total-revenue-earned-text top-label-text"},(0,e.createElement)("span",null,(0,d.__)("Total Revenue Earned","learndash-reports-pro"))),(0,e.createElement)("div",{className:"total-revenue-earned-figure"},(0,e.createElement)("span",null,this.state.graphData.totalRevenueEarned)),(0,e.createElement)("div",{className:`total-revenue-earned-percent-change ${this.state.graphData.hideChange}`},(0,e.createElement)("span",{className:this.state.graphData.percentChangeDirection},(0,e.createElement)("img",{src:this.state.graphData.udsrc})),(0,e.createElement)("span",{className:this.state.graphData.percentValueClass},this.state.graphData.percentChange),(0,e.createElement)("span",{className:"ud-txt"},this.state.graphData.udtxt))))):(0,e.createElement)(r.c,null),t}}document.addEventListener("DOMContentLoaded",(function(e){const a=document.getElementsByClassName("wisdm-learndash-reports-total-revenue-earned front");a.length>0&&(0,l.createRoot)(a[0]).render(t().createElement(o))}))})()})();