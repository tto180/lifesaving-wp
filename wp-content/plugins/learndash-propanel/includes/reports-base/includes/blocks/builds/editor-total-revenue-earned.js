(()=>{"use strict";var e={5792:(e,t,a)=>{a.d(t,{c:()=>l});var r=a(1280),s=a.n(r),n=a(3396);class d extends s().Component{constructor(e){super(e)}render(){let e="",t="";return 1==this.props.text&&(t=(0,r.createElement)("span",{className:"supporting-text"},(0,n.__)("Your report is being generated.","learndash-reports-pro"))),e=(0,r.createElement)("div",{className:"wisdm-learndash-reports-chart-block"},(0,r.createElement)("div",{className:"wisdm-learndash-reports-revenue-from-courses graph-card-container"},(0,r.createElement)("div",{className:"wisdm-graph-loading"},(0,r.createElement)("img",{src:wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/loader.svg"}),t))),e}}const l=d},5996:(e,t,a)=>{a.d(t,{c:()=>p});var r=a(1280),s=a.n(r),n=a(5792);const d=window.moment;var l=a.n(d),o=a(3396);const c=window.wp.element;class i extends r.Component{constructor(e){super(e),this.state={isLoaded:!1,error:null,start_date:l()(new Date(wisdm_ld_reports_common_script_data.start_date)).unix(),end_date:l()(new Date(wisdm_ld_reports_common_script_data.end_date)).unix()},this.durationUpdated=this.durationUpdated.bind(this),this.updateBlock=this.updateBlock.bind(this)}durationUpdated(e){this.setState({start_date:e.detail.startDate,end_date:e.detail.endDate}),this.updateBlock()}componentDidMount(){document.addEventListener("duration_updated",this.durationUpdated),this.updateBlock()}updateBlock(e="/rp/v1/total-revenue-earned"){let t="/rp/v1/total-revenue-earned?start_date="+this.state.start_date+"&end_date="+this.state.end_date;wisdm_ld_reports_common_script_data.wpml_lang&&(t+="&wpml_lang="+wisdm_ld_reports_common_script_data.wpml_lang),wp.apiFetch({path:t}).then((e=>{let t="udup",a="change-value",r="",s="",n="";0<e.percentChange?(t="udup",a="change-value-positive",s=(0,o.__)("Up","learndash-reports-pro"),n=wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/up.png"):0>e.percentChange?(t="uddown",a="change-value-negative",s=(0,o.__)("Down","learndash-reports-pro"),n=wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/down.png"):0==e.percentChange&&(r="wrld-hidden",s=(0,o.__)("Up","learndash-reports-pro"),n=wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/up.png");let d=wisdm_ld_reports_common_script_data.currency_in_use;d=d.length>1?d+" ":d,this.setState({isLoaded:!0,graphData:{totalRevenueEarned:d+e.totalRevenueEarned,percentChange:e.percentChange+"%",percentChangeDirection:t,percentValueClass:a,hideChange:r,udtxt:s,udsrc:n},startDate:l().unix(e.requestData.start_date).format("MMM, DD YYYY"),endDate:l().unix(e.requestData.end_date).format("MMM, DD YYYY")})})).catch((e=>{"rest_forbidden"==e.code&&wisdm_reports_change_block_visibility(".wisdm-learndash-reports-total-revenue-earned",!1,".wp-block-column.lr-tre"),this.setState({error:e,graph_summary:[],isLoaded:!0,series:[]})}))}render(){let e=(0,r.createElement)("div",null);return e=this.state.isLoaded?this.state.error?(0,r.createElement)("div",{className:"wisdm-learndash-reports-chart-block error"},(0,r.createElement)("div",null,this.state.error.message)):(0,r.createElement)("div",{className:"wisdm-learndash-reports-chart-block"},(0,r.createElement)("div",{className:"total-revenue-earned-container top-card-container"},(0,r.createElement)("div",{className:"wrld-date-filter"},(0,r.createElement)("span",{className:"dashicons dashicons-calendar-alt"}),(0,r.createElement)("div",{className:"wdm-tooltip"},(0,o.__)("Date filter applied:","learndash-reports-pro"),(0,r.createElement)("br",null),this.state.startDate," -"," ",this.state.endDate)),(0,r.createElement)("div",{className:"total-revenue-earned-icon"},(0,r.createElement)("img",{src:wisdm_learndash_reports_front_end_script_total_revenue_earned.plugin_asset_url+"/images/icon_total_revenue.png"})),(0,r.createElement)("div",{className:"total-revenue-earned-details"},(0,r.createElement)("div",{className:"total-revenue-earned-text top-label-text"},(0,r.createElement)("span",null,(0,o.__)("Total Revenue Earned","learndash-reports-pro"))),(0,r.createElement)("div",{className:"total-revenue-earned-figure"},(0,r.createElement)("span",null,this.state.graphData.totalRevenueEarned)),(0,r.createElement)("div",{className:`total-revenue-earned-percent-change ${this.state.graphData.hideChange}`},(0,r.createElement)("span",{className:this.state.graphData.percentChangeDirection},(0,r.createElement)("img",{src:this.state.graphData.udsrc})),(0,r.createElement)("span",{className:this.state.graphData.percentValueClass},this.state.graphData.percentChange),(0,r.createElement)("span",{className:"ud-txt"},this.state.graphData.udtxt))))):(0,r.createElement)(n.c,null),e}}const p=i;document.addEventListener("DOMContentLoaded",(function(e){const t=document.getElementsByClassName("wisdm-learndash-reports-total-revenue-earned front");t.length>0&&(0,c.createRoot)(t[0]).render(s().createElement(i))}))},1280:e=>{e.exports=window.React},3396:e=>{e.exports=window.wp.i18n}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=a(1280);const t=window.wp.blocks;var r=a(3396);a(5792);const s=window.wp.blockEditor;var n=a(5996);const d=(0,e.createElement)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"24.000000pt",height:"24.000000pt",viewBox:"0 0 24.000000 24.000000",preserveAspectRatio:"xMidYMid meet"},(0,e.createElement)("path",{d:"M12.4,18.4l0.2,0c1-0.1,1.8-1,1.8-2c0-1.1-0.9-2-2-2h-0.9c-0.5,0-0.9-0.4-0.9-0.9s0.4-0.9,0.9-0.9h2.5 c0.4,0,0.6-0.2,0.6-0.6s-0.2-0.6-0.6-0.6h-1.5v-0.9c0-0.4-0.2-0.6-0.6-0.6c-0.3,0-0.6,0.2-0.6,0.6v0.9l-0.1,0c-1,0.1-1.7,1-1.7,2 c0,1.1,0.9,2,2,2h0.9c0.5,0,0.9,0.4,0.9,0.9s-0.4,0.9-0.9,0.9H9.8c-0.4,0-0.6,0.2-0.6,0.6s0.2,0.6,0.6,0.6h1.4v0.9 c0,0.3,0.2,0.6,0.6,0.6c0.4,0,0.6-0.2,0.6-0.6V18.4z"}),(0,e.createElement)("path",{d:"M8.5,23.7h6.8c1.5,0,2.7-0.5,3.7-1.5c1.1-1.2,1.7-2.9,1.7-4.9c0-3.8-1.8-7.9-4.4-10.2L16.1,7l0.2-0.1 c0.4-0.3,0.5-0.7,0.5-1.2c0-0.6-0.3-1.1-0.8-1.3l-0.2-0.1L17.3,3c0.6-0.4,0.8-1.1,0.5-1.7c-0.2-0.6-0.8-1-1.4-1H7.4 c-0.6,0-1.1,0.4-1.5,1C5.6,1.9,5.8,2.6,6.4,3L8,4.3L7.8,4.4C7.3,4.7,7,5.2,7,5.7c0,0.4,0.2,0.8,0.5,1.1L7.6,7L7.5,7.1 c-2.6,2.3-4.4,6.4-4.4,10.2C3.1,20.5,4.7,23.7,8.5,23.7z M15.7,5.7c0,0.3-0.2,0.4-0.4,0.4h-0.4c-0.4-0.1-1.4-0.1-5.8,0l-0.5,0 C8.2,6.2,8.1,6,8.1,5.7s0.2-0.4,0.4-0.4h6.8C15.6,5.3,15.7,5.5,15.7,5.7z M7.2,2C7,1.9,7,1.8,7,1.7c0,0,0-0.1,0-0.1l0-0.1 c0,0,0.1-0.2,0.3-0.2h9.2c0.1,0,0.2,0,0.2,0.1l0.1,0.2c0,0,0,0.3-0.2,0.4l0,0L14,4.2H9.9L7.2,2z M9.2,7.3L9.2,7.3l5.4,0l0,0 c2.8,1.8,4.9,6.1,4.9,10.1c0,2.4-1.1,5.3-4.2,5.3H8.5c-3.1,0-4.2-2.8-4.2-5.3C4.2,13.2,6.3,9,9.2,7.3z"}));(0,t.registerBlockType)("wisdm-learndash-reports/total-revenue-earned",{title:(0,r.__)("Total Revenue","learndash-reports-pro"),description:(0,r.__)("Displays the total revenue earned during the selected time & its comparison with the previous duration","learndash-reports-pro"),category:"wisdm-learndash-reports",className:"learndash-reports-by-wisdmlabs-total-revenue-earned",icon:d,attributes:{blockContent:{type:"html",default:""}},edit:t=>(0,e.createElement)("div",{...(0,s.useBlockProps)()},(0,e.createElement)(n.c,null)),save:()=>(0,e.createElement)("div",{...s.useBlockProps.save()},(0,e.createElement)("div",{className:"wisdm-learndash-reports-total-revenue-earned front"}))})})()})();